import{n as He,N as yt,O as Qr,P as Te,S as Ze,o as Be,U as Hi,V as ki}from"./vendor-BMtVWkdh.js";var Bn={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function pe(e){return typeof e=="number"}function De(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Qe(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function ut(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Ve(e){return e&&e.constructor.prototype.isUnit===!0||!1}function ze(e){return typeof e=="string"}var me=Array.isArray;function Ne(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function br(e){return Array.isArray(e)||Ne(e)}function _n(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Mn(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Rn(e){return e&&e.constructor.prototype.isRange===!0||!1}function xr(e){return e&&e.constructor.prototype.isIndex===!0||!1}function In(e){return typeof e=="boolean"}function $n(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Ln(e){return e&&e.constructor.prototype.isHelp===!0||!1}function Un(e){return typeof e=="function"}function zn(e){return e instanceof Date}function Pn(e){return e instanceof RegExp}function Sr(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Qe(e)&&!ut(e))}function Hn(e){return e===null}function kn(e){return e===void 0}function ir(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Cr(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function qn(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Gn(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function Vn(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function We(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function wt(e){return We(e)||Tr(e)&&e.args.length===1&&We(e.args[0])&&"-+~".includes(e.op)}function Tt(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function ot(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function Or(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function Ae(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function Bt(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function Tr(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function vr(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function Wn(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function jn(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Pe(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function Jn(e){return e&&e.constructor.prototype.isChain===!0||!1}function Le(e){var r=typeof e;return r==="object"?e===null?"null":De(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":r}function fe(e){var r=typeof e;if(r==="number"||r==="string"||r==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(i){return fe(i)});if(e instanceof Date)return new Date(e.valueOf());if(De(e))return e;if(Sr(e))return wr(e,fe);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function wr(e,r){var i={};for(var a in e)J(e,a)&&(i[a]=r(e[a]));return i}function qi(e,r){for(var i in r)J(r,i)&&(e[i]=r[i]);return e}function Yn(e,r){if(Array.isArray(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i in r)if(J(r,i)&&!(i in Object.prototype)&&!(i in Function.prototype))if(r[i]&&r[i].constructor===Object)e[i]===void 0&&(e[i]={}),e[i]&&e[i].constructor===Object?Yn(e[i],r[i]):e[i]=r[i];else{if(Array.isArray(r[i]))throw new TypeError("Arrays are not supported by deepExtend");e[i]=r[i]}return e}function ar(e,r){var i,a,n;if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(a=0,n=e.length;a<n;a++)if(!ar(e[a],r[a]))return!1;return!0}else{if(typeof e=="function")return e===r;if(e instanceof Object){if(Array.isArray(r)||!(r instanceof Object))return!1;for(i in e)if(!(i in r)||!ar(e[i],r[i]))return!1;for(i in r)if(!(i in e))return!1;return!0}else return e===r}}function Gi(e){var r={};return Zn(e,r),r}function Zn(e,r){for(var i in e)if(J(e,i)){var a=e[i];typeof a=="object"&&a!==null?Zn(a,r):r[i]=a}}function vt(e,r,i){var a=!0,n;Object.defineProperty(e,r,{get:function(){return a&&(n=i(),a=!1),n},set:function(u){n=u,a=!1},configurable:!0,enumerable:!0})}function J(e,r){return e&&Object.hasOwnProperty.call(e,r)}function Vi(e){return e&&typeof e.factory=="function"}function Wi(e,r){for(var i={},a=0;a<r.length;a++){var n=r[a],t=e[n];t!==void 0&&(i[n]=t)}return i}var qt=["Matrix","Array"],Gt=["number","BigNumber","Fraction"];function ji(e,r){function i(a){if(a){var n=wr(e,fe);Vt(a,"matrix",qt),Vt(a,"number",Gt),Yn(e,a);var t=wr(e,fe),u=wr(a,fe);return r("config",t,n,u),t}else return wr(e,fe)}return i.MATRIX_OPTIONS=qt,i.NUMBER_OPTIONS=Gt,Object.keys(Bn).forEach(a=>{Object.defineProperty(i,a,{get:()=>e[a],enumerable:!0,configurable:!0})}),i}function Ji(e,r){return e.indexOf(r)!==-1}function Vt(e,r,i){e[r]!==void 0&&!Ji(i,e[r])&&console.warn('Warning: Unknown value "'+e[r]+'" for configuration option "'+r+'". Available options: '+i.map(a=>JSON.stringify(a)).join(", ")+".")}function de(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function ht(e,r,i){var a={2:"0b",8:"0o",16:"0x"},n=a[r],t="";if(i){if(i<1)throw new Error("size must be in greater than 0");if(!de(i))throw new Error("size must be an integer");if(e>2**(i-1)-1||e<-(2**(i-1)))throw new Error("Value must be in range [-2^".concat(i-1,", 2^").concat(i-1,"-1]"));if(!de(e))throw new Error("Value must be an integer");e<0&&(e=e+2**i),t="i".concat(i)}var u="";return e<0&&(e=-e,u="-"),"".concat(u).concat(n).concat(e.toString(r)).concat(t)}function Nt(e,r){if(typeof r=="function")return r(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:i,precision:a,wordSize:n}=Xn(r);switch(i){case"fixed":return Kn(e,a);case"exponential":return Qn(e,a);case"engineering":return Yi(e,a);case"bin":return ht(e,2,n);case"oct":return ht(e,8,n);case"hex":return ht(e,16,n);case"auto":return Zi(e,a,r).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],u=arguments[4];return t!=="."?t+u:u});default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Xn(e){var r="auto",i,a;if(e!==void 0)if(pe(e))i=e;else if(De(e))i=e.toNumber();else if(Sr(e))e.precision!==void 0&&(i=Wt(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(a=Wt(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(r=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:r,precision:i,wordSize:a}}function Br(e){var r=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!r)throw new SyntaxError("Invalid number "+e);var i=r[1],a=r[2],n=parseFloat(r[4]||"0"),t=a.indexOf(".");n+=t!==-1?t-1:a.length-1;var u=a.replace(".","").replace(/^0*/,function(h){return n-=h.length,""}).replace(/0*$/,"").split("").map(function(h){return parseInt(h)});return u.length===0&&(u.push(0),n++),{sign:i,coefficients:u,exponent:n}}function Yi(e,r){if(isNaN(e)||!isFinite(e))return String(e);var i=Br(e),a=st(i,r),n=a.exponent,t=a.coefficients,u=n%3===0?n:n<0?n-3-n%3:n-n%3;if(pe(r))for(;r>t.length||n-u+1>t.length;)t.push(0);else for(var h=Math.abs(n-u)-(t.length-1),c=0;c<h;c++)t.push(0);for(var f=Math.abs(n-u),s=1;f>0;)s++,f--;var d=t.slice(s).join(""),v=pe(r)&&d.length||d.match(/[1-9]/)?"."+d:"",p=t.slice(0,s).join("")+v+"e"+(n>=0?"+":"")+u.toString();return a.sign+p}function Kn(e,r){if(isNaN(e)||!isFinite(e))return String(e);var i=Br(e),a=typeof r=="number"?st(i,i.exponent+1+r):i,n=a.coefficients,t=a.exponent+1,u=t+(r||0);return n.length<u&&(n=n.concat(pr(u-n.length))),t<0&&(n=pr(-t+1).concat(n),t=1),t<n.length&&n.splice(t,0,t===0?"0.":"."),a.sign+n.join("")}function Qn(e,r){if(isNaN(e)||!isFinite(e))return String(e);var i=Br(e),a=r?st(i,r):i,n=a.coefficients,t=a.exponent;n.length<r&&(n=n.concat(pr(r-n.length)));var u=n.shift();return a.sign+u+(n.length>0?"."+n.join(""):"")+"e"+(t>=0?"+":"")+t}function Zi(e,r,i){if(isNaN(e)||!isFinite(e))return String(e);var a=jt(i==null?void 0:i.lowerExp,-3),n=jt(i==null?void 0:i.upperExp,5),t=Br(e),u=r?st(t,r):t;if(u.exponent<a||u.exponent>=n)return Qn(e,r);var h=u.coefficients,c=u.exponent;h.length<r&&(h=h.concat(pr(r-h.length))),h=h.concat(pr(c-h.length+1+(h.length<r?r-h.length:0))),h=pr(-c).concat(h);var f=c>0?c:0;return f<h.length-1&&h.splice(f+1,0,"."),u.sign+h.join("")}function st(e,r){for(var i={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},a=i.coefficients;r<=0;)a.unshift(0),i.exponent++,r++;if(a.length>r){var n=a.splice(r,a.length-r);if(n[0]>=5){var t=r-1;for(a[t]++;a[t]===10;)a.pop(),t===0&&(a.unshift(0),i.exponent++,t++),t--,a[t]++}}return i}function pr(e){for(var r=[],i=0;i<e;i++)r.push(0);return r}function Xi(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Ki=Number.EPSILON||2220446049250313e-31;function Ye(e,r,i){if(i==null)return e===r;if(e===r)return!0;if(isNaN(e)||isNaN(r))return!1;if(isFinite(e)&&isFinite(r)){var a=Math.abs(e-r);return a<=Ki?!0:a<=Math.max(Math.abs(e),Math.abs(r))*i}return!1}function Wt(e,r){if(pe(e))return e;if(De(e))return e.toNumber();r()}function jt(e,r){return pe(e)?e:De(e)?e.toNumber():r}function mt(e,r,i){var a=e.constructor,n=new a(2),t="";if(i){if(i<1)throw new Error("size must be in greater than 0");if(!de(i))throw new Error("size must be an integer");if(e.greaterThan(n.pow(i-1).sub(1))||e.lessThan(n.pow(i-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(i-1,", 2^").concat(i-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(n.pow(i))),t="i".concat(i)}switch(r){case 2:return"".concat(e.toBinary()).concat(t);case 8:return"".concat(e.toOctal()).concat(t);case 16:return"".concat(e.toHexadecimal()).concat(t);default:throw new Error("Base ".concat(r," not supported "))}}function Qi(e,r){if(typeof r=="function")return r(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:i,precision:a,wordSize:n}=Xn(r);switch(i){case"fixed":return ra(e,a);case"exponential":return Jt(e,a);case"engineering":return ea(e,a);case"bin":return mt(e,2,n);case"oct":return mt(e,8,n);case"hex":return mt(e,16,n);case"auto":{var t=Yt(r==null?void 0:r.lowerExp,-3),u=Yt(r==null?void 0:r.upperExp,5);if(e.isZero())return"0";var h,c=e.toSignificantDigits(a),f=c.e;return f>=t&&f<u?h=c.toFixed():h=Jt(e,a),h.replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],d=arguments[4];return s!=="."?s+d:d})}default:throw new Error('Unknown notation "'+i+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ea(e,r){var i=e.e,a=i%3===0?i:i<0?i-3-i%3:i-i%3,n=e.mul(Math.pow(10,-a)),t=n.toPrecision(r);if(t.indexOf("e")!==-1){var u=e.constructor;t=new u(t).toFixed()}return t+"e"+(i>=0?"+":"")+a.toString()}function Jt(e,r){return r!==void 0?e.toExponential(r-1):e.toExponential()}function ra(e,r){return e.toFixed(r)}function Yt(e,r){return pe(e)?e:De(e)?e.toNumber():r}function ta(e,r){var i=e.length-r.length,a=e.length;return e.substring(i,a)===r}function we(e,r){var i=na(e,r);return r&&typeof r=="object"&&"truncate"in r&&i.length>r.truncate?i.substring(0,r.truncate-3)+"...":i}function na(e,r){if(typeof e=="number")return Nt(e,r);if(De(e))return Qi(e,r);if(ia(e))return!r||r.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return ei(e,r);if(ze(e))return cr(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(r);if(e&&e.toString(r)!=={}.toString())return e.toString(r);var i=Object.keys(e).map(a=>cr(a)+": "+we(e[a],r));return"{"+i.join(", ")+"}"}return String(e)}function cr(e){for(var r=String(e),i="",a=0;a<r.length;){var n=r.charAt(a);i+=n in Zt?Zt[n]:n,a++}return'"'+i+'"'}var Zt={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ke(e){var r=String(e);return r=r.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r}function ei(e,r){if(Array.isArray(e)){for(var i="[",a=e.length,n=0;n<a;n++)n!==0&&(i+=", "),i+=ei(e[n],r);return i+="]",i}else return we(e,r)}function ia(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function te(e,r,i){if(!(this instanceof te))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=r,this.relation=i,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(r)?"["+r.join(", ")+"]":r)+")",this.stack=new Error().stack}te.prototype=new RangeError;te.prototype.constructor=RangeError;te.prototype.name="DimensionError";te.prototype.isDimensionError=!0;function Xe(e,r,i){if(!(this instanceof Xe))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=r):(this.min=r,this.max=i),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Xe.prototype=new RangeError;Xe.prototype.constructor=RangeError;Xe.prototype.name="IndexError";Xe.prototype.isIndexError=!0;function Ie(e){for(var r=[];Array.isArray(e);)r.push(e.length),e=e[0];return r}function ri(e,r,i){var a,n=e.length;if(n!==r[i])throw new te(n,r[i]);if(i<r.length-1){var t=i+1;for(a=0;a<n;a++){var u=e[a];if(!Array.isArray(u))throw new te(r.length-1,r.length,"<");ri(e[a],r,t)}}else for(a=0;a<n;a++)if(Array.isArray(e[a]))throw new te(r.length+1,r.length,">")}function Xt(e,r){var i=r.length===0;if(i){if(Array.isArray(e))throw new te(e.length,0)}else ri(e,r,0)}function et(e,r){var i=e.isMatrix?e._size:Ie(e),a=r._sourceSize;a.forEach((n,t)=>{if(n!==null&&n!==i[t])throw new te(n,i[t])})}function ce(e,r){if(e!==void 0){if(!pe(e)||!de(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof r=="number"&&e>=r)throw new Xe(e,r)}}function hr(e){for(var r=0;r<e._dimensions.length;++r){var i=e._dimensions[r];if(i._data&&me(i._data)){if(i._size[0]===0)return!0}else if(i.isRange){if(i.start===i.end)return!0}else if(ze(i)&&i.length===0)return!0}return!1}function rt(e,r,i){if(!Array.isArray(r))throw new TypeError("Array expected");if(r.length===0)throw new Error("Resizing to scalar is not supported");r.forEach(function(n){if(!pe(n)||!de(n)||n<0)throw new TypeError("Invalid size, must contain positive integers (size: "+we(r)+")")}),(pe(e)||De(e))&&(e=[e]);var a=i!==void 0?i:0;return At(e,r,0,a),e}function At(e,r,i,a){var n,t,u=e.length,h=r[i],c=Math.min(u,h);if(e.length=h,i<r.length-1){var f=i+1;for(n=0;n<c;n++)t=e[n],Array.isArray(t)||(t=[t],e[n]=t),At(t,r,f,a);for(n=c;n<h;n++)t=[],e[n]=t,At(t,r,f,a)}else{for(n=0;n<c;n++)for(;Array.isArray(e[n]);)e[n]=e[n][0];for(n=c;n<h;n++)e[n]=a}}function ti(e,r){var i=ua(e),a=i.length;if(!Array.isArray(e)||!Array.isArray(r))throw new TypeError("Array expected");if(r.length===0)throw new te(0,a,"!=");r=_t(r,a);var n=ni(r);if(a!==n)throw new te(n,a,"!=");try{return aa(i,r)}catch(t){throw t instanceof te?new te(n,a,"!="):t}}function _t(e,r){var i=ni(e),a=e.slice(),n=-1,t=e.indexOf(n),u=e.indexOf(n,t+1)>=0;if(u)throw new Error("More than one wildcard in sizes");var h=t>=0,c=r%i===0;if(h)if(c)a[t]=-r/i;else throw new Error("Could not replace wildcard, since "+r+" is no multiple of "+-i);return a}function ni(e){return e.reduce((r,i)=>r*i,1)}function aa(e,r){for(var i=e,a,n=r.length-1;n>0;n--){var t=r[n];a=[];for(var u=i.length/t,h=0;h<u;h++)a.push(i.slice(h*t,(h+1)*t));i=a}return i}function ii(e,r,i,a){var n=a||Ie(e);if(i)for(var t=0;t<i;t++)e=[e],n.unshift(1);for(e=ai(e,r,0);n.length<r;)n.push(1);return e}function ai(e,r,i){var a,n;if(Array.isArray(e)){var t=i+1;for(a=0,n=e.length;a<n;a++)e[a]=ai(e[a],r,t)}else for(var u=i;u<r;u++)e=[e];return e}function ua(e){if(!Array.isArray(e))return e;var r=[];return e.forEach(function i(a){Array.isArray(a)?a.forEach(i):r.push(a)}),r}function er(e,r){return Array.prototype.map.call(e,r)}function ui(e,r){Array.prototype.forEach.call(e,r)}function Kt(e,r){return Array.prototype.join.call(e,r)}function tt(e,r){for(var i,a=0,n=0;n<e.length;n++){var t=e[n],u=Array.isArray(t);if(n===0&&u&&(a=t.length),u&&t.length!==a)return;var h=u?tt(t,r):r(t);if(i===void 0)i=h;else if(i!==h)return"mixed"}return i}function Qt(e,r){return e.indexOf(r)!==-1}function oi(e,r,i,a){if(a<i){if(e.length!==r.length)throw new te(e.length,r.length);for(var n=[],t=0;t<e.length;t++)n[t]=oi(e[t],r[t],i,a+1);return n}else return e.concat(r)}function si(){var e=Array.prototype.slice.call(arguments,0,-1),r=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(i,a){return oi(i,a,r,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function oa(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var a=r.map(v=>v.length),n=Math.max(...a),t=new Array(n).fill(null),u=0;u<r.length;u++)for(var h=r[u],c=a[u],f=0;f<c;f++){var s=n-c+f;h[f]>t[s]&&(t[s]=h[f])}for(var d=0;d<r.length;d++)nt(r[d],t);return t}function nt(e,r){for(var i=r.length,a=e.length,n=0;n<a;n++){var t=i-a+n;if(e[n]<r[t]&&e[n]>1||e[n]>r[t])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(a," with size ").concat(e[n]," to size ").concat(r[t]))}}function en(e,r){var i=Ie(e);if(ar(i,r))return e;nt(i,r);var a=oa(i,r),n=a.length,t=[...Array(n-i.length).fill(1),...i],u=fa(e);i.length<n&&(u=ti(u,t),i=Ie(u));for(var h=0;h<n;h++)i[h]<a[h]&&(u=sa(u,a[h],h),i=Ie(u));return u}function sa(e,r,i){return si(...Array(r).fill(e),i)}function fa(e){return He([],e)}function G(e,r,i,a){function n(t){var u=Wi(t,r.map(fi));return la(e,r,t),i(u)}return n.isFactory=!0,n.fn=e,n.dependencies=r.slice().sort(),a&&(n.meta=a),n}function Ar(e){return typeof e=="function"&&typeof e.fn=="string"&&Array.isArray(e.dependencies)}function la(e,r,i){var a=r.filter(t=>!ca(t)).every(t=>i[t]!==void 0);if(!a){var n=r.filter(t=>i[t]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(n.map(t=>'"'.concat(t,'"')).join(", "),"."))}}function ca(e){return e&&e[0]==="?"}function fi(e){return e&&e[0]==="?"?e.slice(1):e}function Ue(e,r){if(ci(e)&&li(e,r))return e[r];throw typeof e[r]=="function"&&Mt(e,r)?new Error('Cannot access method "'+r+'" as a property'):new Error('No access to property "'+r+'"')}function Fr(e,r,i){if(ci(e)&&li(e,r))return e[r]=i,i;throw new Error('No access to property "'+r+'"')}function pa(e,r){return r in e}function li(e,r){return!e||typeof e!="object"?!1:J(ha,r)?!0:!(r in Object.prototype||r in Function.prototype)}function va(e,r){if(!Mt(e,r))throw new Error('No access to method "'+r+'"');return e[r]}function Mt(e,r){return e==null||typeof e[r]!="function"||J(e,r)&&Object.getPrototypeOf&&r in Object.getPrototypeOf(e)?!1:J(ma,r)?!0:!(r in Object.prototype||r in Function.prototype)}function ci(e){return typeof e=="object"&&e&&e.constructor===Object}var ha={length:!0,name:!0},ma={toString:!0,valueOf:!0,toLocaleString:!0};class Rt{constructor(r){this.wrappedObject=r,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(r){return Ue(this.wrappedObject,r)}set(r,i){return Fr(this.wrappedObject,r,i),this}has(r){return pa(this.wrappedObject,r)}entries(){return pi(this.keys(),r=>[r,this.get(r)])}forEach(r){for(var i of this.keys())r(this.get(i),i,this)}delete(r){delete this.wrappedObject[r]}clear(){for(var r of this.keys())this.delete(r)}get size(){return Object.keys(this.wrappedObject).length}}class da{constructor(r,i,a){this.a=r,this.b=i,this.bKeys=a,this[Symbol.iterator]=this.entries}get(r){return this.bKeys.has(r)?this.b.get(r):this.a.get(r)}set(r,i){return this.bKeys.has(r)?this.b.set(r,i):this.a.set(r,i),this}has(r){return this.b.has(r)||this.a.has(r)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return pi(this.keys(),r=>[r,this.get(r)])}forEach(r){for(var i of this.keys())r(this.get(i),i,this)}delete(r){return this.bKeys.has(r)?this.b.delete(r):this.a.delete(r)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function pi(e,r){return{next:()=>{var i=e.next();return i.done?i:{value:r(i.value),done:!1}}}}function bt(){return new Map}function Da(e){if(!e)return bt();if(vi(e))return e;if(Sr(e))return new Rt(e);throw new Error("createMap can create maps from objects or Maps")}function vi(e){return e?e instanceof Map||e instanceof Rt||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var hi=function(){return hi=yt.create,yt},ga=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Ea=G("typed",ga,function(r){var{BigNumber:i,Complex:a,DenseMatrix:n,Fraction:t}=r,u=hi();return u.clear(),u.addTypes([{name:"number",test:pe},{name:"Complex",test:Qe},{name:"BigNumber",test:De},{name:"Fraction",test:ut},{name:"Unit",test:Ve},{name:"identifier",test:h=>ze&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(h)},{name:"string",test:ze},{name:"Chain",test:Jn},{name:"Array",test:me},{name:"Matrix",test:Ne},{name:"DenseMatrix",test:_n},{name:"SparseMatrix",test:Mn},{name:"Range",test:Rn},{name:"Index",test:xr},{name:"boolean",test:In},{name:"ResultSet",test:$n},{name:"Help",test:Ln},{name:"function",test:Un},{name:"Date",test:zn},{name:"RegExp",test:Pn},{name:"null",test:Hn},{name:"undefined",test:kn},{name:"AccessorNode",test:ir},{name:"ArrayNode",test:Cr},{name:"AssignmentNode",test:qn},{name:"BlockNode",test:Gn},{name:"ConditionalNode",test:Vn},{name:"ConstantNode",test:We},{name:"FunctionNode",test:ot},{name:"FunctionAssignmentNode",test:Tt},{name:"IndexNode",test:Or},{name:"Node",test:Ae},{name:"ObjectNode",test:Bt},{name:"OperatorNode",test:Tr},{name:"ParenthesisNode",test:vr},{name:"RangeNode",test:Wn},{name:"RelationalNode",test:jn},{name:"SymbolNode",test:Pe},{name:"Map",test:vi},{name:"Object",test:Sr}]),u.addConversions([{from:"number",to:"BigNumber",convert:function(c){if(i||dt(c),Xi(c)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+c+"). Use function bignumber(x) to convert to BigNumber.");return new i(c)}},{from:"number",to:"Complex",convert:function(c){return a||Lr(c),new a(c,0)}},{from:"BigNumber",to:"Complex",convert:function(c){return a||Lr(c),new a(c.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(c){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(c){return a||Lr(c),new a(c.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(c){t||Dt(c);var f=new t(c);if(f.valueOf()!==c)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+c+"). Use function fraction(x) to convert to Fraction.");return f}},{from:"string",to:"number",convert:function(c){var f=Number(c);if(isNaN(f))throw new Error('Cannot convert "'+c+'" to a number');return f}},{from:"string",to:"BigNumber",convert:function(c){i||dt(c);try{return new i(c)}catch{throw new Error('Cannot convert "'+c+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(c){t||Dt(c);try{return new t(c)}catch{throw new Error('Cannot convert "'+c+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(c){a||Lr(c);try{return new a(c)}catch{throw new Error('Cannot convert "'+c+'" to Complex')}}},{from:"boolean",to:"number",convert:function(c){return+c}},{from:"boolean",to:"BigNumber",convert:function(c){return i||dt(c),new i(+c)}},{from:"boolean",to:"Fraction",convert:function(c){return t||Dt(c),new t(+c)}},{from:"boolean",to:"string",convert:function(c){return String(c)}},{from:"Array",to:"Matrix",convert:function(c){return n||ya(),new n(c)}},{from:"Matrix",to:"Array",convert:function(c){return c.valueOf()}}]),u.onMismatch=(h,c,f)=>{var s=u.createError(h,c,f);if(["wrongType","mismatch"].includes(s.data.category)&&c.length===1&&br(c[0])&&f.some(v=>!v.params.includes(","))){var d=new TypeError("Function '".concat(h,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(h,")'."));throw d.data=s.data,d}throw s},u.onMismatch=(h,c,f)=>{var s=u.createError(h,c,f);if(["wrongType","mismatch"].includes(s.data.category)&&c.length===1&&br(c[0])&&f.some(v=>!v.params.includes(","))){var d=new TypeError("Function '".concat(h,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(h,")'."));throw d.data=s.data,d}throw s},u});function dt(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Lr(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function ya(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Dt(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var wa="ResultSet",Na=[],Aa=G(wa,Na,()=>{function e(r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.entries=r||[]}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return"["+this.entries.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},e.fromJSON=function(r){return new e(r.entries)},e},{isClass:!0}),ba="BigNumber",Ca=["?on","config"],Fa=G(ba,Ca,e=>{var{on:r,config:i}=e,a=Qr.clone({precision:i.precision,modulo:Qr.EUCLID});return a.prototype=Object.create(a.prototype),a.prototype.type="BigNumber",a.prototype.isBigNumber=!0,a.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},a.fromJSON=function(n){return new a(n.value)},r&&r("config",function(n,t){n.precision!==t.precision&&a.config({precision:n.precision})}),a},{isClass:!0}),xa="Complex",Sa=[],Oa=G(xa,Sa,()=>(Object.defineProperty(Te,"name",{value:"Complex"}),Te.prototype.constructor=Te,Te.prototype.type="Complex",Te.prototype.isComplex=!0,Te.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Te.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Te.prototype.format=function(e){var r="",i=this.im,a=this.re,n=Nt(this.re,e),t=Nt(this.im,e),u=pe(e)?e:e?e.precision:null;if(u!==null){var h=Math.pow(10,-u);Math.abs(a/i)<h&&(a=0),Math.abs(i/a)<h&&(i=0)}return i===0?r=n:a===0?i===1?r="i":i===-1?r="-i":r=t+"i":i<0?i===-1?r=n+" - i":r=n+" - "+t.substring(1)+"i":i===1?r=n+" + i":r=n+" + "+t+"i",r},Te.fromPolar=function(e){switch(arguments.length){case 1:{var r=arguments[0];if(typeof r=="object")return Te(r);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var i=arguments[0],a=arguments[1];if(pe(i)){if(Ve(a)&&a.hasBase("ANGLE")&&(a=a.toNumber("rad")),pe(a))return new Te({r:i,phi:a});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Te.prototype.valueOf=Te.prototype.toString,Te.fromJSON=function(e){return new Te(e)},Te.compare=function(e,r){return e.re>r.re?1:e.re<r.re?-1:e.im>r.im?1:e.im<r.im?-1:0},Te),{isClass:!0}),Ta="Fraction",Ba=[],_a=G(Ta,Ba,()=>(Object.defineProperty(Ze,"name",{value:"Fraction"}),Ze.prototype.constructor=Ze,Ze.prototype.type="Fraction",Ze.prototype.isFraction=!0,Ze.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Ze.fromJSON=function(e){return new Ze(e)},Ze),{isClass:!0}),Ma="Matrix",Ra=[],Ia=G(Ma,Ra,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(r,i){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(r,i,a){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(r){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(r,i,a){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(r,i){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(r,i){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(r,i){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(r){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(r){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function $a(e){var r=0,i=1,a=Object.create(null),n=Object.create(null),t=0,u=function(c){var f=n[c];if(f&&(delete a[f],delete n[c],--r,i===f)){if(!r){t=0,i=1;return}for(;!Object.prototype.hasOwnProperty.call(a,++i););}};return e=Math.abs(e),{hit:function(c){var f=n[c],s=++t;if(a[s]=c,n[c]=s,!f)return++r,r<=e?void 0:(c=a[i],u(c),c);if(delete a[f],i===f)for(;!Object.prototype.hasOwnProperty.call(a,++i););},delete:u,clear:function(){r=t=0,i=1,a=Object.create(null),n=Object.create(null)}}}function _r(e){var{hasher:r,limit:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=i??Number.POSITIVE_INFINITY,r=r??JSON.stringify,function a(){typeof a.cache!="object"&&(a.cache={values:new Map,lru:$a(i||Number.POSITIVE_INFINITY)});for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var u=r(n);if(a.cache.values.has(u))return a.cache.lru.hit(u),a.cache.values.get(u);var h=e.apply(e,n);return a.cache.values.set(u,h),a.cache.values.delete(a.cache.lru.hit(u)),h}}function mi(e){return Object.keys(e.signatures||{}).reduce(function(r,i){var a=(i.match(/,/g)||[]).length+1;return Math.max(r,a)},-1)}var La="DenseMatrix",Ua=["Matrix"],za=G(La,Ua,e=>{var{Matrix:r}=e;function i(s,d){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!ze(d))throw new Error("Invalid datatype: "+d);if(Ne(s))s.type==="DenseMatrix"?(this._data=fe(s._data),this._size=fe(s._size),this._datatype=d||s._datatype):(this._data=s.toArray(),this._size=s.size(),this._datatype=d||s._datatype);else if(s&&me(s.data)&&me(s.size))this._data=s.data,this._size=s.size,Xt(this._data,this._size),this._datatype=d||s.datatype;else if(me(s))this._data=f(s),this._size=Ie(this._data),Xt(this._data,this._size),this._datatype=d;else{if(s)throw new TypeError("Unsupported type of data ("+Le(s)+")");this._data=[],this._size=[0],this._datatype=d}}i.prototype=new r,i.prototype.createDenseMatrix=function(s,d){return new i(s,d)},Object.defineProperty(i,"name",{value:"DenseMatrix"}),i.prototype.constructor=i,i.prototype.type="DenseMatrix",i.prototype.isDenseMatrix=!0,i.prototype.getDataType=function(){return tt(this._data,Le)},i.prototype.storage=function(){return"dense"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(s,d){return new i(s,d)},i.prototype.subset=function(s,d,v){switch(arguments.length){case 1:return a(this,s);case 2:case 3:return t(this,s,d,v);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(s){if(!me(s))throw new TypeError("Array expected");if(s.length!==this._size.length)throw new te(s.length,this._size.length);for(var d=0;d<s.length;d++)ce(s[d],this._size[d]);for(var v=this._data,p=0,m=s.length;p<m;p++){var o=s[p];ce(o,v.length),v=v[o]}return v},i.prototype.set=function(s,d,v){if(!me(s))throw new TypeError("Array expected");if(s.length<this._size.length)throw new te(s.length,this._size.length,"<");var p,m,o,D=s.map(function(T){return T+1});c(this,D,v);var E=this._data;for(p=0,m=s.length-1;p<m;p++)o=s[p],ce(o,E.length),E=E[o];return o=s[s.length-1],ce(o,E.length),E[o]=d,this};function a(s,d){if(!xr(d))throw new TypeError("Invalid index");var v=d.isScalar();if(v)return s.get(d.min());var p=d.size();if(p.length!==s._size.length)throw new te(p.length,s._size.length);for(var m=d.min(),o=d.max(),D=0,E=s._size.length;D<E;D++)ce(m[D],s._size[D]),ce(o[D],s._size[D]);return new i(n(s._data,d,p.length,0),s._datatype)}function n(s,d,v,p){var m=p===v-1,o=d.dimension(p);return m?o.map(function(D){return ce(D,s.length),s[D]}).valueOf():o.map(function(D){ce(D,s.length);var E=s[D];return n(E,d,v,p+1)}).valueOf()}function t(s,d,v,p){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var m=d.size(),o=d.isScalar(),D;if(Ne(v)?(D=v.size(),v=v.valueOf()):D=Ie(v),o){if(D.length!==0)throw new TypeError("Scalar expected");s.set(d.min(),v,p)}else{if(!ar(D,m))try{D.length===0?v=en([v],m):v=en(v,m),D=Ie(v)}catch{}if(m.length<s._size.length)throw new te(m.length,s._size.length,"<");if(D.length<m.length){for(var E=0,T=0;m[E]===1&&D[E]===1;)E++;for(;m[E]===1;)T++,E++;v=ii(v,m.length,T,D)}if(!ar(m,D))throw new te(m,D,">");var g=d.max().map(function(w){return w+1});c(s,g,p);var F=m.length,N=0;u(s._data,d,v,F,N)}return s}function u(s,d,v,p,m){var o=m===p-1,D=d.dimension(m);o?D.forEach(function(E,T){ce(E),s[E]=v[T[0]]}):D.forEach(function(E,T){ce(E),u(s[E],d,v[T[0]],p,m+1)})}i.prototype.resize=function(s,d,v){if(!br(s))throw new TypeError("Array or Matrix expected");var p=s.valueOf().map(o=>Array.isArray(o)&&o.length===1?o[0]:o),m=v?this.clone():this;return h(m,p,d)};function h(s,d,v){if(d.length===0){for(var p=s._data;me(p);)p=p[0];return p}return s._size=d.slice(0),s._data=rt(s._data,s._size,v),s}i.prototype.reshape=function(s,d){var v=d?this.clone():this;v._data=ti(v._data,s);var p=v._size.reduce((m,o)=>m*o);return v._size=_t(s,p),v};function c(s,d,v){for(var p=s._size.slice(0),m=!1;p.length<d.length;)p.push(0),m=!0;for(var o=0,D=d.length;o<D;o++)d[o]>p[o]&&(p[o]=d[o],m=!0);m&&h(s,p,v)}i.prototype.clone=function(){var s=new i({data:fe(this._data),size:fe(this._size),datatype:this._datatype});return s},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(s){var d=this,v=mi(s),p=function D(E,T){return me(E)?E.map(function(g,F){return D(g,T.concat(F))}):v===1?s(E):v===2?s(E,T):s(E,T,d)},m=p(this._data,[]),o=this._datatype!==void 0?tt(m,Le):void 0;return new i(m,o)},i.prototype.forEach=function(s){var d=this,v=function p(m,o){me(m)?m.forEach(function(D,E){p(D,o.concat(E))}):s(m,o,d)};v(this._data,[])},i.prototype[Symbol.iterator]=function*(){var s=function*d(v,p){if(me(v))for(var m=0;m<v.length;m++)yield*d(v[m],p.concat(m));else yield{value:v,index:p}};yield*s(this._data,[])},i.prototype.rows=function(){var s=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var v=this._data;for(var p of v)s.push(new i([p],this._datatype));return s},i.prototype.columns=function(){var s=this,d=[],v=this.size();if(v.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,m=function(E){var T=p.map(g=>[g[E]]);d.push(new i(T,s._datatype))},o=0;o<v[1];o++)m(o);return d},i.prototype.toArray=function(){return fe(this._data)},i.prototype.valueOf=function(){return this._data},i.prototype.format=function(s){return we(this._data,s)},i.prototype.toString=function(){return we(this._data)},i.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(s){if(s){if(De(s)&&(s=s.toNumber()),!pe(s)||!de(s))throw new TypeError("The parameter k must be an integer number")}else s=0;for(var d=s>0?s:0,v=s<0?-s:0,p=this._size[0],m=this._size[1],o=Math.min(p-v,m-d),D=[],E=0;E<o;E++)D[E]=this._data[E+v][E+d];return new i({data:D,size:[o],datatype:this._datatype})},i.diagonal=function(s,d,v,p){if(!me(s))throw new TypeError("Array expected, size parameter");if(s.length!==2)throw new Error("Only two dimensions matrix are supported");if(s=s.map(function(B){if(De(B)&&(B=B.toNumber()),!pe(B)||!de(B)||B<1)throw new Error("Size values must be positive integers");return B}),v){if(De(v)&&(v=v.toNumber()),!pe(v)||!de(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var m=v>0?v:0,o=v<0?-v:0,D=s[0],E=s[1],T=Math.min(D-o,E-m),g;if(me(d)){if(d.length!==T)throw new Error("Invalid value array length");g=function(x){return d[x]}}else if(Ne(d)){var F=d.size();if(F.length!==1||F[0]!==T)throw new Error("Invalid matrix length");g=function(x){return d.get([x])}}else g=function(){return d};p||(p=De(g(0))?g(0).mul(0):0);var N=[];if(s.length>0){N=rt(N,s,p);for(var w=0;w<T;w++)N[w+o][w+m]=g(w)}return new i({data:N,size:[D,E]})},i.fromJSON=function(s){return new i(s)},i.prototype.swapRows=function(s,d){if(!pe(s)||!de(s)||!pe(d)||!de(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ce(s,this._size[0]),ce(d,this._size[0]),i._swapRows(s,d,this._data),this},i._swapRows=function(s,d,v){var p=v[s];v[s]=v[d],v[d]=p};function f(s){return Ne(s)?f(s.valueOf()):me(s)?s.map(f):s}return i},{isClass:!0});function Ce(e,r,i){return e&&typeof e.map=="function"?e.map(function(a){return Ce(a,r)}):r(e)}var rn="isInteger",Pa=["typed"],Ha=G(rn,Pa,e=>{var{typed:r}=e;return r(rn,{number:de,BigNumber:function(a){return a.isInt()},Fraction:function(a){return a.d===1&&isFinite(a.n)},"Array | Matrix":r.referToSelf(i=>a=>Ce(a,i))})}),di="number",ft="number, number";function Di(e){return Math.abs(e)}Di.signature=di;function gi(e,r){return e+r}gi.signature=ft;function Ei(e,r){return e-r}Ei.signature=ft;function yi(e,r){return e*r}yi.signature=ft;function wi(e){return-e}wi.signature=di;function Ni(e,r){return e*e<1&&r===1/0||e*e>1&&r===-1/0?0:Math.pow(e,r)}Ni.signature=ft;function Er(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!de(r)||r<0||r>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(Kn(e,r))}var ka="number";function Ai(e){return e===0}Ai.signature=ka;var tn="isNumeric",qa=["typed"],Ga=G(tn,qa,e=>{var{typed:r}=e;return r(tn,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":r.referToSelf(i=>a=>Ce(a,i))})}),nn="isZero",Va=["typed"],Wa=G(nn,Va,e=>{var{typed:r}=e;return r(nn,{number:Ai,BigNumber:function(a){return a.isZero()},Complex:function(a){return a.re===0&&a.im===0},Fraction:function(a){return a.d===1&&a.n===0},Unit:r.referToSelf(i=>a=>r.find(i,a.valueType())(a.value)),"Array | Matrix":r.referToSelf(i=>a=>Ce(a,i))})});function ur(e,r,i){if(i==null)return e.eq(r);if(e.eq(r))return!0;if(e.isNaN()||r.isNaN())return!1;if(e.isFinite()&&r.isFinite()){var a=e.minus(r).abs();if(a.isZero())return!0;var n=e.constructor.max(e.abs(),r.abs());return a.lte(n.times(i))}return!1}function ja(e,r,i){return Ye(e.re,r.re,i)&&Ye(e.im,r.im,i)}var Ja=G("compareUnits",["typed"],e=>{var{typed:r}=e;return{"Unit, Unit":r.referToSelf(i=>(a,n)=>{if(!a.equalBase(n))throw new Error("Cannot compare units with different base");return r.find(i,[a.valueType(),n.valueType()])(a.value,n.value)})}}),it="equalScalar",Ya=["typed","config"],Za=G(it,Ya,e=>{var{typed:r,config:i}=e,a=Ja({typed:r});return r(it,{"boolean, boolean":function(t,u){return t===u},"number, number":function(t,u){return Ye(t,u,i.epsilon)},"BigNumber, BigNumber":function(t,u){return t.eq(u)||ur(t,u,i.epsilon)},"Fraction, Fraction":function(t,u){return t.equals(u)},"Complex, Complex":function(t,u){return ja(t,u,i.epsilon)}},a)});G(it,["typed","config"],e=>{var{typed:r,config:i}=e;return r(it,{"number, number":function(n,t){return Ye(n,t,i.epsilon)}})});var Xa="SparseMatrix",Ka=["typed","equalScalar","Matrix"],Qa=G(Xa,Ka,e=>{var{typed:r,equalScalar:i,Matrix:a}=e;function n(o,D){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(D&&!ze(D))throw new Error("Invalid datatype: "+D);if(Ne(o))t(this,o,D);else if(o&&me(o.index)&&me(o.ptr)&&me(o.size))this._values=o.values,this._index=o.index,this._ptr=o.ptr,this._size=o.size,this._datatype=D||o.datatype;else if(me(o))u(this,o,D);else{if(o)throw new TypeError("Unsupported type of data ("+Le(o)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=D}}function t(o,D,E){D.type==="SparseMatrix"?(o._values=D._values?fe(D._values):void 0,o._index=fe(D._index),o._ptr=fe(D._ptr),o._size=fe(D._size),o._datatype=E||D._datatype):u(o,D.valueOf(),E||D._datatype)}function u(o,D,E){o._values=[],o._index=[],o._ptr=[],o._datatype=E;var T=D.length,g=0,F=i,N=0;if(ze(E)&&(F=r.find(i,[E,E])||i,N=r.convert(0,E)),T>0){var w=0;do{o._ptr.push(o._index.length);for(var B=0;B<T;B++){var x=D[B];if(me(x)){if(w===0&&g<x.length&&(g=x.length),w<x.length){var S=x[w];F(S,N)||(o._values.push(S),o._index.push(B))}}else w===0&&g<1&&(g=1),F(x,N)||(o._values.push(x),o._index.push(B))}w++}while(w<g)}o._ptr.push(o._index.length),o._size=[T,g]}n.prototype=new a,n.prototype.createSparseMatrix=function(o,D){return new n(o,D)},Object.defineProperty(n,"name",{value:"SparseMatrix"}),n.prototype.constructor=n,n.prototype.type="SparseMatrix",n.prototype.isSparseMatrix=!0,n.prototype.getDataType=function(){return tt(this._values,Le)},n.prototype.storage=function(){return"sparse"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(o,D){return new n(o,D)},n.prototype.density=function(){var o=this._size[0],D=this._size[1];return o!==0&&D!==0?this._index.length/(o*D):0},n.prototype.subset=function(o,D,E){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return h(this,o);case 2:case 3:return c(this,o,D,E);default:throw new SyntaxError("Wrong number of arguments")}};function h(o,D){if(!xr(D))throw new TypeError("Invalid index");var E=D.isScalar();if(E)return o.get(D.min());var T=D.size();if(T.length!==o._size.length)throw new te(T.length,o._size.length);var g,F,N,w,B=D.min(),x=D.max();for(g=0,F=o._size.length;g<F;g++)ce(B[g],o._size[g]),ce(x[g],o._size[g]);var S=o._values,_=o._index,I=o._ptr,L=D.dimension(0),$=D.dimension(1),U=[],j=[];L.forEach(function(A,Y){j[A]=Y[0],U[A]=!0});var q=S?[]:void 0,y=[],H=[];return $.forEach(function(A){for(H.push(y.length),N=I[A],w=I[A+1];N<w;N++)g=_[N],U[g]===!0&&(y.push(j[g]),q&&q.push(S[N]))}),H.push(y.length),new n({values:q,index:y,ptr:H,size:T,datatype:o._datatype})}function c(o,D,E,T){if(!D||D.isIndex!==!0)throw new TypeError("Invalid index");var g=D.size(),F=D.isScalar(),N;if(Ne(E)?(N=E.size(),E=E.toArray()):N=Ie(E),F){if(N.length!==0)throw new TypeError("Scalar expected");o.set(D.min(),E,T)}else{if(g.length!==1&&g.length!==2)throw new te(g.length,o._size.length,"<");if(N.length<g.length){for(var w=0,B=0;g[w]===1&&N[w]===1;)w++;for(;g[w]===1;)B++,w++;E=ii(E,g.length,B,N)}if(!ar(g,N))throw new te(g,N,">");if(g.length===1){var x=D.dimension(0);x.forEach(function(I,L){ce(I),o.set([I,0],E[L[0]],T)})}else{var S=D.dimension(0),_=D.dimension(1);S.forEach(function(I,L){ce(I),_.forEach(function($,U){ce($),o.set([I,$],E[L[0]][U[0]],T)})})}}return o}n.prototype.get=function(o){if(!me(o))throw new TypeError("Array expected");if(o.length!==this._size.length)throw new te(o.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var D=o[0],E=o[1];ce(D,this._size[0]),ce(E,this._size[1]);var T=f(D,this._ptr[E],this._ptr[E+1],this._index);return T<this._ptr[E+1]&&this._index[T]===D?this._values[T]:0},n.prototype.set=function(o,D,E){if(!me(o))throw new TypeError("Array expected");if(o.length!==this._size.length)throw new te(o.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var T=o[0],g=o[1],F=this._size[0],N=this._size[1],w=i,B=0;ze(this._datatype)&&(w=r.find(i,[this._datatype,this._datatype])||i,B=r.convert(0,this._datatype)),(T>F-1||g>N-1)&&(v(this,Math.max(T+1,F),Math.max(g+1,N),E),F=this._size[0],N=this._size[1]),ce(T,F),ce(g,N);var x=f(T,this._ptr[g],this._ptr[g+1],this._index);return x<this._ptr[g+1]&&this._index[x]===T?w(D,B)?s(x,g,this._values,this._index,this._ptr):this._values[x]=D:w(D,B)||d(x,T,g,D,this._values,this._index,this._ptr),this};function f(o,D,E,T){if(E-D===0)return E;for(var g=D;g<E;g++)if(T[g]===o)return g;return D}function s(o,D,E,T,g){E.splice(o,1),T.splice(o,1);for(var F=D+1;F<g.length;F++)g[F]--}function d(o,D,E,T,g,F,N){g.splice(o,0,T),F.splice(o,0,D);for(var w=E+1;w<N.length;w++)N[w]++}n.prototype.resize=function(o,D,E){if(!br(o))throw new TypeError("Array or Matrix expected");var T=o.valueOf().map(F=>Array.isArray(F)&&F.length===1?F[0]:F);if(T.length!==2)throw new Error("Only two dimensions matrix are supported");T.forEach(function(F){if(!pe(F)||!de(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+we(T)+")")});var g=E?this.clone():this;return v(g,T[0],T[1],D)};function v(o,D,E,T){var g=T||0,F=i,N=0;ze(o._datatype)&&(F=r.find(i,[o._datatype,o._datatype])||i,N=r.convert(0,o._datatype),g=r.convert(g,o._datatype));var w=!F(g,N),B=o._size[0],x=o._size[1],S,_,I;if(E>x){for(_=x;_<E;_++)if(o._ptr[_]=o._values.length,w)for(S=0;S<B;S++)o._values.push(g),o._index.push(S);o._ptr[E]=o._values.length}else E<x&&(o._ptr.splice(E+1,x-E),o._values.splice(o._ptr[E],o._values.length),o._index.splice(o._ptr[E],o._index.length));if(x=E,D>B){if(w){var L=0;for(_=0;_<x;_++){o._ptr[_]=o._ptr[_]+L,I=o._ptr[_+1]+L;var $=0;for(S=B;S<D;S++,$++)o._values.splice(I+$,0,g),o._index.splice(I+$,0,S),L++}o._ptr[x]=o._values.length}}else if(D<B){var U=0;for(_=0;_<x;_++){o._ptr[_]=o._ptr[_]-U;var j=o._ptr[_],q=o._ptr[_+1]-U;for(I=j;I<q;I++)S=o._index[I],S>D-1&&(o._values.splice(I,1),o._index.splice(I,1),U++)}o._ptr[_]=o._values.length}return o._size[0]=D,o._size[1]=E,o}n.prototype.reshape=function(o,D){if(!me(o))throw new TypeError("Array expected");if(o.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");o.forEach(function(A){if(!pe(A)||!de(A)||A<=-2||A===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+we(o)+")")});var E=this._size[0]*this._size[1];o=_t(o,E);var T=o[0]*o[1];if(E!==T)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var g=D?this.clone():this;if(this._size[0]===o[0]&&this._size[1]===o[1])return g;for(var F=[],N=0;N<g._ptr.length;N++)for(var w=0;w<g._ptr[N+1]-g._ptr[N];w++)F.push(N);for(var B=g._values.slice(),x=g._index.slice(),S=0;S<g._index.length;S++){var _=x[S],I=F[S],L=_*g._size[1]+I;F[S]=L%o[1],x[S]=Math.floor(L/o[1])}g._values.length=0,g._index.length=0,g._ptr.length=o[1]+1,g._size=o.slice();for(var $=0;$<g._ptr.length;$++)g._ptr[$]=0;for(var U=0;U<B.length;U++){var j=x[U],q=F[U],y=B[U],H=f(j,g._ptr[q],g._ptr[q+1],g._index);d(H,j,q,y,g._values,g._index,g._ptr)}return g},n.prototype.clone=function(){var o=new n({values:this._values?fe(this._values):void 0,index:fe(this._index),ptr:fe(this._ptr),size:fe(this._size),datatype:this._datatype});return o},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(o,D){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var E=this,T=this._size[0],g=this._size[1],F=mi(o),N=function(B,x,S){return F===1?o(B):F===2?o(B,[x,S]):o(B,[x,S],E)};return p(this,0,T-1,0,g-1,N,D)};function p(o,D,E,T,g,F,N){var w=[],B=[],x=[],S=i,_=0;ze(o._datatype)&&(S=r.find(i,[o._datatype,o._datatype])||i,_=r.convert(0,o._datatype));for(var I=function(z,ge,Ee){z=F(z,ge,Ee),S(z,_)||(w.push(z),B.push(ge))},L=T;L<=g;L++){x.push(w.length);var $=o._ptr[L],U=o._ptr[L+1];if(N)for(var j=$;j<U;j++){var q=o._index[j];q>=D&&q<=E&&I(o._values[j],q-D,L-T)}else{for(var y={},H=$;H<U;H++){var A=o._index[H];y[A]=o._values[H]}for(var Y=D;Y<=E;Y++){var ae=Y in y?y[Y]:0;I(ae,Y-D,L-T)}}}return x.push(w.length),new n({values:w,index:B,ptr:x,size:[E-D+1,g-T+1]})}n.prototype.forEach=function(o,D){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var E=this,T=this._size[0],g=this._size[1],F=0;F<g;F++){var N=this._ptr[F],w=this._ptr[F+1];if(D)for(var B=N;B<w;B++){var x=this._index[B];o(this._values[B],[x,F],E)}else{for(var S={},_=N;_<w;_++){var I=this._index[_];S[I]=this._values[_]}for(var L=0;L<T;L++){var $=L in S?S[L]:0;o($,[L,F],E)}}}},n.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var o=this._size[1],D=0;D<o;D++)for(var E=this._ptr[D],T=this._ptr[D+1],g=E;g<T;g++){var F=this._index[g];yield{value:this._values[g],index:[F,D]}}},n.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},n.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(o,D,E,T,g){var F=T[0],N=T[1],w=[],B,x;for(B=0;B<F;B++)for(w[B]=[],x=0;x<N;x++)w[B][x]=0;for(x=0;x<N;x++)for(var S=E[x],_=E[x+1],I=S;I<_;I++)B=D[I],w[B][x]=o?g?fe(o[I]):o[I]:1;return w}return n.prototype.format=function(o){for(var D=this._size[0],E=this._size[1],T=this.density(),g="Sparse Matrix ["+we(D,o)+" x "+we(E,o)+"] density: "+we(T,o)+`
`,F=0;F<E;F++)for(var N=this._ptr[F],w=this._ptr[F+1],B=N;B<w;B++){var x=this._index[B];g+=`
    (`+we(x,o)+", "+we(F,o)+") ==> "+(this._values?we(this._values[B],o):"X")}return g},n.prototype.toString=function(){return we(this.toArray())},n.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(o){if(o){if(De(o)&&(o=o.toNumber()),!pe(o)||!de(o))throw new TypeError("The parameter k must be an integer number")}else o=0;var D=o>0?o:0,E=o<0?-o:0,T=this._size[0],g=this._size[1],F=Math.min(T-E,g-D),N=[],w=[],B=[];B[0]=0;for(var x=D;x<g&&N.length<F;x++)for(var S=this._ptr[x],_=this._ptr[x+1],I=S;I<_;I++){var L=this._index[I];if(L===x-D+E){N.push(this._values[I]),w[N.length-1]=L-E;break}}return B.push(N.length),new n({values:N,index:w,ptr:B,size:[F,1]})},n.fromJSON=function(o){return new n(o)},n.diagonal=function(o,D,E,T,g){if(!me(o))throw new TypeError("Array expected, size parameter");if(o.length!==2)throw new Error("Only two dimensions matrix are supported");if(o=o.map(function(A){if(De(A)&&(A=A.toNumber()),!pe(A)||!de(A)||A<1)throw new Error("Size values must be positive integers");return A}),E){if(De(E)&&(E=E.toNumber()),!pe(E)||!de(E))throw new TypeError("The parameter k must be an integer number")}else E=0;var F=i,N=0;ze(g)&&(F=r.find(i,[g,g])||i,N=r.convert(0,g));var w=E>0?E:0,B=E<0?-E:0,x=o[0],S=o[1],_=Math.min(x-B,S-w),I;if(me(D)){if(D.length!==_)throw new Error("Invalid value array length");I=function(Y){return D[Y]}}else if(Ne(D)){var L=D.size();if(L.length!==1||L[0]!==_)throw new Error("Invalid matrix length");I=function(Y){return D.get([Y])}}else I=function(){return D};for(var $=[],U=[],j=[],q=0;q<S;q++){j.push($.length);var y=q-w;if(y>=0&&y<_){var H=I(y);F(H,N)||(U.push(y+B),$.push(H))}}return j.push($.length),new n({values:$,index:U,ptr:j,size:[x,S]})},n.prototype.swapRows=function(o,D){if(!pe(o)||!de(o)||!pe(D)||!de(D))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ce(o,this._size[0]),ce(D,this._size[0]),n._swapRows(o,D,this._size[1],this._values,this._index,this._ptr),this},n._forEachRow=function(o,D,E,T,g){for(var F=T[o],N=T[o+1],w=F;w<N;w++)g(E[w],D[w])},n._swapRows=function(o,D,E,T,g,F){for(var N=0;N<E;N++){var w=F[N],B=F[N+1],x=f(o,w,B,g),S=f(D,w,B,g);if(x<B&&S<B&&g[x]===o&&g[S]===D){if(T){var _=T[x];T[x]=T[S],T[S]=_}continue}if(x<B&&g[x]===o&&(S>=B||g[S]!==D)){var I=T?T[x]:void 0;g.splice(S,0,D),T&&T.splice(S,0,I),g.splice(S<=x?x+1:x,1),T&&T.splice(S<=x?x+1:x,1);continue}if(S<B&&g[S]===D&&(x>=B||g[x]!==o)){var L=T?T[S]:void 0;g.splice(x,0,o),T&&T.splice(x,0,L),g.splice(x<=S?S+1:S,1),T&&T.splice(x<=S?S+1:S,1)}}},n},{isClass:!0}),eu="number",ru=["typed"];function tu(e){var r=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(r){var i={"0b":2,"0o":8,"0x":16}[r[1]],a=r[2],n=r[3];return{input:e,radix:i,integerPart:a,fractionalPart:n}}else return null}function nu(e){for(var r=parseInt(e.integerPart,e.radix),i=0,a=0;a<e.fractionalPart.length;a++){var n=parseInt(e.fractionalPart[a],e.radix);i+=n/Math.pow(e.radix,a+1)}var t=r+i;if(isNaN(t))throw new SyntaxError('String "'+e.input+'" is not a valid number');return t}var iu=G(eu,ru,e=>{var{typed:r}=e,i=r("number",{"":function(){return 0},number:function(n){return n},string:function(n){if(n==="NaN")return NaN;var t=tu(n);if(t)return nu(t);var u=0,h=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);h&&(u=Number(h[2]),n=h[1]);var c=Number(n);if(isNaN(c))throw new SyntaxError('String "'+n+'" is not a valid number');if(h){if(c>2**u-1)throw new SyntaxError('String "'.concat(n,'" is out of range'));c>=2**(u-1)&&(c=c-2**u)}return c},BigNumber:function(n){return n.toNumber()},Fraction:function(n){return n.valueOf()},Unit:r.referToSelf(a=>n=>{var t=n.clone();return t.value=a(n.value),t}),null:function(n){return 0},"Unit, string | Unit":function(n,t){return n.toNumber(t)},"Array | Matrix":r.referToSelf(a=>n=>Ce(n,a))});return i.fromJSON=function(a){return parseFloat(a.value)},i}),au="bignumber",uu=["typed","BigNumber"],ou=G(au,uu,e=>{var{typed:r,BigNumber:i}=e;return r("bignumber",{"":function(){return new i(0)},number:function(n){return new i(n+"")},string:function(n){var t=n.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var u=t[2],h=i(t[1]),c=new i(2).pow(Number(u));if(h.gt(c.sub(1)))throw new SyntaxError('String "'.concat(n,'" is out of range'));var f=new i(2).pow(Number(u)-1);return h.gte(f)?h.sub(c):h}return new i(n)},BigNumber:function(n){return n},Unit:r.referToSelf(a=>n=>{var t=n.clone();return t.value=a(n.value),t}),Fraction:function(n){return new i(n.n).div(n.d).times(n.s)},null:function(n){return new i(0)},"Array | Matrix":r.referToSelf(a=>n=>Ce(n,a))})}),su="fraction",fu=["typed","Fraction"],lu=G(su,fu,e=>{var{typed:r,Fraction:i}=e;return r("fraction",{number:function(n){if(!isFinite(n)||isNaN(n))throw new Error(n+" cannot be represented as a fraction");return new i(n)},string:function(n){return new i(n)},"number, number":function(n,t){return new i(n,t)},null:function(n){return new i(0)},BigNumber:function(n){return new i(n.toString())},Fraction:function(n){return n},Unit:r.referToSelf(a=>n=>{var t=n.clone();return t.value=a(n.value),t}),Object:function(n){return new i(n)},"Array | Matrix":r.referToSelf(a=>n=>Ce(n,a))})}),an="matrix",cu=["typed","Matrix","DenseMatrix","SparseMatrix"],pu=G(an,cu,e=>{var{typed:r,Matrix:i,DenseMatrix:a,SparseMatrix:n}=e;return r(an,{"":function(){return t([])},string:function(h){return t([],h)},"string, string":function(h,c){return t([],h,c)},Array:function(h){return t(h)},Matrix:function(h){return t(h,h.storage())},"Array | Matrix, string":t,"Array | Matrix, string, string":t});function t(u,h,c){if(h==="dense"||h==="default"||h===void 0)return new a(u,c);if(h==="sparse")return new n(u,c);throw new TypeError("Unknown matrix type "+JSON.stringify(h)+".")}}),un="unaryMinus",vu=["typed"],hu=G(un,vu,e=>{var{typed:r}=e;return r(un,{number:wi,"Complex | BigNumber | Fraction":i=>i.neg(),Unit:r.referToSelf(i=>a=>{var n=a.clone();return n.value=r.find(i,n.valueType())(a.value),n}),"Array | Matrix":r.referToSelf(i=>a=>Ce(a,i))})}),on="abs",mu=["typed"],du=G(on,mu,e=>{var{typed:r}=e;return r(on,{number:Di,"Complex | BigNumber | Fraction | Unit":i=>i.abs(),"Array | Matrix":r.referToSelf(i=>a=>Ce(a,i))})}),sn="addScalar",Du=["typed"],gu=G(sn,Du,e=>{var{typed:r}=e;return r(sn,{"number, number":gi,"Complex, Complex":function(a,n){return a.add(n)},"BigNumber, BigNumber":function(a,n){return a.plus(n)},"Fraction, Fraction":function(a,n){return a.add(n)},"Unit, Unit":r.referToSelf(i=>(a,n)=>{if(a.value===null||a.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!a.equalBase(n))throw new Error("Units do not match");var t=a.clone();return t.value=r.find(i,[t.valueType(),n.valueType()])(t.value,n.value),t.fixPrefix=!1,t})})}),fn="subtractScalar",Eu=["typed"],yu=G(fn,Eu,e=>{var{typed:r}=e;return r(fn,{"number, number":Ei,"Complex, Complex":function(a,n){return a.sub(n)},"BigNumber, BigNumber":function(a,n){return a.minus(n)},"Fraction, Fraction":function(a,n){return a.sub(n)},"Unit, Unit":r.referToSelf(i=>(a,n)=>{if(a.value===null||a.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(n.value===null||n.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!a.equalBase(n))throw new Error("Units do not match");var t=a.clone();return t.value=r.find(i,[t.valueType(),n.valueType()])(t.value,n.value),t.fixPrefix=!1,t})})}),wu="matAlgo11xS0s",Nu=["typed","equalScalar"],lt=G(wu,Nu,e=>{var{typed:r,equalScalar:i}=e;return function(n,t,u,h){var c=n._values,f=n._index,s=n._ptr,d=n._size,v=n._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=d[0],m=d[1],o,D=i,E=0,T=u;typeof v=="string"&&(o=v,D=r.find(i,[o,o]),E=r.convert(0,o),t=r.convert(t,o),T=r.find(u,[o,o]));for(var g=[],F=[],N=[],w=0;w<m;w++){N[w]=F.length;for(var B=s[w],x=s[w+1],S=B;S<x;S++){var _=f[S],I=h?T(t,c[S]):T(c[S],t);D(I,E)||(F.push(_),g.push(I))}}return N[m]=F.length,n.createSparseMatrix({values:g,index:F,ptr:N,size:[p,m],datatype:o})}}),Au="matAlgo12xSfs",bu=["typed","DenseMatrix"],Mr=G(Au,bu,e=>{var{typed:r,DenseMatrix:i}=e;return function(n,t,u,h){var c=n._values,f=n._index,s=n._ptr,d=n._size,v=n._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=d[0],m=d[1],o,D=u;typeof v=="string"&&(o=v,t=r.convert(t,o),D=r.find(u,[o,o]));for(var E=[],T=[],g=[],F=0;F<m;F++){for(var N=F+1,w=s[F],B=s[F+1],x=w;x<B;x++){var S=f[x];T[S]=c[x],g[S]=N}for(var _=0;_<p;_++)F===0&&(E[_]=[]),g[_]===N?E[_][F]=h?D(t,T[_]):D(T[_],t):E[_][F]=h?D(t,0):D(0,t)}return new i({data:E,size:[p,m],datatype:o})}}),Cu="matAlgo14xDs",Fu=["typed"],mr=G(Cu,Fu,e=>{var{typed:r}=e;return function(n,t,u,h){var c=n._data,f=n._size,s=n._datatype,d,v=u;typeof s=="string"&&(d=s,t=r.convert(t,d),v=r.find(u,[d,d]));var p=f.length>0?i(v,0,f,f[0],c,t,h):[];return n.createDenseMatrix({data:p,size:fe(f),datatype:d})};function i(a,n,t,u,h,c,f){var s=[];if(n===t.length-1)for(var d=0;d<u;d++)s[d]=f?a(c,h[d]):a(h[d],c);else for(var v=0;v<u;v++)s[v]=i(a,n+1,t,t[n+1],h[v],c,f);return s}}),Ct="ceil",xu=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Su=G(Ct,["typed","config","round"],e=>{var{typed:r,config:i,round:a}=e;return r(Ct,{number:function(t){return Ye(t,a(t),i.epsilon)?a(t):Math.ceil(t)},"number, number":function(t,u){if(Ye(t,a(t,u),i.epsilon))return a(t,u);var[h,c]="".concat(t,"e").split("e"),f=Math.ceil(Number("".concat(h,"e").concat(Number(c)+u)));return[h,c]="".concat(f,"e").split("e"),Number("".concat(h,"e").concat(Number(c)-u))}})}),Ou=G(Ct,xu,e=>{var{typed:r,config:i,round:a,matrix:n,equalScalar:t,zeros:u,DenseMatrix:h}=e,c=lt({typed:r,equalScalar:t}),f=Mr({typed:r,DenseMatrix:h}),s=mr({typed:r}),d=Su({typed:r,config:i,round:a});return r("ceil",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,m){return p.ceil(m)},"Complex, BigNumber":function(p,m){return p.ceil(m.toNumber())},BigNumber:function(p){return ur(p,a(p),i.epsilon)?a(p):p.ceil()},"BigNumber, BigNumber":function(p,m){return ur(p,a(p,m),i.epsilon)?a(p,m):p.toDecimalPlaces(m.toNumber(),Qr.ROUND_CEIL)},Fraction:function(p){return p.ceil()},"Fraction, number":function(p,m){return p.ceil(m)},"Fraction, BigNumber":function(p,m){return p.ceil(m.toNumber())},"Array | Matrix":r.referToSelf(v=>p=>Ce(p,v)),"Array, number | BigNumber":r.referToSelf(v=>(p,m)=>Ce(p,o=>v(o,m))),"SparseMatrix, number | BigNumber":r.referToSelf(v=>(p,m)=>c(p,m,v,!1)),"DenseMatrix, number | BigNumber":r.referToSelf(v=>(p,m)=>s(p,m,v,!1)),"number | Complex | Fraction | BigNumber, Array":r.referToSelf(v=>(p,m)=>s(n(m),p,v,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":r.referToSelf(v=>(p,m)=>t(p,0)?u(m.size(),m.storage()):m.storage()==="dense"?s(m,p,v,!0):f(m,p,v,!0))})}),Ft="fix",Tu=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],Bu=G(Ft,["typed","ceil","floor"],e=>{var{typed:r,ceil:i,floor:a}=e;return r(Ft,{number:function(t){return t>0?a(t):i(t)},"number, number":function(t,u){return t>0?a(t,u):i(t,u)}})}),_u=G(Ft,Tu,e=>{var{typed:r,Complex:i,matrix:a,ceil:n,floor:t,equalScalar:u,zeros:h,DenseMatrix:c}=e,f=Mr({typed:r,DenseMatrix:c}),s=mr({typed:r}),d=Bu({typed:r,ceil:n,floor:t});return r("fix",{number:d.signatures.number,"number, number | BigNumber":d.signatures["number,number"],Complex:function(p){return new i(p.re>0?Math.floor(p.re):Math.ceil(p.re),p.im>0?Math.floor(p.im):Math.ceil(p.im))},"Complex, number":function(p,m){return new i(p.re>0?t(p.re,m):n(p.re,m),p.im>0?t(p.im,m):n(p.im,m))},"Complex, BigNumber":function(p,m){var o=m.toNumber();return new i(p.re>0?t(p.re,o):n(p.re,o),p.im>0?t(p.im,o):n(p.im,o))},BigNumber:function(p){return p.isNegative()?n(p):t(p)},"BigNumber, number | BigNumber":function(p,m){return p.isNegative()?n(p,m):t(p,m)},Fraction:function(p){return p.s<0?p.ceil():p.floor()},"Fraction, number | BigNumber":function(p,m){return p.s<0?n(p,m):t(p,m)},"Array | Matrix":r.referToSelf(v=>p=>Ce(p,v)),"Array | Matrix, number | BigNumber":r.referToSelf(v=>(p,m)=>Ce(p,o=>v(o,m))),"number | Complex | Fraction | BigNumber, Array":r.referToSelf(v=>(p,m)=>s(a(m),p,v,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":r.referToSelf(v=>(p,m)=>u(p,0)?h(m.size(),m.storage()):m.storage()==="dense"?s(m,p,v,!0):f(m,p,v,!0))})}),xt="floor",Mu=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Ru=G(xt,["typed","config","round"],e=>{var{typed:r,config:i,round:a}=e;return r(xt,{number:function(t){return Ye(t,a(t),i.epsilon)?a(t):Math.floor(t)},"number, number":function(t,u){if(Ye(t,a(t,u),i.epsilon))return a(t,u);var[h,c]="".concat(t,"e").split("e"),f=Math.floor(Number("".concat(h,"e").concat(Number(c)+u)));return[h,c]="".concat(f,"e").split("e"),Number("".concat(h,"e").concat(Number(c)-u))}})}),Iu=G(xt,Mu,e=>{var{typed:r,config:i,round:a,matrix:n,equalScalar:t,zeros:u,DenseMatrix:h}=e,c=lt({typed:r,equalScalar:t}),f=Mr({typed:r,DenseMatrix:h}),s=mr({typed:r}),d=Ru({typed:r,config:i,round:a});return r("floor",{number:d.signatures.number,"number,number":d.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,m){return p.floor(m)},"Complex, BigNumber":function(p,m){return p.floor(m.toNumber())},BigNumber:function(p){return ur(p,a(p),i.epsilon)?a(p):p.floor()},"BigNumber, BigNumber":function(p,m){return ur(p,a(p,m),i.epsilon)?a(p,m):p.toDecimalPlaces(m.toNumber(),Qr.ROUND_FLOOR)},Fraction:function(p){return p.floor()},"Fraction, number":function(p,m){return p.floor(m)},"Fraction, BigNumber":function(p,m){return p.floor(m.toNumber())},"Array | Matrix":r.referToSelf(v=>p=>Ce(p,v)),"Array, number | BigNumber":r.referToSelf(v=>(p,m)=>Ce(p,o=>v(o,m))),"SparseMatrix, number | BigNumber":r.referToSelf(v=>(p,m)=>c(p,m,v,!1)),"DenseMatrix, number | BigNumber":r.referToSelf(v=>(p,m)=>s(p,m,v,!1)),"number | Complex | Fraction | BigNumber, Array":r.referToSelf(v=>(p,m)=>s(n(m),p,v,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":r.referToSelf(v=>(p,m)=>t(p,0)?u(m.size(),m.storage()):m.storage()==="dense"?s(m,p,v,!0):f(m,p,v,!0))})}),$u="matAlgo03xDSf",Lu=["typed"],Uu=G($u,Lu,e=>{var{typed:r}=e;return function(a,n,t,u){var h=a._data,c=a._size,f=a._datatype||a.getDataType(),s=n._values,d=n._index,v=n._ptr,p=n._size,m=n._datatype||n._data===void 0?n._datatype:n.getDataType();if(c.length!==p.length)throw new te(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var o=c[0],D=c[1],E,T=0,g=t;typeof f=="string"&&f===m&&f!=="mixed"&&(E=f,T=r.convert(0,E),g=r.find(t,[E,E]));for(var F=[],N=0;N<o;N++)F[N]=[];for(var w=[],B=[],x=0;x<D;x++){for(var S=x+1,_=v[x],I=v[x+1],L=_;L<I;L++){var $=d[L];w[$]=u?g(s[L],h[$][x]):g(h[$][x],s[L]),B[$]=S}for(var U=0;U<o;U++)B[U]===S?F[U][x]=w[U]:F[U][x]=u?g(T,h[U][x]):g(h[U][x],T)}return a.createDenseMatrix({data:F,size:[o,D],datatype:f===a._datatype&&m===n._datatype?E:void 0})}}),zu="matAlgo13xDD",Pu=["typed"],Hu=G(zu,Pu,e=>{var{typed:r}=e;return function(n,t,u){var h=n._data,c=n._size,f=n._datatype,s=t._data,d=t._size,v=t._datatype,p=[];if(c.length!==d.length)throw new te(c.length,d.length);for(var m=0;m<c.length;m++){if(c[m]!==d[m])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+d+")");p[m]=c[m]}var o,D=u;typeof f=="string"&&f===v&&(o=f,D=r.find(u,[o,o]));var E=p.length>0?i(D,0,p,p[0],h,s):[];return n.createDenseMatrix({data:E,size:p,datatype:o})};function i(a,n,t,u,h,c){var f=[];if(n===t.length-1)for(var s=0;s<u;s++)f[s]=a(h[s],c[s]);else for(var d=0;d<u;d++)f[d]=i(a,n+1,t,t[n+1],h[d],c[d]);return f}}),ku="broadcast",qu=["concat"],Gu=G(ku,qu,e=>{var{concat:r}=e;return function(n,t){var u=Math.max(n._size.length,t._size.length);if(n._size.length===t._size.length&&n._size.every((m,o)=>m===t._size[o]))return[n,t];for(var h=i(n._size,u,0),c=i(t._size,u,0),f=[],s=0;s<u;s++)f[s]=Math.max(h[s],c[s]);nt(h,f),nt(c,f);var d=n.clone(),v=t.clone();d._size.length<u?d.reshape(i(d._size,u,1)):v._size.length<u&&v.reshape(i(v._size,u,1));for(var p=0;p<u;p++)d._size[p]<f[p]&&(d=a(d,f[p],p)),v._size[p]<f[p]&&(v=a(v,f[p],p));return[d,v]};function i(n,t,u){return[...Array(t-n.length).fill(u),...n]}function a(n,t,u){return r(...Array(t).fill(n),u)}}),Vu="matrixAlgorithmSuite",Wu=["typed","matrix","concat"],bi=G(Vu,Wu,e=>{var{typed:r,matrix:i,concat:a}=e,n=Hu({typed:r}),t=mr({typed:r}),u=Gu({concat:a});return function(c){var f=c.elop,s=c.SD||c.DS,d;f?(d={"DenseMatrix, DenseMatrix":(o,D)=>n(...u(o,D),f),"Array, Array":(o,D)=>n(...u(i(o),i(D)),f).valueOf(),"Array, DenseMatrix":(o,D)=>n(...u(i(o),D),f),"DenseMatrix, Array":(o,D)=>n(...u(o,i(D)),f)},c.SS&&(d["SparseMatrix, SparseMatrix"]=(o,D)=>c.SS(...u(o,D),f,!1)),c.DS&&(d["DenseMatrix, SparseMatrix"]=(o,D)=>c.DS(...u(o,D),f,!1),d["Array, SparseMatrix"]=(o,D)=>c.DS(...u(i(o),D),f,!1)),s&&(d["SparseMatrix, DenseMatrix"]=(o,D)=>s(...u(D,o),f,!0),d["SparseMatrix, Array"]=(o,D)=>s(...u(i(D),o),f,!0))):(d={"DenseMatrix, DenseMatrix":r.referToSelf(o=>(D,E)=>n(...u(D,E),o)),"Array, Array":r.referToSelf(o=>(D,E)=>n(...u(i(D),i(E)),o).valueOf()),"Array, DenseMatrix":r.referToSelf(o=>(D,E)=>n(...u(i(D),E),o)),"DenseMatrix, Array":r.referToSelf(o=>(D,E)=>n(...u(D,i(E)),o))},c.SS&&(d["SparseMatrix, SparseMatrix"]=r.referToSelf(o=>(D,E)=>c.SS(...u(D,E),o,!1))),c.DS&&(d["DenseMatrix, SparseMatrix"]=r.referToSelf(o=>(D,E)=>c.DS(...u(D,E),o,!1)),d["Array, SparseMatrix"]=r.referToSelf(o=>(D,E)=>c.DS(...u(i(D),E),o,!1))),s&&(d["SparseMatrix, DenseMatrix"]=r.referToSelf(o=>(D,E)=>s(...u(E,D),o,!0)),d["SparseMatrix, Array"]=r.referToSelf(o=>(D,E)=>s(...u(i(E),D),o,!0))));var v=c.scalar||"any",p=c.Ds||c.Ss;p&&(f?(d["DenseMatrix,"+v]=(o,D)=>t(o,D,f,!1),d[v+", DenseMatrix"]=(o,D)=>t(D,o,f,!0),d["Array,"+v]=(o,D)=>t(i(o),D,f,!1).valueOf(),d[v+", Array"]=(o,D)=>t(i(D),o,f,!0).valueOf()):(d["DenseMatrix,"+v]=r.referToSelf(o=>(D,E)=>t(D,E,o,!1)),d[v+", DenseMatrix"]=r.referToSelf(o=>(D,E)=>t(E,D,o,!0)),d["Array,"+v]=r.referToSelf(o=>(D,E)=>t(i(D),E,o,!1).valueOf()),d[v+", Array"]=r.referToSelf(o=>(D,E)=>t(i(E),D,o,!0).valueOf())));var m=c.sS!==void 0?c.sS:c.Ss;return f?(c.Ss&&(d["SparseMatrix,"+v]=(o,D)=>c.Ss(o,D,f,!1)),m&&(d[v+", SparseMatrix"]=(o,D)=>m(D,o,f,!0))):(c.Ss&&(d["SparseMatrix,"+v]=r.referToSelf(o=>(D,E)=>c.Ss(D,E,o,!1))),m&&(d[v+", SparseMatrix"]=r.referToSelf(o=>(D,E)=>m(E,D,o,!0)))),f&&f.signatures&&qi(d,f.signatures),d}}),ju="matAlgo01xDSid",Ju=["typed"],Yu=G(ju,Ju,e=>{var{typed:r}=e;return function(a,n,t,u){var h=a._data,c=a._size,f=a._datatype||a.getDataType(),s=n._values,d=n._index,v=n._ptr,p=n._size,m=n._datatype||n._data===void 0?n._datatype:n.getDataType();if(c.length!==p.length)throw new te(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var o=c[0],D=c[1],E=typeof f=="string"&&f!=="mixed"&&f===m?f:void 0,T=E?r.find(t,[E,E]):t,g,F,N=[];for(g=0;g<o;g++)N[g]=[];var w=[],B=[];for(F=0;F<D;F++){for(var x=F+1,S=v[F],_=v[F+1],I=S;I<_;I++)g=d[I],w[g]=u?T(s[I],h[g][F]):T(h[g][F],s[I]),B[g]=x;for(g=0;g<o;g++)B[g]===x?N[g][F]=w[g]:N[g][F]=h[g][F]}return a.createDenseMatrix({data:N,size:[o,D],datatype:f===a._datatype&&m===n._datatype?E:void 0})}}),Zu="matAlgo04xSidSid",Xu=["typed","equalScalar"],Ku=G(Zu,Xu,e=>{var{typed:r,equalScalar:i}=e;return function(n,t,u){var h=n._values,c=n._index,f=n._ptr,s=n._size,d=n._datatype||n._data===void 0?n._datatype:n.getDataType(),v=t._values,p=t._index,m=t._ptr,o=t._size,D=t._datatype||t._data===void 0?t._datatype:t.getDataType();if(s.length!==o.length)throw new te(s.length,o.length);if(s[0]!==o[0]||s[1]!==o[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+o+")");var E=s[0],T=s[1],g,F=i,N=0,w=u;typeof d=="string"&&d===D&&d!=="mixed"&&(g=d,F=r.find(i,[g,g]),N=r.convert(0,g),w=r.find(u,[g,g]));var B=h&&v?[]:void 0,x=[],S=[],_=h&&v?[]:void 0,I=h&&v?[]:void 0,L=[],$=[],U,j,q,y,H;for(j=0;j<T;j++){S[j]=x.length;var A=j+1;for(y=f[j],H=f[j+1],q=y;q<H;q++)U=c[q],x.push(U),L[U]=A,_&&(_[U]=h[q]);for(y=m[j],H=m[j+1],q=y;q<H;q++)if(U=p[q],L[U]===A){if(_){var Y=w(_[U],v[q]);F(Y,N)?L[U]=null:_[U]=Y}}else x.push(U),$[U]=A,I&&(I[U]=v[q]);if(_&&I)for(q=S[j];q<x.length;)U=x[q],L[U]===A?(B[q]=_[U],q++):$[U]===A?(B[q]=I[U],q++):x.splice(q,1)}return S[T]=x.length,n.createSparseMatrix({values:B,index:x,ptr:S,size:[E,T],datatype:d===n._datatype&&D===t._datatype?g:void 0})}}),Qu="matAlgo10xSids",eo=["typed","DenseMatrix"],ro=G(Qu,eo,e=>{var{typed:r,DenseMatrix:i}=e;return function(n,t,u,h){var c=n._values,f=n._index,s=n._ptr,d=n._size,v=n._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var p=d[0],m=d[1],o,D=u;typeof v=="string"&&(o=v,t=r.convert(t,o),D=r.find(u,[o,o]));for(var E=[],T=[],g=[],F=0;F<m;F++){for(var N=F+1,w=s[F],B=s[F+1],x=w;x<B;x++){var S=f[x];T[S]=c[x],g[S]=N}for(var _=0;_<p;_++)F===0&&(E[_]=[]),g[_]===N?E[_][F]=h?D(t,T[_]):D(T[_],t):E[_][F]=t}return new i({data:E,size:[p,m],datatype:o})}});function or(e,r,i,a){if(!(this instanceof or))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=r,this.min=i,this.max=a,this.message="Wrong number of arguments in function "+e+" ("+r+" provided, "+i+(a!=null?"-"+a:"")+" expected)",this.stack=new Error().stack}or.prototype=new Error;or.prototype.constructor=Error;or.prototype.name="ArgumentsError";or.prototype.isArgumentsError=!0;var to="multiplyScalar",no=["typed"],io=G(to,no,e=>{var{typed:r}=e;return r("multiplyScalar",{"number, number":yi,"Complex, Complex":function(a,n){return a.mul(n)},"BigNumber, BigNumber":function(a,n){return a.times(n)},"Fraction, Fraction":function(a,n){return a.mul(n)},"number | Fraction | BigNumber | Complex, Unit":(i,a)=>a.multiply(i),"Unit, number | Fraction | BigNumber | Complex | Unit":(i,a)=>i.multiply(a)})}),ln="multiply",ao=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],uo=G(ln,ao,e=>{var{typed:r,matrix:i,addScalar:a,multiplyScalar:n,equalScalar:t,dot:u}=e,h=lt({typed:r,equalScalar:t}),c=mr({typed:r});function f(N,w){switch(N.length){case 1:switch(w.length){case 1:if(N[0]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(N[0]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+N[0]+") must match Matrix rows ("+w[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+w.length+" dimensions)")}break;case 2:switch(w.length){case 1:if(N[1]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+N[1]+") must match Vector length ("+w[0]+")");break;case 2:if(N[1]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+N[1]+") must match Matrix B rows ("+w[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+w.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+N.length+" dimensions)")}}function s(N,w,B){if(B===0)throw new Error("Cannot multiply two empty vectors");return u(N,w)}function d(N,w){if(w.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return v(N,w)}function v(N,w){var B=N._data,x=N._size,S=N._datatype||N.getDataType(),_=w._data,I=w._size,L=w._datatype||w.getDataType(),$=x[0],U=I[1],j,q=a,y=n;S&&L&&S===L&&typeof S=="string"&&S!=="mixed"&&(j=S,q=r.find(a,[j,j]),y=r.find(n,[j,j]));for(var H=[],A=0;A<U;A++){for(var Y=y(B[0],_[0][A]),ae=1;ae<$;ae++)Y=q(Y,y(B[ae],_[ae][A]));H[A]=Y}return N.createDenseMatrix({data:H,size:[U],datatype:S===N._datatype&&L===w._datatype?j:void 0})}var p=r("_multiplyMatrixVector",{"DenseMatrix, any":o,"SparseMatrix, any":T}),m=r("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":D,"DenseMatrix, SparseMatrix":E,"SparseMatrix, DenseMatrix":g,"SparseMatrix, SparseMatrix":F});function o(N,w){var B=N._data,x=N._size,S=N._datatype||N.getDataType(),_=w._data,I=w._datatype||w.getDataType(),L=x[0],$=x[1],U,j=a,q=n;S&&I&&S===I&&typeof S=="string"&&S!=="mixed"&&(U=S,j=r.find(a,[U,U]),q=r.find(n,[U,U]));for(var y=[],H=0;H<L;H++){for(var A=B[H],Y=q(A[0],_[0]),ae=1;ae<$;ae++)Y=j(Y,q(A[ae],_[ae]));y[H]=Y}return N.createDenseMatrix({data:y,size:[L],datatype:S===N._datatype&&I===w._datatype?U:void 0})}function D(N,w){var B=N._data,x=N._size,S=N._datatype||N.getDataType(),_=w._data,I=w._size,L=w._datatype||w.getDataType(),$=x[0],U=x[1],j=I[1],q,y=a,H=n;S&&L&&S===L&&typeof S=="string"&&S!=="mixed"&&S!=="mixed"&&(q=S,y=r.find(a,[q,q]),H=r.find(n,[q,q]));for(var A=[],Y=0;Y<$;Y++){var ae=B[Y];A[Y]=[];for(var se=0;se<j;se++){for(var z=H(ae[0],_[0][se]),ge=1;ge<U;ge++)z=y(z,H(ae[ge],_[ge][se]));A[Y][se]=z}}return N.createDenseMatrix({data:A,size:[$,j],datatype:S===N._datatype&&L===w._datatype?q:void 0})}function E(N,w){var B=N._data,x=N._size,S=N._datatype||N.getDataType(),_=w._values,I=w._index,L=w._ptr,$=w._size,U=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!_)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var j=x[0],q=$[1],y,H=a,A=n,Y=t,ae=0;S&&U&&S===U&&typeof S=="string"&&S!=="mixed"&&(y=S,H=r.find(a,[y,y]),A=r.find(n,[y,y]),Y=r.find(t,[y,y]),ae=r.convert(0,y));for(var se=[],z=[],ge=[],Ee=w.createSparseMatrix({values:se,index:z,ptr:ge,size:[j,q],datatype:S===N._datatype&&U===w._datatype?y:void 0}),Z=0;Z<q;Z++){ge[Z]=z.length;var re=L[Z],Se=L[Z+1];if(Se>re)for(var ve=0,ue=0;ue<j;ue++){for(var Oe=ue+1,be=void 0,oe=re;oe<Se;oe++){var Fe=I[oe];ve!==Oe?(be=A(B[ue][Fe],_[oe]),ve=Oe):be=H(be,A(B[ue][Fe],_[oe]))}ve===Oe&&!Y(be,ae)&&(z.push(ue),se.push(be))}}return ge[q]=z.length,Ee}function T(N,w){var B=N._values,x=N._index,S=N._ptr,_=N._datatype||N._data===void 0?N._datatype:N.getDataType();if(!B)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=w._data,L=w._datatype||w.getDataType(),$=N._size[0],U=w._size[0],j=[],q=[],y=[],H,A=a,Y=n,ae=t,se=0;_&&L&&_===L&&typeof _=="string"&&_!=="mixed"&&(H=_,A=r.find(a,[H,H]),Y=r.find(n,[H,H]),ae=r.find(t,[H,H]),se=r.convert(0,H));var z=[],ge=[];y[0]=0;for(var Ee=0;Ee<U;Ee++){var Z=I[Ee];if(!ae(Z,se))for(var re=S[Ee],Se=S[Ee+1],ve=re;ve<Se;ve++){var ue=x[ve];ge[ue]?z[ue]=A(z[ue],Y(Z,B[ve])):(ge[ue]=!0,q.push(ue),z[ue]=Y(Z,B[ve]))}}for(var Oe=q.length,be=0;be<Oe;be++){var oe=q[be];j[be]=z[oe]}return y[1]=q.length,N.createSparseMatrix({values:j,index:q,ptr:y,size:[$,1],datatype:_===N._datatype&&L===w._datatype?H:void 0})}function g(N,w){var B=N._values,x=N._index,S=N._ptr,_=N._datatype||N._data===void 0?N._datatype:N.getDataType();if(!B)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=w._data,L=w._datatype||w.getDataType(),$=N._size[0],U=w._size[0],j=w._size[1],q,y=a,H=n,A=t,Y=0;_&&L&&_===L&&typeof _=="string"&&_!=="mixed"&&(q=_,y=r.find(a,[q,q]),H=r.find(n,[q,q]),A=r.find(t,[q,q]),Y=r.convert(0,q));for(var ae=[],se=[],z=[],ge=N.createSparseMatrix({values:ae,index:se,ptr:z,size:[$,j],datatype:_===N._datatype&&L===w._datatype?q:void 0}),Ee=[],Z=[],re=0;re<j;re++){z[re]=se.length;for(var Se=re+1,ve=0;ve<U;ve++){var ue=I[ve][re];if(!A(ue,Y))for(var Oe=S[ve],be=S[ve+1],oe=Oe;oe<be;oe++){var Fe=x[oe];Z[Fe]!==Se?(Z[Fe]=Se,se.push(Fe),Ee[Fe]=H(ue,B[oe])):Ee[Fe]=y(Ee[Fe],H(ue,B[oe]))}}for(var b=z[re],O=se.length,R=b;R<O;R++){var P=se[R];ae[R]=Ee[P]}}return z[j]=se.length,ge}function F(N,w){var B=N._values,x=N._index,S=N._ptr,_=N._datatype||N._data===void 0?N._datatype:N.getDataType(),I=w._values,L=w._index,$=w._ptr,U=w._datatype||w._data===void 0?w._datatype:w.getDataType(),j=N._size[0],q=w._size[1],y=B&&I,H,A=a,Y=n;_&&U&&_===U&&typeof _=="string"&&_!=="mixed"&&(H=_,A=r.find(a,[H,H]),Y=r.find(n,[H,H]));for(var ae=y?[]:void 0,se=[],z=[],ge=N.createSparseMatrix({values:ae,index:se,ptr:z,size:[j,q],datatype:_===N._datatype&&U===w._datatype?H:void 0}),Ee=y?[]:void 0,Z=[],re,Se,ve,ue,Oe,be,oe,Fe,b=0;b<q;b++){z[b]=se.length;var O=b+1;for(Oe=$[b],be=$[b+1],ue=Oe;ue<be;ue++)if(Fe=L[ue],y)for(Se=S[Fe],ve=S[Fe+1],re=Se;re<ve;re++)oe=x[re],Z[oe]!==O?(Z[oe]=O,se.push(oe),Ee[oe]=Y(I[ue],B[re])):Ee[oe]=A(Ee[oe],Y(I[ue],B[re]));else for(Se=S[Fe],ve=S[Fe+1],re=Se;re<ve;re++)oe=x[re],Z[oe]!==O&&(Z[oe]=O,se.push(oe));if(y)for(var R=z[b],P=se.length,V=R;V<P;V++){var W=se[V];ae[V]=Ee[W]}}return z[q]=se.length,ge}return r(ln,n,{"Array, Array":r.referTo("Matrix, Matrix",N=>(w,B)=>{f(Ie(w),Ie(B));var x=N(i(w),i(B));return Ne(x)?x.valueOf():x}),"Matrix, Matrix":function(w,B){var x=w.size(),S=B.size();return f(x,S),x.length===1?S.length===1?s(w,B,x[0]):d(w,B):S.length===1?p(w,B):m(w,B)},"Matrix, Array":r.referTo("Matrix,Matrix",N=>(w,B)=>N(w,i(B))),"Array, Matrix":r.referToSelf(N=>(w,B)=>N(i(w,B.storage()),B)),"SparseMatrix, any":function(w,B){return h(w,B,n,!1)},"DenseMatrix, any":function(w,B){return c(w,B,n,!1)},"any, SparseMatrix":function(w,B){return h(B,w,n,!0)},"any, DenseMatrix":function(w,B){return c(B,w,n,!0)},"Array, any":function(w,B){return c(i(w),B,n,!1).valueOf()},"any, Array":function(w,B){return c(i(B),w,n,!0).valueOf()},"any, any":n,"any, any, ...any":r.referToSelf(N=>(w,B,x)=>{for(var S=N(w,B),_=0;_<x.length;_++)S=N(S,x[_]);return S})})}),oo="matAlgo07xSSf",so=["typed","DenseMatrix"],fo=G(oo,so,e=>{var{typed:r,DenseMatrix:i}=e;return function(t,u,h){var c=t._size,f=t._datatype||t._data===void 0?t._datatype:t.getDataType(),s=u._size,d=u._datatype||u._data===void 0?u._datatype:u.getDataType();if(c.length!==s.length)throw new te(c.length,s.length);if(c[0]!==s[0]||c[1]!==s[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+s+")");var v=c[0],p=c[1],m,o=0,D=h;typeof f=="string"&&f===d&&f!=="mixed"&&(m=f,o=r.convert(0,m),D=r.find(h,[m,m]));var E,T,g=[];for(E=0;E<v;E++)g[E]=[];var F=[],N=[],w=[],B=[];for(T=0;T<p;T++){var x=T+1;for(a(t,T,w,F,x),a(u,T,B,N,x),E=0;E<v;E++){var S=w[E]===x?F[E]:o,_=B[E]===x?N[E]:o;g[E][T]=D(S,_)}}return new i({data:g,size:[v,p],datatype:f===t._datatype&&d===u._datatype?m:void 0})};function a(n,t,u,h,c){for(var f=n._values,s=n._index,d=n._ptr,v=d[t],p=d[t+1];v<p;v++){var m=s[v];u[m]=c,h[m]=f[v]}}}),cn="conj",lo=["typed"],co=G(cn,lo,e=>{var{typed:r}=e;return r(cn,{"number | BigNumber | Fraction":i=>i,Complex:i=>i.conjugate(),"Array | Matrix":r.referToSelf(i=>a=>Ce(a,i))})}),pn="concat",po=["typed","matrix","isInteger"],vo=G(pn,po,e=>{var{typed:r,matrix:i,isInteger:a}=e;return r(pn,{"...Array | Matrix | number | BigNumber":function(t){var u,h=t.length,c=-1,f,s=!1,d=[];for(u=0;u<h;u++){var v=t[u];if(Ne(v)&&(s=!0),pe(v)||De(v)){if(u!==h-1)throw new Error("Dimension must be specified as last argument");if(f=c,c=v.valueOf(),!a(c))throw new TypeError("Integer number expected for dimension");if(c<0||u>0&&c>f)throw new Xe(c,f+1)}else{var p=fe(v).valueOf(),m=Ie(p);if(d[u]=p,f=c,c=m.length-1,u>0&&c!==f)throw new te(f+1,c+1)}}if(d.length===0)throw new SyntaxError("At least one matrix expected");for(var o=d.shift();d.length;)o=si(o,d.shift(),c);return s?i(o):o},"...string":function(t){return t.join("")}})}),vn="identity",ho=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],mo=G(vn,ho,e=>{var{typed:r,config:i,matrix:a,BigNumber:n,DenseMatrix:t,SparseMatrix:u}=e;return r(vn,{"":function(){return i.matrix==="Matrix"?a([]):[]},string:function(s){return a(s)},"number | BigNumber":function(s){return c(s,s,i.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(s,d){return c(s,s,d)},"number | BigNumber, number | BigNumber":function(s,d){return c(s,d,i.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(s,d,v){return c(s,d,v)},Array:function(s){return h(s)},"Array, string":function(s,d){return h(s,d)},Matrix:function(s){return h(s.valueOf(),s.storage())},"Matrix, string":function(s,d){return h(s.valueOf(),d)}});function h(f,s){switch(f.length){case 0:return s?a(s):[];case 1:return c(f[0],f[0],s);case 2:return c(f[0],f[1],s);default:throw new Error("Vector containing two values expected")}}function c(f,s,d){var v=De(f)||De(s)?n:null;if(De(f)&&(f=f.toNumber()),De(s)&&(s=s.toNumber()),!de(f)||f<1)throw new Error("Parameters in function identity must be positive integers");if(!de(s)||s<1)throw new Error("Parameters in function identity must be positive integers");var p=v?new n(1):1,m=v?new v(0):0,o=[f,s];if(d){if(d==="sparse")return u.diagonal(o,p,0,m);if(d==="dense")return t.diagonal(o,p,0,m);throw new TypeError('Unknown matrix type "'.concat(d,'"'))}for(var D=rt([],o,m),E=f<s?f:s,T=0;T<E;T++)D[T][T]=p;return D}});function Do(){throw new Error('No "bignumber" implementation available')}function go(){throw new Error('No "fraction" implementation available')}function Eo(){throw new Error('No "matrix" implementation available')}var hn="size",yo=["typed","config","?matrix"],wo=G(hn,yo,e=>{var{typed:r,config:i,matrix:a}=e;return r(hn,{Matrix:function(t){return t.create(t.size())},Array:Ie,string:function(t){return i.matrix==="Array"?[t.length]:a([t.length])},"number | Complex | BigNumber | Unit | boolean | null":function(t){return i.matrix==="Array"?[]:a?a([]):Eo()}})}),mn="subset",No=["typed","matrix","zeros","add"],Ao=G(mn,No,e=>{var{typed:r,matrix:i,zeros:a,add:n}=e;return r(mn,{"Matrix, Index":function(h,c){return hr(c)?i():(et(h,c),h.subset(c))},"Array, Index":r.referTo("Matrix, Index",function(u){return function(h,c){var f=u(i(h),c);return c.isScalar()?f:f.valueOf()}}),"Object, Index":Co,"string, Index":bo,"Matrix, Index, any, any":function(h,c,f,s){return hr(c)?h:(et(h,c),h.clone().subset(c,t(f,c),s))},"Array, Index, any, any":r.referTo("Matrix, Index, any, any",function(u){return function(h,c,f,s){var d=u(i(h),c,f,s);return d.isMatrix?d.valueOf():d}}),"Array, Index, any":r.referTo("Matrix, Index, any, any",function(u){return function(h,c,f){return u(i(h),c,f,void 0).valueOf()}}),"Matrix, Index, any":r.referTo("Matrix, Index, any, any",function(u){return function(h,c,f){return u(h,c,f,void 0)}}),"string, Index, string":dn,"string, Index, string, string":dn,"Object, Index, any":Fo});function t(u,h){if(typeof u=="string")throw new Error("can't boradcast a string");if(h._isScalar)return u;var c=h.size();if(c.every(f=>f>0))try{return n(u,a(c))}catch{return u}else return u}});function bo(e,r){if(!xr(r))throw new TypeError("Index expected");if(hr(r))return"";if(et(Array.from(e),r),r.size().length!==1)throw new te(r.size().length,1);var i=e.length;ce(r.min()[0],i),ce(r.max()[0],i);var a=r.dimension(0),n="";return a.forEach(function(t){n+=e.charAt(t)}),n}function dn(e,r,i,a){if(!r||r.isIndex!==!0)throw new TypeError("Index expected");if(hr(r))return e;if(et(Array.from(e),r),r.size().length!==1)throw new te(r.size().length,1);if(a!==void 0){if(typeof a!="string"||a.length!==1)throw new TypeError("Single character expected as defaultValue")}else a=" ";var n=r.dimension(0),t=n.size()[0];if(t!==i.length)throw new te(n.size()[0],i.length);var u=e.length;ce(r.min()[0]),ce(r.max()[0]);for(var h=[],c=0;c<u;c++)h[c]=e.charAt(c);if(n.forEach(function(d,v){h[d]=i.charAt(v[0])}),h.length>u)for(var f=u-1,s=h.length;f<s;f++)h[f]||(h[f]=a);return h.join("")}function Co(e,r){if(!hr(r)){if(r.size().length!==1)throw new te(r.size(),1);var i=r.dimension(0);if(typeof i!="string")throw new TypeError("String expected as index to retrieve an object property");return Ue(e,i)}}function Fo(e,r,i){if(hr(r))return e;if(r.size().length!==1)throw new te(r.size(),1);var a=r.dimension(0);if(typeof a!="string")throw new TypeError("String expected as index to retrieve an object property");var n=fe(e);return Fr(n,a,i),n}var Dn="zeros",xo=["typed","config","matrix","BigNumber"],So=G(Dn,xo,e=>{var{typed:r,config:i,matrix:a,BigNumber:n}=e;return r(Dn,{"":function(){return i.matrix==="Array"?t([]):t([],"default")},"...number | BigNumber | string":function(f){var s=f[f.length-1];if(typeof s=="string"){var d=f.pop();return t(f,d)}else return i.matrix==="Array"?t(f):t(f,"default")},Array:t,Matrix:function(f){var s=f.storage();return t(f.valueOf(),s)},"Array | Matrix, string":function(f,s){return t(f.valueOf(),s)}});function t(c,f){var s=u(c),d=s?new n(0):0;if(h(c),f){var v=a(f);return c.length>0?v.resize(c,d):v}else{var p=[];return c.length>0?rt(p,c,d):p}}function u(c){var f=!1;return c.forEach(function(s,d,v){De(s)&&(f=!0,v[d]=s.toNumber())}),f}function h(c){c.forEach(function(f){if(typeof f!="number"||!de(f)||f<0)throw new Error("Parameters in function zeros must be positive integers")})}}),gn="format",Oo=["typed"],To=G(gn,Oo,e=>{var{typed:r}=e;return r(gn,{any:we,"any, Object | function | number | BigNumber":we})}),Bo="numeric",_o=["number","?bignumber","?fraction"],Mo=G(Bo,_o,e=>{var{number:r,bignumber:i,fraction:a}=e,n={string:!0,number:!0,BigNumber:!0,Fraction:!0},t={number:u=>r(u),BigNumber:i?u=>i(u):Do,Fraction:a?u=>a(u):go};return function(h){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",f=arguments.length>2?arguments[2]:void 0;if(f!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var s=Le(h);if(!(s in n))throw new TypeError("Cannot convert "+h+' of type "'+s+'"; valid input types are '+Object.keys(n).join(", "));if(!(c in t))throw new TypeError("Cannot convert "+h+' to type "'+c+'"; valid output types are '+Object.keys(t).join(", "));return c===s?h:t[c](h)}}),En="divideScalar",Ro=["typed","numeric"],Io=G(En,Ro,e=>{var{typed:r,numeric:i}=e;return r(En,{"number, number":function(n,t){return n/t},"Complex, Complex":function(n,t){return n.div(t)},"BigNumber, BigNumber":function(n,t){return n.div(t)},"Fraction, Fraction":function(n,t){return n.div(t)},"Unit, number | Complex | Fraction | BigNumber | Unit":(a,n)=>a.divide(n),"number | Fraction | Complex | BigNumber, Unit":(a,n)=>n.divideInto(a)})}),yn="pow",$o=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Lo=G(yn,$o,e=>{var{typed:r,config:i,identity:a,multiply:n,matrix:t,inv:u,number:h,fraction:c,Complex:f}=e;return r(yn,{"number, number":s,"Complex, Complex":function(m,o){return m.pow(o)},"BigNumber, BigNumber":function(m,o){return o.isInteger()||m>=0||i.predictable?m.pow(o):new f(m.toNumber(),0).pow(o.toNumber(),0)},"Fraction, Fraction":function(m,o){var D=m.pow(o);if(D!=null)return D;if(i.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return s(m.valueOf(),o.valueOf())},"Array, number":d,"Array, BigNumber":function(m,o){return d(m,o.toNumber())},"Matrix, number":v,"Matrix, BigNumber":function(m,o){return v(m,o.toNumber())},"Unit, number | BigNumber":function(m,o){return m.pow(o)}});function s(p,m){if(i.predictable&&!de(m)&&p<0)try{var o=c(m),D=h(o);if((m===D||Math.abs((m-D)/m)<1e-14)&&o.d%2===1)return(o.n%2===0?1:-1)*Math.pow(-p,m)}catch{}return i.predictable&&(p<-1&&m===1/0||p>-1&&p<0&&m===-1/0)?NaN:de(m)||p>=0||i.predictable?Ni(p,m):p*p<1&&m===1/0||p*p>1&&m===-1/0?0:new f(p,0).pow(m,0)}function d(p,m){if(!de(m))throw new TypeError("For A^b, b must be an integer (value is "+m+")");var o=Ie(p);if(o.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+o.length+" dimensions)");if(o[0]!==o[1])throw new Error("For A^b, A must be square (size is "+o[0]+"x"+o[1]+")");if(m<0)try{return d(u(p),-m)}catch(T){throw T.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+m+")"):T}for(var D=a(o[0]).valueOf(),E=p;m>=1;)(m&1)===1&&(D=n(E,D)),m>>=1,E=n(E,E);return D}function v(p,m){return t(d(p.valueOf(),m))}}),lr="Number of decimals in function round must be an integer",wn="round",Uo=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],zo=G(wn,Uo,e=>{var{typed:r,config:i,matrix:a,equalScalar:n,zeros:t,BigNumber:u,DenseMatrix:h}=e,c=lt({typed:r,equalScalar:n}),f=Mr({typed:r,DenseMatrix:h}),s=mr({typed:r});function d(v){return Math.abs(Br(v).exponent)}return r(wn,{number:function(p){var m=Er(p,d(i.epsilon)),o=Ye(p,m,i.epsilon)?m:p;return Er(o)},"number, number":function(p,m){var o=d(i.epsilon);if(m>=o)return Er(p,m);var D=Er(p,o),E=Ye(p,D,i.epsilon)?D:p;return Er(E,m)},"number, BigNumber":function(p,m){if(!m.isInteger())throw new TypeError(lr);return new u(p).toDecimalPlaces(m.toNumber())},Complex:function(p){return p.round()},"Complex, number":function(p,m){if(m%1)throw new TypeError(lr);return p.round(m)},"Complex, BigNumber":function(p,m){if(!m.isInteger())throw new TypeError(lr);var o=m.toNumber();return p.round(o)},BigNumber:function(p){var m=new u(p).toDecimalPlaces(d(i.epsilon)),o=ur(p,m,i.epsilon)?m:p;return o.toDecimalPlaces(0)},"BigNumber, BigNumber":function(p,m){if(!m.isInteger())throw new TypeError(lr);var o=d(i.epsilon);if(m>=o)return p.toDecimalPlaces(m.toNumber());var D=p.toDecimalPlaces(o),E=ur(p,D,i.epsilon)?D:p;return E.toDecimalPlaces(m.toNumber())},Fraction:function(p){return p.round()},"Fraction, number":function(p,m){if(m%1)throw new TypeError(lr);return p.round(m)},"Fraction, BigNumber":function(p,m){if(!m.isInteger())throw new TypeError(lr);return p.round(m.toNumber())},"Unit, number, Unit":r.referToSelf(v=>function(p,m,o){var D=p.toNumeric(o);return o.multiply(v(D,m))}),"Unit, BigNumber, Unit":r.referToSelf(v=>(p,m,o)=>v(p,m.toNumber(),o)),"Unit, Unit":r.referToSelf(v=>(p,m)=>v(p,0,m)),"Array | Matrix, number, Unit":r.referToSelf(v=>(p,m,o)=>Ce(p,D=>v(D,m,o))),"Array | Matrix, BigNumber, Unit":r.referToSelf(v=>(p,m,o)=>v(p,m.toNumber(),o)),"Array | Matrix, Unit":r.referToSelf(v=>(p,m)=>v(p,0,m)),"Array | Matrix":r.referToSelf(v=>p=>Ce(p,v)),"SparseMatrix, number | BigNumber":r.referToSelf(v=>(p,m)=>c(p,m,v,!1)),"DenseMatrix, number | BigNumber":r.referToSelf(v=>(p,m)=>s(p,m,v,!1)),"Array, number | BigNumber":r.referToSelf(v=>(p,m)=>s(a(p),m,v,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":r.referToSelf(v=>(p,m)=>n(p,0)?t(m.size(),m.storage()):f(m,p,v,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":r.referToSelf(v=>(p,m)=>n(p,0)?t(m.size(),m.storage()):s(m,p,v,!0)),"number | Complex | BigNumber | Fraction, Array":r.referToSelf(v=>(p,m)=>s(a(m),p,v,!0).valueOf())})}),at="equal",Po=["typed","matrix","equalScalar","DenseMatrix","concat"],Ho=G(at,Po,e=>{var{typed:r,matrix:i,equalScalar:a,DenseMatrix:n,concat:t}=e,u=Uu({typed:r}),h=fo({typed:r,DenseMatrix:n}),c=Mr({typed:r,DenseMatrix:n}),f=bi({typed:r,matrix:i,concat:t});return r(at,ko({typed:r,equalScalar:a}),f({elop:a,SS:h,DS:u,Ss:c}))}),ko=G(at,["typed","equalScalar"],e=>{var{typed:r,equalScalar:i}=e;return r(at,{"any, any":function(n,t){return n===null?t===null:t===null?n===null:n===void 0?t===void 0:t===void 0?n===void 0:i(n,t)}})});_r(function(e){return new e(1).exp()},{hasher:ct});_r(function(e){return new e(1).plus(new e(5).sqrt()).div(2)},{hasher:ct});var Ci=_r(function(e){return e.acos(-1)},{hasher:ct});_r(function(e){return Ci(e).times(2)},{hasher:ct});function ct(e){return e[0].precision}function Nn(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,a)}return i}function gt(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Nn(Object(i),!0).forEach(function(a){Be(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Nn(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}var qo="Unit",Go=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],Vo=G(qo,Go,e=>{var{on:r,config:i,addScalar:a,subtractScalar:n,multiplyScalar:t,divideScalar:u,pow:h,abs:c,fix:f,round:s,equal:d,isNumeric:v,format:p,number:m,Complex:o,BigNumber:D,Fraction:E}=e,T=m;function g(b,O){if(!(this instanceof g))throw new Error("Constructor must be called with the new operator");if(!(b==null||v(b)||Qe(b)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,O===void 0)this.units=[],this.dimensions=H.map(P=>0);else if(typeof O=="string"){var R=g.parse(O);this.units=R.units,this.dimensions=R.dimensions}else if(Ve(O)&&O.value===null)this.fixPrefix=O.fixPrefix,this.skipAutomaticSimplification=O.skipAutomaticSimplification,this.dimensions=O.dimensions.slice(0),this.units=O.units.map(P=>He({},P));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(b)}Object.defineProperty(g,"name",{value:"Unit"}),g.prototype.constructor=g,g.prototype.type="Unit",g.prototype.isUnit=!0;var F,N,w;function B(){for(;w===" "||w==="	";)_()}function x(b){return b>="0"&&b<="9"||b==="."}function S(b){return b>="0"&&b<="9"}function _(){N++,w=F.charAt(N)}function I(b){N=b,w=F.charAt(N)}function L(){var b="",O=N;if(w==="+"?_():w==="-"&&(b+=w,_()),!x(w))return I(O),null;if(w==="."){if(b+=w,_(),!S(w))return I(O),null}else{for(;S(w);)b+=w,_();w==="."&&(b+=w,_())}for(;S(w);)b+=w,_();if(w==="E"||w==="e"){var R="",P=N;if(R+=w,_(),(w==="+"||w==="-")&&(R+=w,_()),!S(w))return I(P),b;for(b=b+R;S(w);)b+=w,_()}return b}function $(){for(var b="";S(w)||g.isValidAlpha(w);)b+=w,_();var O=b.charAt(0);return g.isValidAlpha(O)?b:null}function U(b){return w===b?(_(),b):null}g.parse=function(b,O){if(O=O||{},F=b,N=-1,w="",typeof F!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var R=new g;R.units=[];var P=1,V=!1;_(),B();var W=L(),X=null;if(W){if(i.number==="BigNumber")X=new D(W);else if(i.number==="Fraction")try{X=new E(W)}catch{X=parseFloat(W)}else X=parseFloat(W);B(),U("*")?(P=1,V=!0):U("/")&&(P=-1,V=!0)}for(var K=[],xe=1;;){for(B();w==="(";)K.push(P),xe*=P,P=1,_(),B();var ye=void 0;if(w){var Me=w;if(ye=$(),ye===null)throw new SyntaxError('Unexpected "'+Me+'" in "'+F+'" at index '+N.toString())}else break;var Re=j(ye);if(Re===null)throw new SyntaxError('Unit "'+ye+'" not found.');var je=P*xe;if(B(),U("^")){B();var tr=L();if(tr===null)throw new SyntaxError('In "'+b+'", "^" must be followed by a floating-point number');je*=tr}R.units.push({unit:Re.unit,prefix:Re.prefix,power:je});for(var qe=0;qe<H.length;qe++)R.dimensions[qe]+=(Re.unit.dimensions[qe]||0)*je;for(B();w===")";){if(K.length===0)throw new SyntaxError('Unmatched ")" in "'+F+'" at index '+N.toString());xe/=K.pop(),_(),B()}if(V=!1,U("*")?(P=1,V=!0):U("/")?(P=-1,V=!0):P=1,Re.unit.base){var sr=Re.unit.base.key;Z.auto[sr]={unit:Re.unit,prefix:Re.prefix}}}if(B(),w)throw new SyntaxError('Could not parse: "'+b+'"');if(V)throw new SyntaxError('Trailing characters: "'+b+'"');if(K.length!==0)throw new SyntaxError('Unmatched "(" in "'+F+'"');if(R.units.length===0&&!O.allowNoUnits)throw new SyntaxError('"'+b+'" contains no units');return R.value=X!==void 0?R._normalize(X):null,R},g.prototype.clone=function(){var b=new g;b.fixPrefix=this.fixPrefix,b.skipAutomaticSimplification=this.skipAutomaticSimplification,b.value=fe(this.value),b.dimensions=this.dimensions.slice(0),b.units=[];for(var O=0;O<this.units.length;O++){b.units[O]={};for(var R in this.units[O])J(this.units[O],R)&&(b.units[O][R]=this.units[O][R])}return b},g.prototype.valueType=function(){return Le(this.value)},g.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},g.prototype._normalize=function(b){if(b==null||this.units.length===0)return b;for(var O=b,R=g._getNumberConverter(Le(b)),P=0;P<this.units.length;P++){var V=R(this.units[P].unit.value),W=R(this.units[P].prefix.value),X=R(this.units[P].power);O=t(O,h(t(V,W),X))}return O},g.prototype._denormalize=function(b,O){if(b==null||this.units.length===0)return b;for(var R=b,P=g._getNumberConverter(Le(b)),V=0;V<this.units.length;V++){var W=P(this.units[V].unit.value),X=P(this.units[V].prefix.value),K=P(this.units[V].power);R=u(R,h(t(W,X),K))}return R};var j=_r(b=>{if(J(z,b)){var O=z[b],R=O.prefixes[""];return{unit:O,prefix:R}}for(var P in z)if(J(z,P)&&ta(b,P)){var V=z[P],W=b.length-P.length,X=b.substring(0,W),K=J(V.prefixes,X)?V.prefixes[X]:void 0;if(K!==void 0)return{unit:V,prefix:K}}return null},{hasher:b=>b[0],limit:100});g.isValuelessUnit=function(b){return j(b)!==null},g.prototype.hasBase=function(b){if(typeof b=="string"&&(b=A[b]),!b)return!1;for(var O=0;O<H.length;O++)if(Math.abs((this.dimensions[O]||0)-(b.dimensions[O]||0))>1e-12)return!1;return!0},g.prototype.equalBase=function(b){for(var O=0;O<H.length;O++)if(Math.abs((this.dimensions[O]||0)-(b.dimensions[O]||0))>1e-12)return!1;return!0},g.prototype.equals=function(b){return this.equalBase(b)&&d(this.value,b.value)},g.prototype.multiply=function(b){for(var O=this.clone(),R=Ve(b)?b:new g(b),P=0;P<H.length;P++)O.dimensions[P]=(this.dimensions[P]||0)+(R.dimensions[P]||0);for(var V=0;V<R.units.length;V++){var W=gt({},R.units[V]);O.units.push(W)}if(this.value!==null||R.value!==null){var X=this.value===null?this._normalize(1):this.value,K=R.value===null?R._normalize(1):R.value;O.value=t(X,K)}else O.value=null;return Ve(b)&&(O.skipAutomaticSimplification=!1),q(O)},g.prototype.divideInto=function(b){return new g(b).divide(this)},g.prototype.divide=function(b){for(var O=this.clone(),R=Ve(b)?b:new g(b),P=0;P<H.length;P++)O.dimensions[P]=(this.dimensions[P]||0)-(R.dimensions[P]||0);for(var V=0;V<R.units.length;V++){var W=gt(gt({},R.units[V]),{},{power:-R.units[V].power});O.units.push(W)}if(this.value!==null||R.value!==null){var X=this.value===null?this._normalize(1):this.value,K=R.value===null?R._normalize(1):R.value;O.value=u(X,K)}else O.value=null;return Ve(b)&&(O.skipAutomaticSimplification=!1),q(O)},g.prototype.pow=function(b){for(var O=this.clone(),R=0;R<H.length;R++)O.dimensions[R]=(this.dimensions[R]||0)*b;for(var P=0;P<O.units.length;P++)O.units[P].power*=b;return O.value!==null?O.value=h(O.value,b):O.value=null,O.skipAutomaticSimplification=!1,q(O)};function q(b){return b.equalBase(A.NONE)&&b.value!==null&&!i.predictable?b.value:b}g.prototype.abs=function(){var b=this.clone();if(b.value!==null)if(b._isDerived()||b.units.length===0||b.units[0].unit.offset===0)b.value=c(b.value);else{var O=b._numberConverter(),R=O(b.units[0].unit.value),P=O(b.units[0].unit.offset),V=t(R,P);b.value=n(c(a(b.value,V)),V)}for(var W in b.units)(b.units[W].unit.name==="VA"||b.units[W].unit.name==="VAR")&&(b.units[W].unit=z.W);return b},g.prototype.to=function(b){var O=this.value===null?this._normalize(1):this.value,R;if(typeof b=="string")R=g.parse(b);else if(Ve(b))R=b.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(R))throw new Error("Units do not match ('".concat(R.toString(),"' != '").concat(this.toString(),"')"));if(R.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||R.units.length===0||this.units[0].unit.offset===R.units[0].unit.offset)R.value=fe(O);else{var P=g._getNumberConverter(Le(O)),V=this.units[0].unit.value,W=this.units[0].unit.offset,X=t(V,W),K=R.units[0].unit.value,xe=R.units[0].unit.offset,ye=t(K,xe);R.value=a(O,P(n(X,ye)))}return R.fixPrefix=!0,R.skipAutomaticSimplification=!0,R},g.prototype.toNumber=function(b){return T(this.toNumeric(b))},g.prototype.toNumeric=function(b){var O;return b?O=this.to(b):O=this.clone(),O._isDerived()||O.units.length===0?O._denormalize(O.value):O._denormalize(O.value,O.units[0].prefix.value)},g.prototype.toString=function(){return this.format()},g.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.formatUnits(),fixPrefix:this.fixPrefix}},g.fromJSON=function(b){var O=new g(b.value,b.unit);return O.fixPrefix=b.fixPrefix||!1,O},g.prototype.valueOf=g.prototype.toString,g.prototype.simplify=function(){var b=this.clone(),O=[],R;for(var P in re)if(J(re,P)&&b.hasBase(A[P])){R=P;break}if(R==="NONE")b.units=[];else{var V;if(R&&J(re,R)&&(V=re[R]),V)b.units=[{unit:V.unit,prefix:V.prefix,power:1}];else{for(var W=!1,X=0;X<H.length;X++){var K=H[X];Math.abs(b.dimensions[X]||0)>1e-12&&(J(re,K)?O.push({unit:re[K].unit,prefix:re[K].prefix,power:b.dimensions[X]||0}):W=!0)}O.length<b.units.length&&!W&&(b.units=O)}}return b},g.prototype.toSI=function(){for(var b=this.clone(),O=[],R=0;R<H.length;R++){var P=H[R];if(Math.abs(b.dimensions[R]||0)>1e-12)if(J(Z.si,P))O.push({unit:Z.si[P].unit,prefix:Z.si[P].prefix,power:b.dimensions[R]||0});else throw new Error("Cannot express custom unit "+P+" in SI units")}return b.units=O,b.fixPrefix=!0,b.skipAutomaticSimplification=!0,this.value!==null?(b.value=null,this.to(b)):b},g.prototype.formatUnits=function(){for(var b="",O="",R=0,P=0,V=0;V<this.units.length;V++)this.units[V].power>0?(R++,b+=" "+this.units[V].prefix.name+this.units[V].unit.name,Math.abs(this.units[V].power-1)>1e-15&&(b+="^"+this.units[V].power)):this.units[V].power<0&&P++;if(P>0)for(var W=0;W<this.units.length;W++)this.units[W].power<0&&(R>0?(O+=" "+this.units[W].prefix.name+this.units[W].unit.name,Math.abs(this.units[W].power+1)>1e-15&&(O+="^"+-this.units[W].power)):(O+=" "+this.units[W].prefix.name+this.units[W].unit.name,O+="^"+this.units[W].power));b=b.substr(1),O=O.substr(1),R>1&&P>0&&(b="("+b+")"),P>1&&R>0&&(O="("+O+")");var X=b;return R>0&&P>0&&(X+=" / "),X+=O,X},g.prototype.format=function(b){var O=this.skipAutomaticSimplification||this.value===null?this.clone():this.simplify(),R=!1;typeof O.value<"u"&&O.value!==null&&Qe(O.value)&&(R=Math.abs(O.value.re)<1e-14);for(var P in O.units)J(O.units,P)&&O.units[P].unit&&(O.units[P].unit.name==="VA"&&R?O.units[P].unit=z.VAR:O.units[P].unit.name==="VAR"&&!R&&(O.units[P].unit=z.VA));O.units.length===1&&!O.fixPrefix&&Math.abs(O.units[0].power-Math.round(O.units[0].power))<1e-14&&(O.units[0].prefix=O._bestPrefix());var V=O._denormalize(O.value),W=O.value!==null?p(V,b||{}):"",X=O.formatUnits();return O.value&&Qe(O.value)&&(W="("+W+")"),X.length>0&&W.length>0&&(W+=" "),W+=X,W},g.prototype._bestPrefix=function(){if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var b=this.value!==null?c(this.value):0,O=c(this.units[0].unit.value),R=this.units[0].prefix;if(b===0)return R;var P=this.units[0].power,V=Math.log(b/Math.pow(R.value*O,P))/Math.LN10-1.2;if(V>-2.200001&&V<1.800001)return R;V=Math.abs(V);var W=this.units[0].unit.prefixes;for(var X in W)if(J(W,X)){var K=W[X];if(K.scientific){var xe=Math.abs(Math.log(b/Math.pow(K.value*O,P))/Math.LN10-1.2);(xe<V||xe===V&&K.name.length<R.name.length)&&(R=K,V=xe)}}return R},g.prototype.splitUnit=function(b){for(var O=this.clone(),R=[],P=0;P<b.length&&(O=O.to(b[P]),P!==b.length-1);P++){var V=O.toNumeric(),W=s(V),X=void 0,K=d(W,V);K?X=W:X=f(O.toNumeric());var xe=new g(X,b[P].toString());R.push(xe),O=n(O,xe)}for(var ye=0,Me=0;Me<R.length;Me++)ye=a(ye,R[Me].value);return d(ye,this.value)&&(O.value=0),R.push(O),R};var y={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};y.SHORTLONG=He({},y.SHORT,y.LONG),y.BINARY_SHORT=He({},y.BINARY_SHORT_SI,y.BINARY_SHORT_IEC),y.BINARY_LONG=He({},y.BINARY_LONG_SI,y.BINARY_LONG_IEC);var H=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],A={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var Y in A)J(A,Y)&&(A[Y].key=Y);var ae={},se={name:"",base:ae,value:1,offset:0,dimensions:H.map(b=>0)},z={meter:{name:"meter",base:A.LENGTH,prefixes:y.LONG,value:1,offset:0},inch:{name:"inch",base:A.LENGTH,prefixes:y.NONE,value:.0254,offset:0},foot:{name:"foot",base:A.LENGTH,prefixes:y.NONE,value:.3048,offset:0},yard:{name:"yard",base:A.LENGTH,prefixes:y.NONE,value:.9144,offset:0},mile:{name:"mile",base:A.LENGTH,prefixes:y.NONE,value:1609.344,offset:0},link:{name:"link",base:A.LENGTH,prefixes:y.NONE,value:.201168,offset:0},rod:{name:"rod",base:A.LENGTH,prefixes:y.NONE,value:5.0292,offset:0},chain:{name:"chain",base:A.LENGTH,prefixes:y.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:A.LENGTH,prefixes:y.NONE,value:1e-10,offset:0},m:{name:"m",base:A.LENGTH,prefixes:y.SHORT,value:1,offset:0},in:{name:"in",base:A.LENGTH,prefixes:y.NONE,value:.0254,offset:0},ft:{name:"ft",base:A.LENGTH,prefixes:y.NONE,value:.3048,offset:0},yd:{name:"yd",base:A.LENGTH,prefixes:y.NONE,value:.9144,offset:0},mi:{name:"mi",base:A.LENGTH,prefixes:y.NONE,value:1609.344,offset:0},li:{name:"li",base:A.LENGTH,prefixes:y.NONE,value:.201168,offset:0},rd:{name:"rd",base:A.LENGTH,prefixes:y.NONE,value:5.02921,offset:0},ch:{name:"ch",base:A.LENGTH,prefixes:y.NONE,value:20.1168,offset:0},mil:{name:"mil",base:A.LENGTH,prefixes:y.NONE,value:254e-7,offset:0},m2:{name:"m2",base:A.SURFACE,prefixes:y.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:A.SURFACE,prefixes:y.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:A.SURFACE,prefixes:y.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:A.SURFACE,prefixes:y.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:A.SURFACE,prefixes:y.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:A.SURFACE,prefixes:y.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:A.SURFACE,prefixes:y.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:A.SURFACE,prefixes:y.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:A.SURFACE,prefixes:y.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:A.SURFACE,prefixes:y.NONE,value:1e4,offset:0},m3:{name:"m3",base:A.VOLUME,prefixes:y.CUBIC,value:1,offset:0},L:{name:"L",base:A.VOLUME,prefixes:y.SHORT,value:.001,offset:0},l:{name:"l",base:A.VOLUME,prefixes:y.SHORT,value:.001,offset:0},litre:{name:"litre",base:A.VOLUME,prefixes:y.LONG,value:.001,offset:0},cuin:{name:"cuin",base:A.VOLUME,prefixes:y.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:A.VOLUME,prefixes:y.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:A.VOLUME,prefixes:y.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:A.VOLUME,prefixes:y.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:A.VOLUME,prefixes:y.NONE,value:15e-6,offset:0},drop:{name:"drop",base:A.VOLUME,prefixes:y.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:A.VOLUME,prefixes:y.NONE,value:5e-8,offset:0},minim:{name:"minim",base:A.VOLUME,prefixes:y.NONE,value:6161152e-14,offset:0},fluiddram:{name:"fluiddram",base:A.VOLUME,prefixes:y.NONE,value:36966911e-13,offset:0},fluidounce:{name:"fluidounce",base:A.VOLUME,prefixes:y.NONE,value:2957353e-11,offset:0},gill:{name:"gill",base:A.VOLUME,prefixes:y.NONE,value:.0001182941,offset:0},cc:{name:"cc",base:A.VOLUME,prefixes:y.NONE,value:1e-6,offset:0},cup:{name:"cup",base:A.VOLUME,prefixes:y.NONE,value:.0002365882,offset:0},pint:{name:"pint",base:A.VOLUME,prefixes:y.NONE,value:.0004731765,offset:0},quart:{name:"quart",base:A.VOLUME,prefixes:y.NONE,value:.0009463529,offset:0},gallon:{name:"gallon",base:A.VOLUME,prefixes:y.NONE,value:.003785412,offset:0},beerbarrel:{name:"beerbarrel",base:A.VOLUME,prefixes:y.NONE,value:.1173478,offset:0},oilbarrel:{name:"oilbarrel",base:A.VOLUME,prefixes:y.NONE,value:.1589873,offset:0},hogshead:{name:"hogshead",base:A.VOLUME,prefixes:y.NONE,value:.238481,offset:0},fldr:{name:"fldr",base:A.VOLUME,prefixes:y.NONE,value:36966911e-13,offset:0},floz:{name:"floz",base:A.VOLUME,prefixes:y.NONE,value:2957353e-11,offset:0},gi:{name:"gi",base:A.VOLUME,prefixes:y.NONE,value:.0001182941,offset:0},cp:{name:"cp",base:A.VOLUME,prefixes:y.NONE,value:.0002365882,offset:0},pt:{name:"pt",base:A.VOLUME,prefixes:y.NONE,value:.0004731765,offset:0},qt:{name:"qt",base:A.VOLUME,prefixes:y.NONE,value:.0009463529,offset:0},gal:{name:"gal",base:A.VOLUME,prefixes:y.NONE,value:.003785412,offset:0},bbl:{name:"bbl",base:A.VOLUME,prefixes:y.NONE,value:.1173478,offset:0},obl:{name:"obl",base:A.VOLUME,prefixes:y.NONE,value:.1589873,offset:0},g:{name:"g",base:A.MASS,prefixes:y.SHORT,value:.001,offset:0},gram:{name:"gram",base:A.MASS,prefixes:y.LONG,value:.001,offset:0},ton:{name:"ton",base:A.MASS,prefixes:y.SHORT,value:907.18474,offset:0},t:{name:"t",base:A.MASS,prefixes:y.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:A.MASS,prefixes:y.LONG,value:1e3,offset:0},grain:{name:"grain",base:A.MASS,prefixes:y.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:A.MASS,prefixes:y.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:A.MASS,prefixes:y.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:A.MASS,prefixes:y.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:A.MASS,prefixes:y.NONE,value:45.359237,offset:0},stick:{name:"stick",base:A.MASS,prefixes:y.NONE,value:.115,offset:0},stone:{name:"stone",base:A.MASS,prefixes:y.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:A.MASS,prefixes:y.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:A.MASS,prefixes:y.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:A.MASS,prefixes:y.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:A.MASS,prefixes:y.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:A.MASS,prefixes:y.NONE,value:45.359237,offset:0},s:{name:"s",base:A.TIME,prefixes:y.SHORT,value:1,offset:0},min:{name:"min",base:A.TIME,prefixes:y.NONE,value:60,offset:0},h:{name:"h",base:A.TIME,prefixes:y.NONE,value:3600,offset:0},second:{name:"second",base:A.TIME,prefixes:y.LONG,value:1,offset:0},sec:{name:"sec",base:A.TIME,prefixes:y.LONG,value:1,offset:0},minute:{name:"minute",base:A.TIME,prefixes:y.NONE,value:60,offset:0},hour:{name:"hour",base:A.TIME,prefixes:y.NONE,value:3600,offset:0},day:{name:"day",base:A.TIME,prefixes:y.NONE,value:86400,offset:0},week:{name:"week",base:A.TIME,prefixes:y.NONE,value:7*86400,offset:0},month:{name:"month",base:A.TIME,prefixes:y.NONE,value:2629800,offset:0},year:{name:"year",base:A.TIME,prefixes:y.NONE,value:31557600,offset:0},decade:{name:"decade",base:A.TIME,prefixes:y.NONE,value:315576e3,offset:0},century:{name:"century",base:A.TIME,prefixes:y.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:A.TIME,prefixes:y.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:A.FREQUENCY,prefixes:y.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:A.FREQUENCY,prefixes:y.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:A.ANGLE,prefixes:y.SHORT,value:1,offset:0},radian:{name:"radian",base:A.ANGLE,prefixes:y.LONG,value:1,offset:0},deg:{name:"deg",base:A.ANGLE,prefixes:y.SHORT,value:null,offset:0},degree:{name:"degree",base:A.ANGLE,prefixes:y.LONG,value:null,offset:0},grad:{name:"grad",base:A.ANGLE,prefixes:y.SHORT,value:null,offset:0},gradian:{name:"gradian",base:A.ANGLE,prefixes:y.LONG,value:null,offset:0},cycle:{name:"cycle",base:A.ANGLE,prefixes:y.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:A.ANGLE,prefixes:y.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:A.ANGLE,prefixes:y.NONE,value:null,offset:0},A:{name:"A",base:A.CURRENT,prefixes:y.SHORT,value:1,offset:0},ampere:{name:"ampere",base:A.CURRENT,prefixes:y.LONG,value:1,offset:0},K:{name:"K",base:A.TEMPERATURE,prefixes:y.SHORT,value:1,offset:0},degC:{name:"degC",base:A.TEMPERATURE,prefixes:y.SHORT,value:1,offset:273.15},degF:{name:"degF",base:A.TEMPERATURE,prefixes:y.SHORT,value:new E(5,9),offset:459.67},degR:{name:"degR",base:A.TEMPERATURE,prefixes:y.SHORT,value:new E(5,9),offset:0},kelvin:{name:"kelvin",base:A.TEMPERATURE,prefixes:y.LONG,value:1,offset:0},celsius:{name:"celsius",base:A.TEMPERATURE,prefixes:y.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:A.TEMPERATURE,prefixes:y.LONG,value:new E(5,9),offset:459.67},rankine:{name:"rankine",base:A.TEMPERATURE,prefixes:y.LONG,value:new E(5,9),offset:0},mol:{name:"mol",base:A.AMOUNT_OF_SUBSTANCE,prefixes:y.SHORT,value:1,offset:0},mole:{name:"mole",base:A.AMOUNT_OF_SUBSTANCE,prefixes:y.LONG,value:1,offset:0},cd:{name:"cd",base:A.LUMINOUS_INTENSITY,prefixes:y.SHORT,value:1,offset:0},candela:{name:"candela",base:A.LUMINOUS_INTENSITY,prefixes:y.LONG,value:1,offset:0},N:{name:"N",base:A.FORCE,prefixes:y.SHORT,value:1,offset:0},newton:{name:"newton",base:A.FORCE,prefixes:y.LONG,value:1,offset:0},dyn:{name:"dyn",base:A.FORCE,prefixes:y.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:A.FORCE,prefixes:y.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:A.FORCE,prefixes:y.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:A.FORCE,prefixes:y.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:A.FORCE,prefixes:y.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:A.FORCE,prefixes:y.NONE,value:9.80665,offset:0},J:{name:"J",base:A.ENERGY,prefixes:y.SHORT,value:1,offset:0},joule:{name:"joule",base:A.ENERGY,prefixes:y.LONG,value:1,offset:0},erg:{name:"erg",base:A.ENERGY,prefixes:y.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:A.ENERGY,prefixes:y.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:A.ENERGY,prefixes:y.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:A.ENERGY,prefixes:y.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:A.ENERGY,prefixes:y.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:A.POWER,prefixes:y.SHORT,value:1,offset:0},watt:{name:"watt",base:A.POWER,prefixes:y.LONG,value:1,offset:0},hp:{name:"hp",base:A.POWER,prefixes:y.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:A.POWER,prefixes:y.SHORT,value:o.I,offset:0},VA:{name:"VA",base:A.POWER,prefixes:y.SHORT,value:1,offset:0},Pa:{name:"Pa",base:A.PRESSURE,prefixes:y.SHORT,value:1,offset:0},psi:{name:"psi",base:A.PRESSURE,prefixes:y.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:A.PRESSURE,prefixes:y.NONE,value:101325,offset:0},bar:{name:"bar",base:A.PRESSURE,prefixes:y.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:A.PRESSURE,prefixes:y.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:A.PRESSURE,prefixes:y.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:A.PRESSURE,prefixes:y.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:A.PRESSURE,prefixes:y.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:A.ELECTRIC_CHARGE,prefixes:y.LONG,value:1,offset:0},C:{name:"C",base:A.ELECTRIC_CHARGE,prefixes:y.SHORT,value:1,offset:0},farad:{name:"farad",base:A.ELECTRIC_CAPACITANCE,prefixes:y.LONG,value:1,offset:0},F:{name:"F",base:A.ELECTRIC_CAPACITANCE,prefixes:y.SHORT,value:1,offset:0},volt:{name:"volt",base:A.ELECTRIC_POTENTIAL,prefixes:y.LONG,value:1,offset:0},V:{name:"V",base:A.ELECTRIC_POTENTIAL,prefixes:y.SHORT,value:1,offset:0},ohm:{name:"ohm",base:A.ELECTRIC_RESISTANCE,prefixes:y.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:A.ELECTRIC_INDUCTANCE,prefixes:y.LONG,value:1,offset:0},H:{name:"H",base:A.ELECTRIC_INDUCTANCE,prefixes:y.SHORT,value:1,offset:0},siemens:{name:"siemens",base:A.ELECTRIC_CONDUCTANCE,prefixes:y.LONG,value:1,offset:0},S:{name:"S",base:A.ELECTRIC_CONDUCTANCE,prefixes:y.SHORT,value:1,offset:0},weber:{name:"weber",base:A.MAGNETIC_FLUX,prefixes:y.LONG,value:1,offset:0},Wb:{name:"Wb",base:A.MAGNETIC_FLUX,prefixes:y.SHORT,value:1,offset:0},tesla:{name:"tesla",base:A.MAGNETIC_FLUX_DENSITY,prefixes:y.LONG,value:1,offset:0},T:{name:"T",base:A.MAGNETIC_FLUX_DENSITY,prefixes:y.SHORT,value:1,offset:0},b:{name:"b",base:A.BIT,prefixes:y.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:A.BIT,prefixes:y.BINARY_LONG,value:1,offset:0},B:{name:"B",base:A.BIT,prefixes:y.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:A.BIT,prefixes:y.BINARY_LONG,value:8,offset:0}},ge={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fluiddrams:"fluiddram",fluidounces:"fluidounce",gills:"gill",cups:"cup",pints:"pint",quarts:"quart",gallons:"gallon",beerbarrels:"beerbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function Ee(b){if(b.number==="BigNumber"){var O=Ci(D);z.rad.value=new D(1),z.deg.value=O.div(180),z.grad.value=O.div(200),z.cycle.value=O.times(2),z.arcsec.value=O.div(648e3),z.arcmin.value=O.div(10800)}else z.rad.value=1,z.deg.value=Math.PI/180,z.grad.value=Math.PI/200,z.cycle.value=Math.PI*2,z.arcsec.value=Math.PI/648e3,z.arcmin.value=Math.PI/10800;z.radian.value=z.rad.value,z.degree.value=z.deg.value,z.gradian.value=z.grad.value}Ee(i),r&&r("config",function(b,O){b.number!==O.number&&Ee(b)});var Z={si:{NONE:{unit:se,prefix:y.NONE[""]},LENGTH:{unit:z.m,prefix:y.SHORT[""]},MASS:{unit:z.g,prefix:y.SHORT.k},TIME:{unit:z.s,prefix:y.SHORT[""]},CURRENT:{unit:z.A,prefix:y.SHORT[""]},TEMPERATURE:{unit:z.K,prefix:y.SHORT[""]},LUMINOUS_INTENSITY:{unit:z.cd,prefix:y.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:z.mol,prefix:y.SHORT[""]},ANGLE:{unit:z.rad,prefix:y.SHORT[""]},BIT:{unit:z.bits,prefix:y.SHORT[""]},FORCE:{unit:z.N,prefix:y.SHORT[""]},ENERGY:{unit:z.J,prefix:y.SHORT[""]},POWER:{unit:z.W,prefix:y.SHORT[""]},PRESSURE:{unit:z.Pa,prefix:y.SHORT[""]},ELECTRIC_CHARGE:{unit:z.C,prefix:y.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:z.F,prefix:y.SHORT[""]},ELECTRIC_POTENTIAL:{unit:z.V,prefix:y.SHORT[""]},ELECTRIC_RESISTANCE:{unit:z.ohm,prefix:y.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:z.H,prefix:y.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:z.S,prefix:y.SHORT[""]},MAGNETIC_FLUX:{unit:z.Wb,prefix:y.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:z.T,prefix:y.SHORT[""]},FREQUENCY:{unit:z.Hz,prefix:y.SHORT[""]}}};Z.cgs=JSON.parse(JSON.stringify(Z.si)),Z.cgs.LENGTH={unit:z.m,prefix:y.SHORT.c},Z.cgs.MASS={unit:z.g,prefix:y.SHORT[""]},Z.cgs.FORCE={unit:z.dyn,prefix:y.SHORT[""]},Z.cgs.ENERGY={unit:z.erg,prefix:y.NONE[""]},Z.us=JSON.parse(JSON.stringify(Z.si)),Z.us.LENGTH={unit:z.ft,prefix:y.NONE[""]},Z.us.MASS={unit:z.lbm,prefix:y.NONE[""]},Z.us.TEMPERATURE={unit:z.degF,prefix:y.NONE[""]},Z.us.FORCE={unit:z.lbf,prefix:y.NONE[""]},Z.us.ENERGY={unit:z.BTU,prefix:y.BTU[""]},Z.us.POWER={unit:z.hp,prefix:y.NONE[""]},Z.us.PRESSURE={unit:z.psi,prefix:y.NONE[""]},Z.auto=JSON.parse(JSON.stringify(Z.si));var re=Z.auto;g.setUnitSystem=function(b){if(J(Z,b))re=Z[b];else throw new Error("Unit system "+b+" does not exist. Choices are: "+Object.keys(Z).join(", "))},g.getUnitSystem=function(){for(var b in Z)if(J(Z,b)&&Z[b]===re)return b},g.typeConverters={BigNumber:function(O){return O!=null&&O.isFraction?new D(O.n).div(O.d).times(O.s):new D(O+"")},Fraction:function(O){return new E(O)},Complex:function(O){return O},number:function(O){return O!=null&&O.isFraction?m(O):O}},g.prototype._numberConverter=function(){var b=g.typeConverters[this.valueType()];if(b)return b;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},g._getNumberConverter=function(b){if(!g.typeConverters[b])throw new TypeError('Unsupported type "'+b+'"');return g.typeConverters[b]};for(var Se in z)if(J(z,Se)){var ve=z[Se];ve.dimensions=ve.base.dimensions}for(var ue in ge)if(J(ge,ue)){var Oe=z[ge[ue]],be={};for(var oe in Oe)J(Oe,oe)&&(be[oe]=Oe[oe]);be.name=ue,z[ue]=be}g.isValidAlpha=function(O){return/^[a-zA-Z]$/.test(O)};function Fe(b){for(var O=0;O<b.length;O++){if(w=b.charAt(O),O===0&&!g.isValidAlpha(w))throw new Error('Invalid unit name (must begin with alpha character): "'+b+'"');if(O>0&&!(g.isValidAlpha(w)||S(w)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+b+'"')}}return g.createUnit=function(b,O){if(typeof b!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(O&&O.override){for(var R in b)if(J(b,R)&&g.deleteUnit(R),b[R].aliases)for(var P=0;P<b[R].aliases.length;P++)g.deleteUnit(b[R].aliases[P])}var V;for(var W in b)J(b,W)&&(V=g.createUnitSingle(W,b[W]));return V},g.createUnitSingle=function(b,O){if((typeof O>"u"||O===null)&&(O={}),typeof b!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(J(z,b))throw new Error('Cannot create unit "'+b+'": a unit with that name already exists');Fe(b);var R=null,P=[],V=0,W,X,K;if(O&&O.type==="Unit")R=O.clone();else if(typeof O=="string")O!==""&&(W=O);else if(typeof O=="object")W=O.definition,X=O.prefixes,V=O.offset,K=O.baseName,O.aliases&&(P=O.aliases.valueOf());else throw new TypeError('Cannot create unit "'+b+'" from "'+O.toString()+'": expecting "string" or "Unit" or "Object"');if(P){for(var xe=0;xe<P.length;xe++)if(J(z,P[xe]))throw new Error('Cannot create alias "'+P[xe]+'": a unit with that name already exists')}if(W&&typeof W=="string"&&!R)try{R=g.parse(W,{allowNoUnits:!0})}catch(l){throw l.message='Could not create unit "'+b+'" from "'+W+'": '+l.message,l}else W&&W.type==="Unit"&&(R=W.clone());P=P||[],V=V||0,X&&X.toUpperCase?X=y[X.toUpperCase()]||y.NONE:X=y.NONE;var ye={};if(R){ye={name:b,value:R.value,dimensions:R.dimensions.slice(0),prefixes:X,offset:V};var tr=!1;for(var qe in A)if(J(A,qe)){for(var sr=!0,nr=0;nr<H.length;nr++)if(Math.abs((ye.dimensions[nr]||0)-(A[qe].dimensions[nr]||0))>1e-12){sr=!1;break}if(sr){tr=!0,ye.base=A[qe];break}}if(!tr){K=K||b+"_STUFF";var $r={dimensions:R.dimensions.slice(0)};$r.key=K,A[K]=$r,re[K]={unit:ye,prefix:y.NONE[""]},ye.base=A[K]}}else{if(K=K||b+"_STUFF",H.indexOf(K)>=0)throw new Error('Cannot create new base unit "'+b+'": a base unit with that name already exists (and cannot be overridden)');H.push(K);for(var Me in A)J(A,Me)&&(A[Me].dimensions[H.length-1]=0);for(var Re={dimensions:[]},je=0;je<H.length;je++)Re.dimensions[je]=0;Re.dimensions[H.length-1]=1,Re.key=K,A[K]=Re,ye={name:b,value:1,dimensions:A[K].dimensions.slice(0),prefixes:X,offset:V,base:A[K]},re[K]={unit:ye,prefix:y.NONE[""]}}g.UNITS[b]=ye;for(var Dr=0;Dr<P.length;Dr++){var gr=P[Dr],he={};for(var fr in ye)J(ye,fr)&&(he[fr]=ye[fr]);he.name=gr,g.UNITS[gr]=he}return delete j.cache,new g(null,b)},g.deleteUnit=function(b){delete g.UNITS[b],delete j.cache},g.PREFIXES=y,g.BASE_DIMENSIONS=H,g.BASE_UNITS=A,g.UNIT_SYSTEMS=Z,g.UNITS=z,g},{isClass:!0}),An="add",Wo=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],jo=G(An,Wo,e=>{var{typed:r,matrix:i,addScalar:a,equalScalar:n,DenseMatrix:t,SparseMatrix:u,concat:h}=e,c=Yu({typed:r}),f=Ku({typed:r,equalScalar:n}),s=ro({typed:r,DenseMatrix:t}),d=bi({typed:r,matrix:i,concat:h});return r(An,{"any, any":a,"any, any, ...any":r.referToSelf(v=>(p,m,o)=>{for(var D=v(p,m),E=0;E<o.length;E++)D=v(D,o[E]);return D})},d({elop:a,DS:c,SS:f,Ss:s}))}),bn="dot",Jo=["typed","addScalar","multiplyScalar","conj","size"],Yo=G(bn,Jo,e=>{var{typed:r,addScalar:i,multiplyScalar:a,conj:n,size:t}=e;return r(bn,{"Array | DenseMatrix, Array | DenseMatrix":h,"SparseMatrix, SparseMatrix":c});function u(s,d){var v=f(s),p=f(d),m,o;if(v.length===1)m=v[0];else if(v.length===2&&v[1]===1)m=v[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+v.join(", ")+")");if(p.length===1)o=p[0];else if(p.length===2&&p[1]===1)o=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(m!==o)throw new RangeError("Vectors must have equal length ("+m+" != "+o+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function h(s,d){var v=u(s,d),p=Ne(s)?s._data:s,m=Ne(s)?s._datatype||s.getDataType():void 0,o=Ne(d)?d._data:d,D=Ne(d)?d._datatype||d.getDataType():void 0,E=f(s).length===2,T=f(d).length===2,g=i,F=a;if(m&&D&&m===D&&typeof m=="string"&&m!=="mixed"){var N=m;g=r.find(i,[N,N]),F=r.find(a,[N,N])}if(!E&&!T){for(var w=F(n(p[0]),o[0]),B=1;B<v;B++)w=g(w,F(n(p[B]),o[B]));return w}if(!E&&T){for(var x=F(n(p[0]),o[0][0]),S=1;S<v;S++)x=g(x,F(n(p[S]),o[S][0]));return x}if(E&&!T){for(var _=F(n(p[0][0]),o[0]),I=1;I<v;I++)_=g(_,F(n(p[I][0]),o[I]));return _}if(E&&T){for(var L=F(n(p[0][0]),o[0][0]),$=1;$<v;$++)L=g(L,F(n(p[$][0]),o[$][0]));return L}}function c(s,d){u(s,d);for(var v=s._index,p=s._values,m=d._index,o=d._values,D=0,E=i,T=a,g=0,F=0;g<v.length&&F<m.length;){var N=v[g],w=m[F];if(N<w){g++;continue}if(N>w){F++;continue}N===w&&(D=E(D,T(p[g],o[F])),g++,F++)}return D}function f(s){return Ne(s)?s.size():t(s)}}),Fi=new Set(["end"]),Zo="Node",Xo=["mathWithTransform"],Ko=G(Zo,Xo,e=>{var{mathWithTransform:r}=e;function i(n){for(var t of[...Fi])if(n.has(t))throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}class a{get type(){return"Node"}get isNode(){return!0}evaluate(t){return this.compile().evaluate(t)}compile(){var t=this._compile(r,{}),u={},h=null;function c(f){var s=Da(f);return i(s),t(s,u,h)}return{evaluate:c}}_compile(t,u){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(t){throw new Error("Cannot run forEach on a Node interface")}map(t){throw new Error("Cannot run map on a Node interface")}_ifNode(t){if(!Ae(t))throw new TypeError("Callback function must return a Node");return t}traverse(t){t(this,null,null);function u(h,c){h.forEach(function(f,s,d){c(f,s,d),u(f,c)})}u(this,t)}transform(t){function u(h,c,f){var s=t(h,c,f);return s!==h?s:h.map(u)}return u(this,null,null)}filter(t){var u=[];return this.traverse(function(h,c,f){t(h,c,f)&&u.push(h)}),u}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(t){return t.cloneDeep()})}equals(t){return t?this.type===t.type&&ar(this,t):!1}toString(t){var u=this._getCustomString(t);return typeof u<"u"?u:this._toString(t)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(t){var u=this._getCustomString(t);return typeof u<"u"?u:this._toHTML(t)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(t){var u=this._getCustomString(t);return typeof u<"u"?u:this._toTex(t)}_toTex(t){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(t){if(t&&typeof t=="object")switch(typeof t.handler){case"object":case"undefined":return;case"function":return t.handler(this,t);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return a},{isClass:!0,isNode:!0});function xi(e){return e&&e.isIndexError?new Xe(e.index+1,e.min+1,e.max!==void 0?e.max+1:void 0):e}function Si(e){var{subset:r}=e;return function(a,n){try{if(Array.isArray(a))return r(a,n);if(a&&typeof a.subset=="function")return a.subset(n);if(typeof a=="string")return r(a,n);if(typeof a=="object"){if(!n.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Ue(a,n.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(t){throw xi(t)}}}var Ur="AccessorNode",Qo=["subset","Node"],es=G(Ur,Qo,e=>{var{subset:r,Node:i}=e,a=Si({subset:r});function n(u){return!(ir(u)||Cr(u)||We(u)||ot(u)||Bt(u)||vr(u)||Pe(u))}class t extends i{constructor(h,c){if(super(),!Ae(h))throw new TypeError('Node expected for parameter "object"');if(!Or(c))throw new TypeError('IndexNode expected for parameter "index"');this.object=h,this.index=c}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Ur}get isAccessorNode(){return!0}_compile(h,c){var f=this.object._compile(h,c),s=this.index._compile(h,c);if(this.index.isObjectProperty()){var d=this.index.getObjectProperty();return function(p,m,o){return Ue(f(p,m,o),d)}}else return function(p,m,o){var D=f(p,m,o),E=s(p,m,D);return a(D,E)}}forEach(h){h(this.object,"object",this),h(this.index,"index",this)}map(h){return new t(this._ifNode(h(this.object,"object",this)),this._ifNode(h(this.index,"index",this)))}clone(){return new t(this.object,this.index)}_toString(h){var c=this.object.toString(h);return n(this.object)&&(c="("+c+")"),c+this.index.toString(h)}_toHTML(h){var c=this.object.toHTML(h);return n(this.object)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c+this.index.toHTML(h)}_toTex(h){var c=this.object.toTex(h);return n(this.object)&&(c="\\left(' + object + '\\right)"),c+this.index.toTex(h)}toJSON(){return{mathjs:Ur,object:this.object,index:this.index}}static fromJSON(h){return new t(h.object,h.index)}}return Be(t,"name",Ur),t},{isClass:!0,isNode:!0}),zr="ArrayNode",rs=["Node"],ts=G(zr,rs,e=>{var{Node:r}=e;class i extends r{constructor(n){if(super(),this.items=n||[],!Array.isArray(this.items)||!this.items.every(Ae))throw new TypeError("Array containing Nodes expected")}get type(){return zr}get isArrayNode(){return!0}_compile(n,t){var u=er(this.items,function(f){return f._compile(n,t)}),h=n.config.matrix!=="Array";if(h){var c=n.matrix;return function(s,d,v){return c(er(u,function(p){return p(s,d,v)}))}}else return function(s,d,v){return er(u,function(p){return p(s,d,v)})}}forEach(n){for(var t=0;t<this.items.length;t++){var u=this.items[t];n(u,"items["+t+"]",this)}}map(n){for(var t=[],u=0;u<this.items.length;u++)t[u]=this._ifNode(n(this.items[u],"items["+u+"]",this));return new i(t)}clone(){return new i(this.items.slice(0))}_toString(n){var t=this.items.map(function(u){return u.toString(n)});return"["+t.join(", ")+"]"}toJSON(){return{mathjs:zr,items:this.items}}static fromJSON(n){return new i(n.items)}_toHTML(n){var t=this.items.map(function(u){return u.toHTML(n)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(n){function t(u,h){var c=u.some(Cr)&&!u.every(Cr),f=h||c,s=f?"&":"\\\\",d=u.map(function(v){return v.items?t(v.items,!h):v.toTex(n)}).join(s);return c||!f||f&&!h?"\\begin{bmatrix}"+d+"\\end{bmatrix}":d}return t(this.items,!1)}}return Be(i,"name",zr),i},{isClass:!0,isNode:!0});function ns(e){var{subset:r,matrix:i}=e;return function(n,t,u){try{if(Array.isArray(n)){var h=i(n).subset(t,u).valueOf();return h.forEach((c,f)=>{n[f]=c}),n}else{if(n&&typeof n.subset=="function")return n.subset(t,u);if(typeof n=="string")return r(n,t,u);if(typeof n=="object"){if(!t.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return Fr(n,t.getObjectProperty(),u),n}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(c){throw xi(c)}}}var Je=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function Pr(e,r){if(!r||r!=="auto")return e;for(var i=e;vr(i);)i=i.content;return i}function le(e,r,i,a){var n=e;r!=="keep"&&(n=e.getContent());for(var t=n.getIdentifier(),u=null,h=0;h<Je.length;h++)if(t in Je[h]){u=h;break}if(t==="OperatorNode:multiply"&&n.implicit&&i!=="show"){var c=Pr(n.args[0],r);!(We(c)&&a&&a.getIdentifier()==="OperatorNode:divide"&&wt(Pr(a.args[0],r)))&&!(c.getIdentifier()==="OperatorNode:divide"&&wt(Pr(c.args[0],r))&&We(Pr(c.args[1])))&&(u+=1)}return u}function yr(e,r){var i=e;r!=="keep"&&(i=e.getContent());var a=i.getIdentifier(),n=le(i,r);if(n===null)return null;var t=Je[n][a];if(J(t,"associativity")){if(t.associativity==="left")return"left";if(t.associativity==="right")return"right";throw Error("'"+a+"' has the invalid associativity '"+t.associativity+"'.")}return null}function Et(e,r,i){var a=i!=="keep"?e.getContent():e,n=i!=="keep"?e.getContent():r,t=a.getIdentifier(),u=n.getIdentifier(),h=le(a,i);if(h===null)return null;var c=Je[h][t];if(J(c,"associativeWith")&&c.associativeWith instanceof Array){for(var f=0;f<c.associativeWith.length;f++)if(c.associativeWith[f]===u)return!0;return!1}return null}var Hr="AssignmentNode",is=["subset","?matrix","Node"],as=G(Hr,is,e=>{var{subset:r,matrix:i,Node:a}=e,n=Si({subset:r}),t=ns({subset:r,matrix:i});function u(c,f,s){f||(f="keep");var d=le(c,f,s),v=le(c.value,f,s);return f==="all"||v!==null&&v<=d}class h extends a{constructor(f,s,d){if(super(),this.object=f,this.index=d?s:null,this.value=d||s,!Pe(f)&&!ir(f))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(Pe(f)&&f.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!Or(this.index))throw new TypeError('IndexNode expected as "index"');if(!Ae(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return Hr}get isAssignmentNode(){return!0}_compile(f,s){var d=this.object._compile(f,s),v=this.index?this.index._compile(f,s):null,p=this.value._compile(f,s),m=this.object.name;if(this.index)if(this.index.isObjectProperty()){var o=this.index.getObjectProperty();return function(F,N,w){var B=d(F,N,w),x=p(F,N,w);return Fr(B,o,x),x}}else{if(Pe(this.object))return function(F,N,w){var B=d(F,N,w),x=p(F,N,w),S=v(F,N,B);return F.set(m,t(B,S,x)),x};var D=this.object.object._compile(f,s);if(this.object.index.isObjectProperty()){var E=this.object.index.getObjectProperty();return function(F,N,w){var B=D(F,N,w),x=Ue(B,E),S=v(F,N,x),_=p(F,N,w);return Fr(B,E,t(x,S,_)),_}}else{var T=this.object.index._compile(f,s);return function(F,N,w){var B=D(F,N,w),x=T(F,N,B),S=n(B,x),_=v(F,N,S),I=p(F,N,w);return t(B,x,t(S,_,I)),I}}}else{if(!Pe(this.object))throw new TypeError("SymbolNode expected as object");return function(F,N,w){var B=p(F,N,w);return F.set(m,B),B}}}forEach(f){f(this.object,"object",this),this.index&&f(this.index,"index",this),f(this.value,"value",this)}map(f){var s=this._ifNode(f(this.object,"object",this)),d=this.index?this._ifNode(f(this.index,"index",this)):null,v=this._ifNode(f(this.value,"value",this));return new h(s,d,v)}clone(){return new h(this.object,this.index,this.value)}_toString(f){var s=this.object.toString(f),d=this.index?this.index.toString(f):"",v=this.value.toString(f);return u(this,f&&f.parenthesis,f&&f.implicit)&&(v="("+v+")"),s+d+" = "+v}toJSON(){return{mathjs:Hr,object:this.object,index:this.index,value:this.value}}static fromJSON(f){return new h(f.object,f.index,f.value)}_toHTML(f){var s=this.object.toHTML(f),d=this.index?this.index.toHTML(f):"",v=this.value.toHTML(f);return u(this,f&&f.parenthesis,f&&f.implicit)&&(v='<span class="math-paranthesis math-round-parenthesis">(</span>'+v+'<span class="math-paranthesis math-round-parenthesis">)</span>'),s+d+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+v}_toTex(f){var s=this.object.toTex(f),d=this.index?this.index.toTex(f):"",v=this.value.toTex(f);return u(this,f&&f.parenthesis,f&&f.implicit)&&(v="\\left(".concat(v,"\\right)")),s+d+"="+v}}return Be(h,"name",Hr),h},{isClass:!0,isNode:!0}),kr="BlockNode",us=["ResultSet","Node"],os=G(kr,us,e=>{var{ResultSet:r,Node:i}=e;class a extends i{constructor(t){if(super(),!Array.isArray(t))throw new Error("Array expected");this.blocks=t.map(function(u){var h=u&&u.node,c=u&&u.visible!==void 0?u.visible:!0;if(!Ae(h))throw new TypeError('Property "node" must be a Node');if(typeof c!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:h,visible:c}})}get type(){return kr}get isBlockNode(){return!0}_compile(t,u){var h=er(this.blocks,function(c){return{evaluate:c.node._compile(t,u),visible:c.visible}});return function(f,s,d){var v=[];return ui(h,function(m){var o=m.evaluate(f,s,d);m.visible&&v.push(o)}),new r(v)}}forEach(t){for(var u=0;u<this.blocks.length;u++)t(this.blocks[u].node,"blocks["+u+"].node",this)}map(t){for(var u=[],h=0;h<this.blocks.length;h++){var c=this.blocks[h],f=this._ifNode(t(c.node,"blocks["+h+"].node",this));u[h]={node:f,visible:c.visible}}return new a(u)}clone(){var t=this.blocks.map(function(u){return{node:u.node,visible:u.visible}});return new a(t)}_toString(t){return this.blocks.map(function(u){return u.node.toString(t)+(u.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:kr,blocks:this.blocks}}static fromJSON(t){return new a(t.blocks)}_toHTML(t){return this.blocks.map(function(u){return u.node.toHTML(t)+(u.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(t){return this.blocks.map(function(u){return u.node.toTex(t)+(u.visible?"":";")}).join(`\\;\\;
`)}}return Be(a,"name",kr),a},{isClass:!0,isNode:!0}),qr="ConditionalNode",ss=["Node"],fs=G(qr,ss,e=>{var{Node:r}=e;function i(n){if(typeof n=="number"||typeof n=="boolean"||typeof n=="string")return!!n;if(n){if(De(n))return!n.isZero();if(Qe(n))return!!(n.re||n.im);if(Ve(n))return!!n.value}if(n==null)return!1;throw new TypeError('Unsupported type of condition "'+Le(n)+'"')}class a extends r{constructor(t,u,h){if(super(),!Ae(t))throw new TypeError("Parameter condition must be a Node");if(!Ae(u))throw new TypeError("Parameter trueExpr must be a Node");if(!Ae(h))throw new TypeError("Parameter falseExpr must be a Node");this.condition=t,this.trueExpr=u,this.falseExpr=h}get type(){return qr}get isConditionalNode(){return!0}_compile(t,u){var h=this.condition._compile(t,u),c=this.trueExpr._compile(t,u),f=this.falseExpr._compile(t,u);return function(d,v,p){return i(h(d,v,p))?c(d,v,p):f(d,v,p)}}forEach(t){t(this.condition,"condition",this),t(this.trueExpr,"trueExpr",this),t(this.falseExpr,"falseExpr",this)}map(t){return new a(this._ifNode(t(this.condition,"condition",this)),this._ifNode(t(this.trueExpr,"trueExpr",this)),this._ifNode(t(this.falseExpr,"falseExpr",this)))}clone(){return new a(this.condition,this.trueExpr,this.falseExpr)}_toString(t){var u=t&&t.parenthesis?t.parenthesis:"keep",h=le(this,u,t&&t.implicit),c=this.condition.toString(t),f=le(this.condition,u,t&&t.implicit);(u==="all"||this.condition.type==="OperatorNode"||f!==null&&f<=h)&&(c="("+c+")");var s=this.trueExpr.toString(t),d=le(this.trueExpr,u,t&&t.implicit);(u==="all"||this.trueExpr.type==="OperatorNode"||d!==null&&d<=h)&&(s="("+s+")");var v=this.falseExpr.toString(t),p=le(this.falseExpr,u,t&&t.implicit);return(u==="all"||this.falseExpr.type==="OperatorNode"||p!==null&&p<=h)&&(v="("+v+")"),c+" ? "+s+" : "+v}toJSON(){return{mathjs:qr,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(t){return new a(t.condition,t.trueExpr,t.falseExpr)}_toHTML(t){var u=t&&t.parenthesis?t.parenthesis:"keep",h=le(this,u,t&&t.implicit),c=this.condition.toHTML(t),f=le(this.condition,u,t&&t.implicit);(u==="all"||this.condition.type==="OperatorNode"||f!==null&&f<=h)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.trueExpr.toHTML(t),d=le(this.trueExpr,u,t&&t.implicit);(u==="all"||this.trueExpr.type==="OperatorNode"||d!==null&&d<=h)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>');var v=this.falseExpr.toHTML(t),p=le(this.falseExpr,u,t&&t.implicit);return(u==="all"||this.falseExpr.type==="OperatorNode"||p!==null&&p<=h)&&(v='<span class="math-parenthesis math-round-parenthesis">(</span>'+v+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c+'<span class="math-operator math-conditional-operator">?</span>'+s+'<span class="math-operator math-conditional-operator">:</span>'+v}_toTex(t){return"\\begin{cases} {"+this.trueExpr.toTex(t)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(t)+"}\\\\{"+this.falseExpr.toTex(t)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Be(a,"name",qr),a},{isClass:!0,isNode:!0}),St={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},ie={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},Cn={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(ie.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(ie.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(ie.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(ie.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(ie.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(ie.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(ie.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(ie.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(ie.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(ie.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(ie.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(ie.bitAnd,"${args[1]}\\right)")},bitNot:{1:ie.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(ie.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(ie.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(ie.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(ie.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(ie.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(ie.and,"${args[1]}\\right)")},not:{1:ie.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(ie.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(ie.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(ie.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(ie.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(ie.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(ie.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(ie.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(ie.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(ie.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(ie.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(ie.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(ie.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(ie.to,"${args[1]}\\right)")},numeric:function(r,i){return r.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(St.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},ls="\\mathrm{${name}}\\left(${args}\\right)",Fn={deg:"^\\circ"};function Ot(e){return Hi(e,{preserveFormatting:!0})}function Oi(e,r){return r=typeof r>"u"?!1:r,r?J(Fn,e)?Fn[e]:"\\mathrm{"+Ot(e)+"}":J(St,e)?St[e]:Ot(e)}var Gr="ConstantNode",cs=["Node"],ps=G(Gr,cs,e=>{var{Node:r}=e;class i extends r{constructor(n){super(),this.value=n}get type(){return Gr}get isConstantNode(){return!0}_compile(n,t){var u=this.value;return function(){return u}}forEach(n){}map(n){return this.clone()}clone(){return new i(this.value)}_toString(n){return we(this.value,n)}_toHTML(n){var t=this._toString(n);switch(Le(this.value)){case"number":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>"}}toJSON(){return{mathjs:Gr,value:this.value}}static fromJSON(n){return new i(n.value)}_toTex(n){var t=this._toString(n),u=Le(this.value);switch(u){case"string":return"\\mathtt{"+Ot(t)+"}";case"number":case"BigNumber":{var h=u==="BigNumber"?this.value.isFinite():isFinite(this.value);if(!h)return this.value.valueOf()<0?"-\\infty":"\\infty";var c=t.toLowerCase().indexOf("e");return c!==-1?t.substring(0,c)+"\\cdot10^{"+t.substring(c+1)+"}":t}case"Fraction":return this.value.toLatex();default:return t}}}return Be(i,"name",Gr),i},{isClass:!0,isNode:!0}),Vr="FunctionAssignmentNode",vs=["typed","Node"],hs=G(Vr,vs,e=>{var{typed:r,Node:i}=e;function a(t,u,h){var c=le(t,u,h),f=le(t.expr,u,h);return u==="all"||f!==null&&f<=c}class n extends i{constructor(u,h,c){if(super(),typeof u!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(h))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!Ae(c))throw new TypeError('Node expected for parameter "expr"');if(Fi.has(u))throw new Error('Illegal function name, "'+u+'" is a reserved keyword');var f=new Set;for(var s of h){var d=typeof s=="string"?s:s.name;if(f.has(d))throw new Error('Duplicate parameter name "'.concat(d,'"'));f.add(d)}this.name=u,this.params=h.map(function(v){return v&&v.name||v}),this.types=h.map(function(v){return v&&v.type||"any"}),this.expr=c}get type(){return Vr}get isFunctionAssignmentNode(){return!0}_compile(u,h){var c=Object.create(h);ui(this.params,function(m){c[m]=!0});var f=this.expr._compile(u,c),s=this.name,d=this.params,v=Kt(this.types,","),p=s+"("+Kt(this.params,", ")+")";return function(o,D,E){var T={};T[v]=function(){for(var F=Object.create(D),N=0;N<d.length;N++)F[d[N]]=arguments[N];return f(o,F,E)};var g=r(s,T);return g.syntax=p,o.set(s,g),g}}forEach(u){u(this.expr,"expr",this)}map(u){var h=this._ifNode(u(this.expr,"expr",this));return new n(this.name,this.params.slice(0),h)}clone(){return new n(this.name,this.params.slice(0),this.expr)}_toString(u){var h=u&&u.parenthesis?u.parenthesis:"keep",c=this.expr.toString(u);return a(this,h,u&&u.implicit)&&(c="("+c+")"),this.name+"("+this.params.join(", ")+") = "+c}toJSON(){var u=this.types;return{mathjs:Vr,name:this.name,params:this.params.map(function(h,c){return{name:h,type:u[c]}}),expr:this.expr}}static fromJSON(u){return new n(u.name,u.params,u.expr)}_toHTML(u){for(var h=u&&u.parenthesis?u.parenthesis:"keep",c=[],f=0;f<this.params.length;f++)c.push('<span class="math-symbol math-parameter">'+ke(this.params[f])+"</span>");var s=this.expr.toHTML(u);return a(this,h,u&&u.implicit)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+ke(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+s}_toTex(u){var h=u&&u.parenthesis?u.parenthesis:"keep",c=this.expr.toTex(u);return a(this,h,u&&u.implicit)&&(c="\\left(".concat(c,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(Oi).join(",")+"\\right)="+c}}return Be(n,"name",Vr),n},{isClass:!0,isNode:!0}),Wr="IndexNode",ms=["Node","size"],ds=G(Wr,ms,e=>{var{Node:r,size:i}=e;class a extends r{constructor(t,u){if(super(),this.dimensions=t,this.dotNotation=u||!1,!Array.isArray(t)||!t.every(Ae))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return Wr}get isIndexNode(){return!0}_compile(t,u){var h=er(this.dimensions,function(f,s){var d=f.filter(m=>m.isSymbolNode&&m.name==="end").length>0;if(d){var v=Object.create(u);v.end=!0;var p=f._compile(t,v);return function(o,D,E){if(!Ne(E)&&!me(E)&&!ze(E))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+Le(E));var T=i(E).valueOf(),g=Object.create(D);return g.end=T[s],p(o,g,E)}}else return f._compile(t,u)}),c=Ue(t,"index");return function(s,d,v){var p=er(h,function(m){return m(s,d,v)});return c(...p)}}forEach(t){for(var u=0;u<this.dimensions.length;u++)t(this.dimensions[u],"dimensions["+u+"]",this)}map(t){for(var u=[],h=0;h<this.dimensions.length;h++)u[h]=this._ifNode(t(this.dimensions[h],"dimensions["+h+"]",this));return new a(u,this.dotNotation)}clone(){return new a(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&We(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(t){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:Wr,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(t){return new a(t.dimensions,t.dotNotation)}_toHTML(t){for(var u=[],h=0;h<this.dimensions.length;h++)u[h]=this.dimensions[h].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+ke(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+u.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(t){var u=this.dimensions.map(function(h){return h.toTex(t)});return this.dotNotation?"."+this.getObjectProperty():"_{"+u.join(",")+"}"}}return Be(a,"name",Wr),a},{isClass:!0,isNode:!0}),jr="ObjectNode",Ds=["Node"],gs=G(jr,Ds,e=>{var{Node:r}=e;class i extends r{constructor(n){if(super(),this.properties=n||{},n&&(typeof n!="object"||!Object.keys(n).every(function(t){return Ae(n[t])})))throw new TypeError("Object containing Nodes expected")}get type(){return jr}get isObjectNode(){return!0}_compile(n,t){var u={};for(var h in this.properties)if(J(this.properties,h)){var c=cr(h),f=JSON.parse(c),s=Ue(this.properties,h);u[f]=s._compile(n,t)}return function(v,p,m){var o={};for(var D in u)J(u,D)&&(o[D]=u[D](v,p,m));return o}}forEach(n){for(var t in this.properties)J(this.properties,t)&&n(this.properties[t],"properties["+cr(t)+"]",this)}map(n){var t={};for(var u in this.properties)J(this.properties,u)&&(t[u]=this._ifNode(n(this.properties[u],"properties["+cr(u)+"]",this)));return new i(t)}clone(){var n={};for(var t in this.properties)J(this.properties,t)&&(n[t]=this.properties[t]);return new i(n)}_toString(n){var t=[];for(var u in this.properties)J(this.properties,u)&&t.push(cr(u)+": "+this.properties[u].toString(n));return"{"+t.join(", ")+"}"}toJSON(){return{mathjs:jr,properties:this.properties}}static fromJSON(n){return new i(n.properties)}_toHTML(n){var t=[];for(var u in this.properties)J(this.properties,u)&&t.push('<span class="math-symbol math-property">'+ke(u)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[u].toHTML(n));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(n){var t=[];for(var u in this.properties)J(this.properties,u)&&t.push("\\mathbf{"+u+":} & "+this.properties[u].toTex(n)+"\\\\");var h="\\left\\{\\begin{array}{ll}"+t.join(`
`)+"\\end{array}\\right\\}";return h}}return Be(i,"name",jr),i},{isClass:!0,isNode:!0});function Nr(e,r){return new da(e,new Rt(r),new Set(Object.keys(r)))}var Jr="OperatorNode",Es=["Node"],ys=G(Jr,Es,e=>{var{Node:r}=e;function i(t,u){var h=t;if(u==="auto")for(;vr(h);)h=h.content;return We(h)?!0:Tr(h)?i(h.args[0],u):!1}function a(t,u,h,c,f){var s=le(t,u,h),d=yr(t,u);if(u==="all"||c.length>2&&t.getIdentifier()!=="OperatorNode:add"&&t.getIdentifier()!=="OperatorNode:multiply")return c.map(function(_){switch(_.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var v;switch(c.length){case 0:v=[];break;case 1:{var p=le(c[0],u,h,t);if(f&&p!==null){var m,o;if(u==="keep"?(m=c[0].getIdentifier(),o=t.getIdentifier()):(m=c[0].getContent().getIdentifier(),o=t.getContent().getIdentifier()),Je[s][o].latexLeftParens===!1){v=[!1];break}if(Je[p][m].latexParens===!1){v=[!1];break}}if(p===null){v=[!1];break}if(p<=s){v=[!0];break}v=[!1]}break;case 2:{var D,E=le(c[0],u,h,t),T=Et(t,c[0],u);E===null?D=!1:E===s&&d==="right"&&!T||E<s?D=!0:D=!1;var g,F=le(c[1],u,h,t),N=Et(t,c[1],u);if(F===null?g=!1:F===s&&d==="left"&&!N||F<s?g=!0:g=!1,f){var w,B,x;u==="keep"?(w=t.getIdentifier(),B=t.args[0].getIdentifier(),x=t.args[1].getIdentifier()):(w=t.getContent().getIdentifier(),B=t.args[0].getContent().getIdentifier(),x=t.args[1].getContent().getIdentifier()),E!==null&&(Je[s][w].latexLeftParens===!1&&(D=!1),Je[E][B].latexParens===!1&&(D=!1)),F!==null&&(Je[s][w].latexRightParens===!1&&(g=!1),Je[F][x].latexParens===!1&&(g=!1))}v=[D,g]}break;default:(t.getIdentifier()==="OperatorNode:add"||t.getIdentifier()==="OperatorNode:multiply")&&(v=c.map(function(_){var I=le(_,u,h,t),L=Et(t,_,u),$=yr(_,u);return I===null?!1:s===I&&d===$&&!L?!0:I<s}));break}if(c.length>=2&&t.getIdentifier()==="OperatorNode:multiply"&&t.implicit&&u!=="all"&&h==="hide")for(var S=1;S<v.length;++S)i(c[S],u)&&!v[S-1]&&(u!=="keep"||!vr(c[S-1]))&&(v[S]=!0);return v}class n extends r{constructor(u,h,c,f,s){if(super(),typeof u!="string")throw new TypeError('string expected for parameter "op"');if(typeof h!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(c)||!c.every(Ae))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=f===!0,this.isPercentage=s===!0,this.op=u,this.fn=h,this.args=c||[]}get type(){return Jr}get isOperatorNode(){return!0}_compile(u,h){if(typeof this.fn!="string"||!Mt(u,this.fn))throw u[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var c=Ue(u,this.fn),f=er(this.args,function(m){return m._compile(u,h)});if(typeof c=="function"&&c.rawArgs===!0){var s=this.args;return function(o,D,E){return c(s,u,Nr(o,D))}}else if(f.length===1){var d=f[0];return function(o,D,E){return c(d(o,D,E))}}else if(f.length===2){var v=f[0],p=f[1];return function(o,D,E){return c(v(o,D,E),p(o,D,E))}}else return function(o,D,E){return c.apply(null,er(f,function(T){return T(o,D,E)}))}}forEach(u){for(var h=0;h<this.args.length;h++)u(this.args[h],"args["+h+"]",this)}map(u){for(var h=[],c=0;c<this.args.length;c++)h[c]=this._ifNode(u(this.args[c],"args["+c+"]",this));return new n(this.op,this.fn,h,this.implicit,this.isPercentage)}clone(){return new n(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(u){var h=u&&u.parenthesis?u.parenthesis:"keep",c=u&&u.implicit?u.implicit:"hide",f=this.args,s=a(this,h,c,f,!1);if(f.length===1){var d=yr(this,h),v=f[0].toString(u);s[0]&&(v="("+v+")");var p=/[a-zA-Z]+/.test(this.op);return d==="right"?this.op+(p?" ":"")+v:d==="left"?v+(p?" ":"")+this.op:v+this.op}else if(f.length===2){var m=f[0].toString(u),o=f[1].toString(u);return s[0]&&(m="("+m+")"),s[1]&&(o="("+o+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&c==="hide"?m+" "+o:m+" "+this.op+" "+o}else if(f.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var D=f.map(function(E,T){return E=E.toString(u),s[T]&&(E="("+E+")"),E});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&c==="hide"?D.join(" "):D.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:Jr,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(u){return new n(u.op,u.fn,u.args,u.implicit,u.isPercentage)}_toHTML(u){var h=u&&u.parenthesis?u.parenthesis:"keep",c=u&&u.implicit?u.implicit:"hide",f=this.args,s=a(this,h,c,f,!1);if(f.length===1){var d=yr(this,h),v=f[0].toHTML(u);return s[0]&&(v='<span class="math-parenthesis math-round-parenthesis">(</span>'+v+'<span class="math-parenthesis math-round-parenthesis">)</span>'),d==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+ke(this.op)+"</span>"+v:v+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+ke(this.op)+"</span>"}else if(f.length===2){var p=f[0].toHTML(u),m=f[1].toHTML(u);return s[0]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),s[1]&&(m='<span class="math-parenthesis math-round-parenthesis">(</span>'+m+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&c==="hide"?p+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+m:p+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ke(this.op)+"</span>"+m}else{var o=f.map(function(D,E){return D=D.toHTML(u),s[E]&&(D='<span class="math-parenthesis math-round-parenthesis">(</span>'+D+'<span class="math-parenthesis math-round-parenthesis">)</span>'),D});return f.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&c==="hide"?o.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):o.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ke(this.op)+"</span>"):'<span class="math-function">'+ke(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+o.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(u){var h=u&&u.parenthesis?u.parenthesis:"keep",c=u&&u.implicit?u.implicit:"hide",f=this.args,s=a(this,h,c,f,!0),d=ie[this.fn];if(d=typeof d>"u"?this.op:d,f.length===1){var v=yr(this,h),p=f[0].toTex(u);return s[0]&&(p="\\left(".concat(p,"\\right)")),v==="right"?d+p:p+d}else if(f.length===2){var m=f[0],o=m.toTex(u);s[0]&&(o="\\left(".concat(o,"\\right)"));var D=f[1],E=D.toTex(u);s[1]&&(E="\\left(".concat(E,"\\right)"));var T;switch(h==="keep"?T=m.getIdentifier():T=m.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return d+"{"+o+"}{"+E+"}";case"OperatorNode:pow":switch(o="{"+o+"}",E="{"+E+"}",T){case"ConditionalNode":case"OperatorNode:divide":o="\\left(".concat(o,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&c==="hide")return o+"~"+E}return o+d+E}else if(f.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var g=f.map(function(F,N){return F=F.toTex(u),s[N]&&(F="\\left(".concat(F,"\\right)")),F});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&c==="hide"?g.join("~"):g.join(d)}else return"\\mathrm{"+this.fn+"}\\left("+f.map(function(F){return F.toTex(u)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Be(n,"name",Jr),n},{isClass:!0,isNode:!0}),Yr="ParenthesisNode",ws=["Node"],Ns=G(Yr,ws,e=>{var{Node:r}=e;class i extends r{constructor(n){if(super(),!Ae(n))throw new TypeError('Node expected for parameter "content"');this.content=n}get type(){return Yr}get isParenthesisNode(){return!0}_compile(n,t){return this.content._compile(n,t)}getContent(){return this.content.getContent()}forEach(n){n(this.content,"content",this)}map(n){var t=n(this.content,"content",this);return new i(t)}clone(){return new i(this.content)}_toString(n){return!n||n&&!n.parenthesis||n&&n.parenthesis==="keep"?"("+this.content.toString(n)+")":this.content.toString(n)}toJSON(){return{mathjs:Yr,content:this.content}}static fromJSON(n){return new i(n.content)}_toHTML(n){return!n||n&&!n.parenthesis||n&&n.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(n)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(n)}_toTex(n){return!n||n&&!n.parenthesis||n&&n.parenthesis==="keep"?"\\left(".concat(this.content.toTex(n),"\\right)"):this.content.toTex(n)}}return Be(i,"name",Yr),i},{isClass:!0,isNode:!0}),Zr="RangeNode",As=["Node"],bs=G(Zr,As,e=>{var{Node:r}=e;function i(n,t,u){var h=le(n,t,u),c={},f=le(n.start,t,u);if(c.start=f!==null&&f<=h||t==="all",n.step){var s=le(n.step,t,u);c.step=s!==null&&s<=h||t==="all"}var d=le(n.end,t,u);return c.end=d!==null&&d<=h||t==="all",c}class a extends r{constructor(t,u,h){if(super(),!Ae(t))throw new TypeError("Node expected");if(!Ae(u))throw new TypeError("Node expected");if(h&&!Ae(h))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=t,this.end=u,this.step=h||null}get type(){return Zr}get isRangeNode(){return!0}needsEnd(){var t=this.filter(function(u){return Pe(u)&&u.name==="end"});return t.length>0}_compile(t,u){var h=t.range,c=this.start._compile(t,u),f=this.end._compile(t,u);if(this.step){var s=this.step._compile(t,u);return function(v,p,m){return h(c(v,p,m),f(v,p,m),s(v,p,m))}}else return function(v,p,m){return h(c(v,p,m),f(v,p,m))}}forEach(t){t(this.start,"start",this),t(this.end,"end",this),this.step&&t(this.step,"step",this)}map(t){return new a(this._ifNode(t(this.start,"start",this)),this._ifNode(t(this.end,"end",this)),this.step&&this._ifNode(t(this.step,"step",this)))}clone(){return new a(this.start,this.end,this.step&&this.step)}_toString(t){var u=t&&t.parenthesis?t.parenthesis:"keep",h=i(this,u,t&&t.implicit),c,f=this.start.toString(t);if(h.start&&(f="("+f+")"),c=f,this.step){var s=this.step.toString(t);h.step&&(s="("+s+")"),c+=":"+s}var d=this.end.toString(t);return h.end&&(d="("+d+")"),c+=":"+d,c}toJSON(){return{mathjs:Zr,start:this.start,end:this.end,step:this.step}}static fromJSON(t){return new a(t.start,t.end,t.step)}_toHTML(t){var u=t&&t.parenthesis?t.parenthesis:"keep",h=i(this,u,t&&t.implicit),c,f=this.start.toHTML(t);if(h.start&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c=f,this.step){var s=this.step.toHTML(t);h.step&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c+='<span class="math-operator math-range-operator">:</span>'+s}var d=this.end.toHTML(t);return h.end&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c+='<span class="math-operator math-range-operator">:</span>'+d,c}_toTex(t){var u=t&&t.parenthesis?t.parenthesis:"keep",h=i(this,u,t&&t.implicit),c=this.start.toTex(t);if(h.start&&(c="\\left(".concat(c,"\\right)")),this.step){var f=this.step.toTex(t);h.step&&(f="\\left(".concat(f,"\\right)")),c+=":"+f}var s=this.end.toTex(t);return h.end&&(s="\\left(".concat(s,"\\right)")),c+=":"+s,c}}return Be(a,"name",Zr),a},{isClass:!0,isNode:!0}),Xr="RelationalNode",Cs=["Node"],Fs=G(Xr,Cs,e=>{var{Node:r}=e,i={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class a extends r{constructor(t,u){if(super(),!Array.isArray(t))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(u))throw new TypeError("Parameter params must be an array");if(t.length!==u.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=t,this.params=u}get type(){return Xr}get isRelationalNode(){return!0}_compile(t,u){var h=this,c=this.params.map(f=>f._compile(t,u));return function(s,d,v){for(var p,m=c[0](s,d,v),o=0;o<h.conditionals.length;o++){p=m,m=c[o+1](s,d,v);var D=Ue(t,h.conditionals[o]);if(!D(p,m))return!1}return!0}}forEach(t){this.params.forEach((u,h)=>t(u,"params["+h+"]",this),this)}map(t){return new a(this.conditionals.slice(),this.params.map((u,h)=>this._ifNode(t(u,"params["+h+"]",this)),this))}clone(){return new a(this.conditionals,this.params)}_toString(t){for(var u=t&&t.parenthesis?t.parenthesis:"keep",h=le(this,u,t&&t.implicit),c=this.params.map(function(d,v){var p=le(d,u,t&&t.implicit);return u==="all"||p!==null&&p<=h?"("+d.toString(t)+")":d.toString(t)}),f=c[0],s=0;s<this.conditionals.length;s++)f+=" "+i[this.conditionals[s]],f+=" "+c[s+1];return f}toJSON(){return{mathjs:Xr,conditionals:this.conditionals,params:this.params}}static fromJSON(t){return new a(t.conditionals,t.params)}_toHTML(t){for(var u=t&&t.parenthesis?t.parenthesis:"keep",h=le(this,u,t&&t.implicit),c=this.params.map(function(d,v){var p=le(d,u,t&&t.implicit);return u==="all"||p!==null&&p<=h?'<span class="math-parenthesis math-round-parenthesis">(</span>'+d.toHTML(t)+'<span class="math-parenthesis math-round-parenthesis">)</span>':d.toHTML(t)}),f=c[0],s=0;s<this.conditionals.length;s++)f+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ke(i[this.conditionals[s]])+"</span>"+c[s+1];return f}_toTex(t){for(var u=t&&t.parenthesis?t.parenthesis:"keep",h=le(this,u,t&&t.implicit),c=this.params.map(function(d,v){var p=le(d,u,t&&t.implicit);return u==="all"||p!==null&&p<=h?"\\left("+d.toTex(t)+"\right)":d.toTex(t)}),f=c[0],s=0;s<this.conditionals.length;s++)f+=ie[this.conditionals[s]]+c[s+1];return f}}return Be(a,"name",Xr),a},{isClass:!0,isNode:!0}),xs="SymbolNode",Ss=["math","?Unit","Node"],Os=G(xs,Ss,e=>{var{math:r,Unit:i,Node:a}=e;function n(u){return i?i.isValuelessUnit(u):!1}class t extends a{constructor(h){if(super(),typeof h!="string")throw new TypeError('String expected for parameter "name"');this.name=h}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(h,c){var f=this.name;if(c[f]===!0)return function(d,v,p){return Ue(v,f)};if(f in h)return function(d,v,p){return d.has(f)?d.get(f):Ue(h,f)};var s=n(f);return function(d,v,p){return d.has(f)?d.get(f):s?new i(null,f):t.onUndefinedSymbol(f)}}forEach(h){}map(h){return this.clone()}static onUndefinedSymbol(h){throw new Error("Undefined symbol "+h)}clone(){return new t(this.name)}_toString(h){return this.name}_toHTML(h){var c=ke(this.name);return c==="true"||c==="false"?'<span class="math-symbol math-boolean">'+c+"</span>":c==="i"?'<span class="math-symbol math-imaginary-symbol">'+c+"</span>":c==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+c+"</span>":c==="NaN"?'<span class="math-symbol math-nan-symbol">'+c+"</span>":c==="null"?'<span class="math-symbol math-null-symbol">'+c+"</span>":c==="undefined"?'<span class="math-symbol math-undefined-symbol">'+c+"</span>":'<span class="math-symbol">'+c+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(h){return new t(h.name)}_toTex(h){var c=!1;typeof r[this.name]>"u"&&n(this.name)&&(c=!0);var f=Oi(this.name,c);return f[0]==="\\"?f:" "+f}}return t},{isClass:!0,isNode:!0}),Kr="FunctionNode",Ts=["math","Node","SymbolNode"],Bs=G(Kr,Ts,e=>{var r,{math:i,Node:a,SymbolNode:n}=e,t=c=>we(c,{truncate:78});function u(c,f,s){for(var d="",v=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,p=0,m;(m=v.exec(c))!==null;)if(d+=c.substring(p,m.index),p=m.index,m[0]==="$$")d+="$",p++;else{p+=m[0].length;var o=f[m[1]];if(!o)throw new ReferenceError("Template: Property "+m[1]+" does not exist.");if(m[2]===void 0)switch(typeof o){case"string":d+=o;break;case"object":if(Ae(o))d+=o.toTex(s);else if(Array.isArray(o))d+=o.map(function(D,E){if(Ae(D))return D.toTex(s);throw new TypeError("Template: "+m[1]+"["+E+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+m[1]+" has to be a Node, String or array of Nodes")}else if(Ae(o[m[2]]&&o[m[2]]))d+=o[m[2]].toTex(s);else throw new TypeError("Template: "+m[1]+"["+m[2]+"] is not a Node.")}return d+=c.slice(p),d}class h extends a{constructor(f,s){if(super(),typeof f=="string"&&(f=new n(f)),!Ae(f))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(s)||!s.every(Ae))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=f,this.args=s||[]}get name(){return this.fn.name||""}get type(){return Kr}get isFunctionNode(){return!0}_compile(f,s){var d=this.args.map(x=>x._compile(f,s));if(Pe(this.fn)){var v=this.fn.name;if(s[v]){var E=this.args;return function(S,_,I){var L=Ue(_,v);if(typeof L!="function")throw new TypeError("Argument '".concat(v,"' was not a function; received: ").concat(t(L)));if(L.rawArgs)return L(E,f,Nr(S,_));var $=d.map(U=>U(S,_,I));return L.apply(L,$)}}else{var p=v in f?Ue(f,v):void 0,m=typeof p=="function"&&p.rawArgs===!0,o=x=>{var S;if(x.has(v))S=x.get(v);else if(v in f)S=Ue(f,v);else return h.onUndefinedFunction(v);if(typeof S=="function")return S;throw new TypeError("'".concat(v,`' is not a function; its value is:
  `).concat(t(S)))};if(m){var D=this.args;return function(S,_,I){var L=o(S);return L(D,f,Nr(S,_))}}else switch(d.length){case 0:return function(S,_,I){var L=o(S);return L()};case 1:return function(S,_,I){var L=o(S),$=d[0];return L($(S,_,I))};case 2:return function(S,_,I){var L=o(S),$=d[0],U=d[1];return L($(S,_,I),U(S,_,I))};default:return function(S,_,I){var L=o(S),$=d.map(U=>U(S,_,I));return L(...$)}}}}else if(ir(this.fn)&&Or(this.fn.index)&&this.fn.index.isObjectProperty()){var T=this.fn.object._compile(f,s),g=this.fn.index.getObjectProperty(),F=this.args;return function(S,_,I){var L=T(S,_,I),$=va(L,g);if($!=null&&$.rawArgs)return $(F,f,Nr(S,_));var U=d.map(j=>j(S,_,I));return $.apply(L,U)}}else{var N=this.fn.toString(),w=this.fn._compile(f,s),B=this.args;return function(S,_,I){var L=w(S,_,I);if(typeof L!="function")throw new TypeError("Expression '".concat(N,"' did not evaluate to a function; value is:")+`
  `.concat(t(L)));if(L.rawArgs)return L(B,f,Nr(S,_));var $=d.map(U=>U(S,_,I));return L.apply(L,$)}}}forEach(f){f(this.fn,"fn",this);for(var s=0;s<this.args.length;s++)f(this.args[s],"args["+s+"]",this)}map(f){for(var s=this._ifNode(f(this.fn,"fn",this)),d=[],v=0;v<this.args.length;v++)d[v]=this._ifNode(f(this.args[v],"args["+v+"]",this));return new h(s,d)}clone(){return new h(this.fn,this.args.slice(0))}toString(f){var s,d=this.fn.toString(f);return f&&typeof f.handler=="object"&&J(f.handler,d)&&(s=f.handler[d](this,f)),typeof s<"u"?s:super.toString(f)}_toString(f){var s=this.args.map(function(v){return v.toString(f)}),d=Tt(this.fn)?"("+this.fn.toString(f)+")":this.fn.toString(f);return d+"("+s.join(", ")+")"}toJSON(){return{mathjs:Kr,fn:this.fn,args:this.args}}_toHTML(f){var s=this.args.map(function(d){return d.toHTML(f)});return'<span class="math-function">'+ke(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(f){var s;return f&&typeof f.handler=="object"&&J(f.handler,this.name)&&(s=f.handler[this.name](this,f)),typeof s<"u"?s:super.toTex(f)}_toTex(f){var s=this.args.map(function(p){return p.toTex(f)}),d;Cn[this.name]&&(d=Cn[this.name]),i[this.name]&&(typeof i[this.name].toTex=="function"||typeof i[this.name].toTex=="object"||typeof i[this.name].toTex=="string")&&(d=i[this.name].toTex);var v;switch(typeof d){case"function":v=d(this,f);break;case"string":v=u(d,this,f);break;case"object":switch(typeof d[s.length]){case"function":v=d[s.length](this,f);break;case"string":v=u(d[s.length],this,f);break}}return typeof v<"u"?v:u(ls,this,f)}getIdentifier(){return this.type+":"+this.name}}return r=h,Be(h,"name",Kr),Be(h,"onUndefinedFunction",function(c){throw new Error("Undefined function "+c)}),Be(h,"fromJSON",function(c){return new r(c.fn,c.args)}),h},{isClass:!0,isNode:!0}),xn="parse",_s=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],Ms=G(xn,_s,e=>{var{typed:r,numeric:i,config:a,AccessorNode:n,ArrayNode:t,AssignmentNode:u,BlockNode:h,ConditionalNode:c,ConstantNode:f,FunctionAssignmentNode:s,FunctionNode:d,IndexNode:v,ObjectNode:p,OperatorNode:m,ParenthesisNode:o,RangeNode:D,RelationalNode:E,SymbolNode:T}=e,g=r(xn,{string:function(C){return ae(C,{})},"Array | Matrix":function(C){return F(C,{})},"string, Object":function(C,M){var k=M.nodes!==void 0?M.nodes:{};return ae(C,k)},"Array | Matrix, Object":F});function F(l){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=C.nodes!==void 0?C.nodes:{};return Ce(l,function(k){if(typeof k!="string")throw new TypeError("String expected");return ae(k,M)})}var N={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},w={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},B={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},x={true:!0,false:!1,null:null,undefined:void 0},S=["NaN","Infinity"],_={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function I(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:N.NULL,nestingLevel:0,conditionalLevel:null}}function L(l,C){return l.expression.substr(l.index,C)}function $(l){return L(l,1)}function U(l){l.index++}function j(l){return l.expression.charAt(l.index-1)}function q(l){return l.expression.charAt(l.index+1)}function y(l){for(l.tokenType=N.NULL,l.token="",l.comment="";;){if($(l)==="#")for(;$(l)!==`
`&&$(l)!=="";)l.comment+=$(l),U(l);if(g.isWhitespace($(l),l.nestingLevel))U(l);else break}if($(l)===""){l.tokenType=N.DELIMITER;return}if($(l)===`
`&&!l.nestingLevel){l.tokenType=N.DELIMITER,l.token=$(l),U(l);return}var C=$(l),M=L(l,2),k=L(l,3);if(k.length===3&&w[k]){l.tokenType=N.DELIMITER,l.token=k,U(l),U(l),U(l);return}if(M.length===2&&w[M]){l.tokenType=N.DELIMITER,l.token=M,U(l),U(l);return}if(w[C]){l.tokenType=N.DELIMITER,l.token=C,U(l);return}if(g.isDigitDot(C)){l.tokenType=N.NUMBER;var Q=L(l,2);if(Q==="0b"||Q==="0o"||Q==="0x"){for(l.token+=$(l),U(l),l.token+=$(l),U(l);g.isHexDigit($(l));)l.token+=$(l),U(l);if($(l)===".")for(l.token+=".",U(l);g.isHexDigit($(l));)l.token+=$(l),U(l);else if($(l)==="i")for(l.token+="i",U(l);g.isDigit($(l));)l.token+=$(l),U(l);return}if($(l)==="."){if(l.token+=$(l),U(l),!g.isDigit($(l))){l.tokenType=N.DELIMITER;return}}else{for(;g.isDigit($(l));)l.token+=$(l),U(l);g.isDecimalMark($(l),q(l))&&(l.token+=$(l),U(l))}for(;g.isDigit($(l));)l.token+=$(l),U(l);if($(l)==="E"||$(l)==="e"){if(g.isDigit(q(l))||q(l)==="-"||q(l)==="+"){if(l.token+=$(l),U(l),($(l)==="+"||$(l)==="-")&&(l.token+=$(l),U(l)),!g.isDigit($(l)))throw he(l,'Digit expected, got "'+$(l)+'"');for(;g.isDigit($(l));)l.token+=$(l),U(l);if(g.isDecimalMark($(l),q(l)))throw he(l,'Digit expected, got "'+$(l)+'"')}else if(q(l)===".")throw U(l),he(l,'Digit expected, got "'+$(l)+'"')}return}if(g.isAlpha($(l),j(l),q(l))){for(;g.isAlpha($(l),j(l),q(l))||g.isDigit($(l));)l.token+=$(l),U(l);J(B,l.token)?l.tokenType=N.DELIMITER:l.tokenType=N.SYMBOL;return}for(l.tokenType=N.UNKNOWN;$(l)!=="";)l.token+=$(l),U(l);throw he(l,'Syntax error in part "'+l.token+'"')}function H(l){do y(l);while(l.token===`
`)}function A(l){l.nestingLevel++}function Y(l){l.nestingLevel--}g.isAlpha=function(C,M,k){return g.isValidLatinOrGreek(C)||g.isValidMathSymbol(C,k)||g.isValidMathSymbol(M,C)},g.isValidLatinOrGreek=function(C){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(C)},g.isValidMathSymbol=function(C,M){return/^[\uD835]$/.test(C)&&/^[\uDC00-\uDFFF]$/.test(M)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(M)},g.isWhitespace=function(C,M){return C===" "||C==="	"||C===`
`&&M>0},g.isDecimalMark=function(C,M){return C==="."&&M!=="/"&&M!=="*"&&M!=="^"},g.isDigitDot=function(C){return C>="0"&&C<="9"||C==="."},g.isDigit=function(C){return C>="0"&&C<="9"},g.isHexDigit=function(C){return C>="0"&&C<="9"||C>="a"&&C<="f"||C>="A"&&C<="F"};function ae(l,C){var M=I();He(M,{expression:l,extraNodes:C}),y(M);var k=se(M);if(M.token!=="")throw M.tokenType===N.DELIMITER?fr(M,"Unexpected operator "+M.token):he(M,'Unexpected part "'+M.token+'"');return k}function se(l){var C,M=[],k;for(l.token!==""&&l.token!==`
`&&l.token!==";"&&(C=z(l),l.comment&&(C.comment=l.comment));l.token===`
`||l.token===";";)M.length===0&&C&&(k=l.token!==";",M.push({node:C,visible:k})),y(l),l.token!==`
`&&l.token!==";"&&l.token!==""&&(C=z(l),l.comment&&(C.comment=l.comment),k=l.token!==";",M.push({node:C,visible:k}));return M.length>0?new h(M):(C||(C=new f(void 0),l.comment&&(C.comment=l.comment)),C)}function z(l){var C,M,k,Q,ee=ge(l);if(l.token==="="){if(Pe(ee))return C=ee.name,H(l),k=z(l),new u(new T(C),k);if(ir(ee))return H(l),k=z(l),new u(ee.object,ee.index,k);if(ot(ee)&&Pe(ee.fn)&&(Q=!0,M=[],C=ee.name,ee.args.forEach(function(Ge,Pi){Pe(Ge)?M[Pi]=Ge.name:Q=!1}),Q))return H(l),k=z(l),new s(C,M,k);throw he(l,"Invalid left hand side of assignment operator =")}return ee}function ge(l){for(var C=Ee(l);l.token==="?";){var M=l.conditionalLevel;l.conditionalLevel=l.nestingLevel,H(l);var k=C,Q=z(l);if(l.token!==":")throw he(l,"False part of conditional expression expected");l.conditionalLevel=null,H(l);var ee=z(l);C=new c(k,Q,ee),l.conditionalLevel=M}return C}function Ee(l){for(var C=Z(l);l.token==="or";)H(l),C=new m("or","or",[C,Z(l)]);return C}function Z(l){for(var C=re(l);l.token==="xor";)H(l),C=new m("xor","xor",[C,re(l)]);return C}function re(l){for(var C=Se(l);l.token==="and";)H(l),C=new m("and","and",[C,Se(l)]);return C}function Se(l){for(var C=ve(l);l.token==="|";)H(l),C=new m("|","bitOr",[C,ve(l)]);return C}function ve(l){for(var C=ue(l);l.token==="^|";)H(l),C=new m("^|","bitXor",[C,ue(l)]);return C}function ue(l){for(var C=Oe(l);l.token==="&";)H(l),C=new m("&","bitAnd",[C,Oe(l)]);return C}function Oe(l){for(var C=[be(l)],M=[],k={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};J(k,l.token);){var Q={name:l.token,fn:k[l.token]};M.push(Q),H(l),C.push(be(l))}return C.length===1?C[0]:C.length===2?new m(M[0].name,M[0].fn,C):new E(M.map(ee=>ee.fn),C)}function be(l){var C,M,k,Q;C=oe(l);for(var ee={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};J(ee,l.token);)M=l.token,k=ee[M],H(l),Q=[C,oe(l)],C=new m(M,k,Q);return C}function oe(l){var C,M,k,Q;C=Fe(l);for(var ee={to:"to",in:"to"};J(ee,l.token);)M=l.token,k=ee[M],H(l),M==="in"&&l.token===""?C=new m("*","multiply",[C,new T("in")],!0):(Q=[C,Fe(l)],C=new m(M,k,Q));return C}function Fe(l){var C,M=[];if(l.token===":"?C=new f(1):C=b(l),l.token===":"&&l.conditionalLevel!==l.nestingLevel){for(M.push(C);l.token===":"&&M.length<3;)H(l),l.token===")"||l.token==="]"||l.token===","||l.token===""?M.push(new T("end")):M.push(b(l));M.length===3?C=new D(M[0],M[2],M[1]):C=new D(M[0],M[1])}return C}function b(l){var C,M,k,Q;C=O(l);for(var ee={"+":"add","-":"subtract"};J(ee,l.token);){M=l.token,k=ee[M],H(l);var Ge=O(l);Ge.isPercentage?Q=[C,new m("*","multiply",[C,Ge])]:Q=[C,Ge],C=new m(M,k,Q)}return C}function O(l){var C,M,k,Q;C=R(l),M=C;for(var ee={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide"};J(ee,l.token);)k=l.token,Q=ee[k],H(l),M=R(l),C=new m(k,Q,[C,M]);return C}function R(l){var C,M;for(C=P(l),M=C;l.tokenType===N.SYMBOL||l.token==="in"&&We(C)||l.tokenType===N.NUMBER&&!We(M)&&(!Tr(M)||M.op==="!")||l.token==="(";)M=P(l),C=new m("*","multiply",[C,M],!0);return C}function P(l){for(var C=V(l),M=C,k=[];l.token==="/"&&wt(M);)if(k.push(He({},l)),H(l),l.tokenType===N.NUMBER)if(k.push(He({},l)),H(l),l.tokenType===N.SYMBOL||l.token==="(")He(l,k.pop()),k.pop(),M=V(l),C=new m("/","divide",[C,M]);else{k.pop(),He(l,k.pop());break}else{He(l,k.pop());break}return C}function V(l){var C,M,k,Q;C=W(l);for(var ee={"%":"mod",mod:"mod"};J(ee,l.token);)M=l.token,k=ee[M],H(l),M==="%"&&l.tokenType===N.DELIMITER&&l.token!=="("?C=new m("/","divide",[C,new f(100)],!1,!0):(Q=[C,W(l)],C=new m(M,k,Q));return C}function W(l){var C,M,k,Q={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return J(Q,l.token)?(k=Q[l.token],C=l.token,H(l),M=[W(l)],new m(C,k,M)):X(l)}function X(l){var C,M,k,Q;return C=K(l),(l.token==="^"||l.token===".^")&&(M=l.token,k=M==="^"?"pow":"dotPow",H(l),Q=[C,W(l)],C=new m(M,k,Q)),C}function K(l){var C,M,k,Q;C=xe(l);for(var ee={"!":"factorial","'":"ctranspose"};J(ee,l.token);)M=l.token,k=ee[M],y(l),Q=[C],C=new m(M,k,Q),C=Me(l,C);return C}function xe(l){var C=[];if(l.tokenType===N.SYMBOL&&J(l.extraNodes,l.token)){var M=l.extraNodes[l.token];if(y(l),l.token==="("){if(C=[],A(l),y(l),l.token!==")")for(C.push(z(l));l.token===",";)y(l),C.push(z(l));if(l.token!==")")throw he(l,"Parenthesis ) expected");Y(l),y(l)}return new M(C)}return ye(l)}function ye(l){var C,M;return l.tokenType===N.SYMBOL||l.tokenType===N.DELIMITER&&l.token in B?(M=l.token,y(l),J(x,M)?C=new f(x[M]):S.indexOf(M)!==-1?C=new f(i(M,"number")):C=new T(M),C=Me(l,C),C):Re(l)}function Me(l,C,M){for(var k;(l.token==="("||l.token==="["||l.token===".")&&!M;)if(k=[],l.token==="(")if(Pe(C)||ir(C)){if(A(l),y(l),l.token!==")")for(k.push(z(l));l.token===",";)y(l),k.push(z(l));if(l.token!==")")throw he(l,"Parenthesis ) expected");Y(l),y(l),C=new d(C,k)}else return C;else if(l.token==="["){if(A(l),y(l),l.token!=="]")for(k.push(z(l));l.token===",";)y(l),k.push(z(l));if(l.token!=="]")throw he(l,"Parenthesis ] expected");Y(l),y(l),C=new n(C,new v(k))}else{y(l);var Q=l.tokenType===N.SYMBOL||l.tokenType===N.DELIMITER&&l.token in B;if(!Q)throw he(l,"Property name expected after dot");k.push(new f(l.token)),y(l);var ee=!0;C=new n(C,new v(k,ee))}return C}function Re(l){var C,M;return l.token==='"'||l.token==="'"?(M=je(l,l.token),C=new f(M),C=Me(l,C),C):tr(l)}function je(l,C){for(var M="";$(l)!==""&&$(l)!==C;)if($(l)==="\\"){U(l);var k=$(l),Q=_[k];if(Q!==void 0)M+=Q,l.index+=1;else if(k==="u"){var ee=l.expression.slice(l.index+1,l.index+5);if(/^[0-9A-Fa-f]{4}$/.test(ee))M+=String.fromCharCode(parseInt(ee,16)),l.index+=5;else throw he(l,"Invalid unicode character \\u".concat(ee))}else throw he(l,"Bad escape character \\".concat(k))}else M+=$(l),U(l);if(y(l),l.token!==C)throw he(l,"End of string ".concat(C," expected"));return y(l),M}function tr(l){var C,M,k,Q;if(l.token==="["){if(A(l),y(l),l.token!=="]"){var ee=qe(l);if(l.token===";"){for(k=1,M=[ee];l.token===";";)y(l),l.token!=="]"&&(M[k]=qe(l),k++);if(l.token!=="]")throw he(l,"End of matrix ] expected");Y(l),y(l),Q=M[0].items.length;for(var Ge=1;Ge<k;Ge++)if(M[Ge].items.length!==Q)throw fr(l,"Column dimensions mismatch ("+M[Ge].items.length+" !== "+Q+")");C=new t(M)}else{if(l.token!=="]")throw he(l,"End of matrix ] expected");Y(l),y(l),C=ee}}else Y(l),y(l),C=new t([]);return Me(l,C)}return sr(l)}function qe(l){for(var C=[z(l)],M=1;l.token===",";)y(l),l.token!=="]"&&l.token!==";"&&(C[M]=z(l),M++);return new t(C)}function sr(l){if(l.token==="{"){A(l);var C,M={};do if(y(l),l.token!=="}"){if(l.token==='"'||l.token==="'")C=je(l,l.token);else if(l.tokenType===N.SYMBOL||l.tokenType===N.DELIMITER&&l.token in B)C=l.token,y(l);else throw he(l,"Symbol or string expected as object key");if(l.token!==":")throw he(l,"Colon : expected after object key");y(l),M[C]=z(l)}while(l.token===",");if(l.token!=="}")throw he(l,"Comma , or bracket } expected after object value");Y(l),y(l);var k=new p(M);return k=Me(l,k),k}return nr(l)}function nr(l){var C;return l.tokenType===N.NUMBER?(C=l.token,y(l),new f(i(C,a.number))):$r(l)}function $r(l){var C;if(l.token==="("){if(A(l),y(l),C=z(l),l.token!==")")throw he(l,"Parenthesis ) expected");return Y(l),y(l),C=new o(C),C=Me(l,C),C}return Dr(l)}function Dr(l){throw l.token===""?he(l,"Unexpected end of expression"):he(l,"Value expected")}function gr(l){return l.index-l.token.length+1}function he(l,C){var M=gr(l),k=new SyntaxError(C+" (char "+M+")");return k.char=M,k}function fr(l,C){var M=gr(l),k=new SyntaxError(C+" (char "+M+")");return k.char=M,k}return r.addConversion({from:"string",to:"Node",convert:g}),g}),Sn="evaluate",Rs=["typed","parse"],Is=G(Sn,Rs,e=>{var{typed:r,parse:i}=e;return r(Sn,{string:function(n){var t=bt();return i(n).compile().evaluate(t)},"string, Map | Object":function(n,t){return i(n).compile().evaluate(t)},"Array | Matrix":function(n){var t=bt();return Ce(n,function(u){return i(u).compile().evaluate(t)})},"Array | Matrix, Map | Object":function(n,t){return Ce(n,function(u){return i(u).compile().evaluate(t)})}})}),On="det",$s=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Ls=G(On,$s,e=>{var{typed:r,matrix:i,subtractScalar:a,multiply:n,divideScalar:t,isZero:u,unaryMinus:h}=e;return r(On,{any:function(s){return fe(s)},"Array | Matrix":function(s){var d;switch(Ne(s)?d=s.size():Array.isArray(s)?(s=i(s),d=s.size()):d=[],d.length){case 0:return fe(s);case 1:if(d[0]===1)return fe(s.valueOf()[0]);if(d[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+we(d)+")");case 2:{var v=d[0],p=d[1];if(v===p)return c(s.clone().valueOf(),v);if(p===0)return 1;throw new RangeError("Matrix must be square (size: "+we(d)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+we(d)+")")}}});function c(f,s,d){if(s===1)return fe(f[0][0]);if(s===2)return a(n(f[0][0],f[1][1]),n(f[1][0],f[0][1]));for(var v=!1,p=new Array(s).fill(0).map((B,x)=>x),m=0;m<s;m++){var o=p[m];if(u(f[o][m])){var D=void 0;for(D=m+1;D<s;D++)if(!u(f[p[D]][m])){o=p[D],p[D]=p[m],p[m]=o,v=!v;break}if(D===s)return f[o][m]}for(var E=f[o][m],T=m===0?1:f[p[m-1]][m-1],g=m+1;g<s;g++)for(var F=p[g],N=m+1;N<s;N++)f[F][N]=t(a(n(f[F][N],E),n(f[F][m],f[o][N])),T)}var w=f[p[s-1]][s-1];return v?h(w):w}}),Tn="inv",Us=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],zs=G(Tn,Us,e=>{var{typed:r,matrix:i,divideScalar:a,addScalar:n,multiply:t,unaryMinus:u,det:h,identity:c,abs:f}=e;return r(Tn,{"Array | Matrix":function(v){var p=Ne(v)?v.size():Ie(v);switch(p.length){case 1:if(p[0]===1)return Ne(v)?i([a(1,v.valueOf()[0])]):[a(1,v[0])];throw new RangeError("Matrix must be square (size: "+we(p)+")");case 2:{var m=p[0],o=p[1];if(m===o)return Ne(v)?i(s(v.valueOf(),m,o),v.storage()):s(v,m,o);throw new RangeError("Matrix must be square (size: "+we(p)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+we(p)+")")}},any:function(v){return a(1,v)}});function s(d,v,p){var m,o,D,E,T;if(v===1){if(E=d[0][0],E===0)throw Error("Cannot calculate inverse, determinant is zero");return[[a(1,E)]]}else if(v===2){var g=h(d);if(g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[a(d[1][1],g),a(u(d[0][1]),g)],[a(u(d[1][0]),g),a(d[0][0],g)]]}else{var F=d.concat();for(m=0;m<v;m++)F[m]=F[m].concat();for(var N=c(v).valueOf(),w=0;w<p;w++){var B=f(F[w][w]),x=w;for(m=w+1;m<v;)f(F[m][w])>B&&(B=f(F[m][w]),x=m),m++;if(B===0)throw Error("Cannot calculate inverse, determinant is zero");m=x,m!==w&&(T=F[w],F[w]=F[m],F[m]=T,T=N[w],N[w]=N[m],N[m]=T);var S=F[w],_=N[w];for(m=0;m<v;m++){var I=F[m],L=N[m];if(m!==w){if(I[w]!==0){for(D=a(u(I[w]),S[w]),o=w;o<p;o++)I[o]=n(I[o],t(D,S[o]));for(o=0;o<p;o++)L[o]=n(L[o],t(D,_[o]))}}else{for(D=S[w],o=w;o<p;o++)I[o]=a(I[o],D);for(o=0;o<p;o++)L[o]=a(L[o],D)}}}return N}}}),dr={createBigNumberClass:Fa},pt={createComplexClass:Oa},It={createMatrixClass:Ia},Ke={MatrixDependencies:It,createDenseMatrixClass:za},$t={createFractionClass:_a},ne={BigNumberDependencies:dr,ComplexDependencies:pt,DenseMatrixDependencies:Ke,FractionDependencies:$t,createTyped:Ea},Ti={typedDependencies:ne,createAbs:du},$e={createNode:Ko},rr={typedDependencies:ne,createEqualScalar:Za},Lt={MatrixDependencies:It,equalScalarDependencies:rr,typedDependencies:ne,createSparseMatrixClass:Qa},Rr={typedDependencies:ne,createAddScalar:gu},Ps={typedDependencies:ne,createIsInteger:Ha},_e={DenseMatrixDependencies:Ke,MatrixDependencies:It,SparseMatrixDependencies:Lt,typedDependencies:ne,createMatrix:pu},Bi={isIntegerDependencies:Ps,matrixDependencies:_e,typedDependencies:ne,createConcat:vo},Hs={DenseMatrixDependencies:Ke,SparseMatrixDependencies:Lt,addScalarDependencies:Rr,concatDependencies:Bi,equalScalarDependencies:rr,matrixDependencies:_e,typedDependencies:ne,createAdd:jo},Ir={BigNumberDependencies:dr,matrixDependencies:_e,typedDependencies:ne,createZeros:So},_i={addDependencies:Hs,matrixDependencies:_e,typedDependencies:ne,zerosDependencies:Ir,createSubset:Ao},ks={NodeDependencies:$e,subsetDependencies:_i,createAccessorNode:es},qs={NodeDependencies:$e,createArrayNode:ts},Gs={matrixDependencies:_e,NodeDependencies:$e,subsetDependencies:_i,createAssignmentNode:as},Vs={BigNumberDependencies:dr,typedDependencies:ne,createBignumber:ou},Mi={FractionDependencies:$t,typedDependencies:ne,createFraction:lu},Ut={typedDependencies:ne,createNumber:iu},Ri={bignumberDependencies:Vs,fractionDependencies:Mi,numberDependencies:Ut,createNumeric:Mo},zt={numericDependencies:Ri,typedDependencies:ne,createDivideScalar:Io},Ws={DenseMatrixDependencies:Ke,concatDependencies:Bi,equalScalarDependencies:rr,matrixDependencies:_e,typedDependencies:ne,createEqual:Ho},Pt={BigNumberDependencies:dr,DenseMatrixDependencies:Ke,equalScalarDependencies:rr,matrixDependencies:_e,typedDependencies:ne,zerosDependencies:Ir,createRound:zo},js={DenseMatrixDependencies:Ke,equalScalarDependencies:rr,matrixDependencies:_e,roundDependencies:Pt,typedDependencies:ne,zerosDependencies:Ir,createCeil:Ou},Js={DenseMatrixDependencies:Ke,equalScalarDependencies:rr,matrixDependencies:_e,roundDependencies:Pt,typedDependencies:ne,zerosDependencies:Ir,createFloor:Iu},Ys={ComplexDependencies:pt,DenseMatrixDependencies:Ke,ceilDependencies:js,equalScalarDependencies:rr,floorDependencies:Js,matrixDependencies:_e,typedDependencies:ne,zerosDependencies:Ir,createFix:_u},Zs={typedDependencies:ne,createFormat:To},Xs={typedDependencies:ne,createIsNumeric:Ga},Ht={typedDependencies:ne,createMultiplyScalar:io},Ii={BigNumberDependencies:dr,DenseMatrixDependencies:Ke,SparseMatrixDependencies:Lt,matrixDependencies:_e,typedDependencies:ne,createIdentity:mo},Ks={typedDependencies:ne,createIsZero:Wa},Qs={typedDependencies:ne,createConj:co},$i={matrixDependencies:_e,typedDependencies:ne,createSize:wo},ef={addScalarDependencies:Rr,conjDependencies:Qs,multiplyScalarDependencies:Ht,sizeDependencies:$i,typedDependencies:ne,createDot:Yo},kt={addScalarDependencies:Rr,dotDependencies:ef,equalScalarDependencies:rr,matrixDependencies:_e,multiplyScalarDependencies:Ht,typedDependencies:ne,createMultiply:uo},Li={typedDependencies:ne,createSubtractScalar:yu},Ui={typedDependencies:ne,createUnaryMinus:hu},rf={divideScalarDependencies:zt,isZeroDependencies:Ks,matrixDependencies:_e,multiplyDependencies:kt,subtractScalarDependencies:Li,typedDependencies:ne,unaryMinusDependencies:Ui,createDet:Ls},tf={absDependencies:Ti,addScalarDependencies:Rr,detDependencies:rf,divideScalarDependencies:zt,identityDependencies:Ii,matrixDependencies:_e,multiplyDependencies:kt,typedDependencies:ne,unaryMinusDependencies:Ui,createInv:zs},nf={ComplexDependencies:pt,fractionDependencies:Mi,identityDependencies:Ii,invDependencies:tf,matrixDependencies:_e,multiplyDependencies:kt,numberDependencies:Ut,typedDependencies:ne,createPow:Lo},af={BigNumberDependencies:dr,ComplexDependencies:pt,FractionDependencies:$t,absDependencies:Ti,addScalarDependencies:Rr,divideScalarDependencies:zt,equalDependencies:Ws,fixDependencies:Ys,formatDependencies:Zs,isNumericDependencies:Xs,multiplyScalarDependencies:Ht,numberDependencies:Ut,powDependencies:nf,roundDependencies:Pt,subtractScalarDependencies:Li,createUnitClass:Vo},uf={createResultSet:Aa},of={NodeDependencies:$e,ResultSetDependencies:uf,createBlockNode:os},sf={NodeDependencies:$e,createConditionalNode:fs},ff={NodeDependencies:$e,createConstantNode:ps},lf={NodeDependencies:$e,typedDependencies:ne,createFunctionAssignmentNode:hs},zi={UnitDependencies:af,NodeDependencies:$e,createSymbolNode:Os},cf={NodeDependencies:$e,SymbolNodeDependencies:zi,createFunctionNode:Bs},pf={NodeDependencies:$e,sizeDependencies:$i,createIndexNode:ds},vf={NodeDependencies:$e,createObjectNode:gs},hf={NodeDependencies:$e,createOperatorNode:ys},mf={NodeDependencies:$e,createParenthesisNode:Ns},df={NodeDependencies:$e,createRangeNode:bs},Df={NodeDependencies:$e,createRelationalNode:Fs},gf={AccessorNodeDependencies:ks,ArrayNodeDependencies:qs,AssignmentNodeDependencies:Gs,BlockNodeDependencies:of,ConditionalNodeDependencies:sf,ConstantNodeDependencies:ff,FunctionAssignmentNodeDependencies:lf,FunctionNodeDependencies:cf,IndexNodeDependencies:pf,ObjectNodeDependencies:vf,OperatorNodeDependencies:hf,ParenthesisNodeDependencies:mf,RangeNodeDependencies:df,RelationalNodeDependencies:Df,SymbolNodeDependencies:zi,numericDependencies:Ri,typedDependencies:ne,createParse:Ms},Af={parseDependencies:gf,typedDependencies:ne,createEvaluate:Is};function Ef(e){var r=new ki;return e.on=r.on.bind(r),e.off=r.off.bind(r),e.once=r.once.bind(r),e.emit=r.emit.bind(r),e}function yf(e,r,i,a){function n(D,E){var T=arguments.length;if(T!==1&&T!==2)throw new or("import",T,1,2);E||(E={});function g(B,x,S){if(Array.isArray(x))x.forEach(L=>g(B,L));else if(typeof x=="object")for(var _ in x)J(x,_)&&g(B,x[_],_);else if(Ar(x)||S!==void 0){var I=Ar(x)?m(x)?x.fn+".transform":x.fn:S;if(J(B,I)&&B[I]!==x&&!E.silent)throw new Error('Cannot import "'+I+'" twice');B[I]=x}else if(!E.silent)throw new TypeError("Factory, Object, or Array expected")}var F={};g(F,D);for(var N in F)if(J(F,N)){var w=F[N];if(Ar(w))f(w,E);else if(s(w))t(N,w,E);else if(!E.silent)throw new TypeError("Factory, Object, or Array expected")}}function t(D,E,T){if(T.wrap&&typeof E=="function"&&(E=c(E)),d(E)&&(E=e(D,{[E.signature]:E})),e.isTypedFunction(i[D])&&e.isTypedFunction(E)){T.override?E=e(D,E.signatures):E=e(i[D],E),i[D]=E,delete a[D],u(D,E),i.emit("import",D,function(){return E});return}if(i[D]===void 0||T.override){i[D]=E,delete a[D],u(D,E),i.emit("import",D,function(){return E});return}if(!T.silent)throw new Error('Cannot import "'+D+'": already exists')}function u(D,E){E&&typeof E.transform=="function"?(i.expression.transform[D]=E.transform,v(D)&&(i.expression.mathWithTransform[D]=E.transform)):(delete i.expression.transform[D],v(D)&&(i.expression.mathWithTransform[D]=E))}function h(D){delete i.expression.transform[D],v(D)?i.expression.mathWithTransform[D]=i[D]:delete i.expression.mathWithTransform[D]}function c(D){var E=function(){for(var g=[],F=0,N=arguments.length;F<N;F++){var w=arguments[F];g[F]=w&&w.valueOf()}return D.apply(i,g)};return D.transform&&(E.transform=D.transform),E}function f(D,E){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:D.fn;if(Qt(T,"."))throw new Error("Factory name should not contain a nested path. Name: "+JSON.stringify(T));var g=m(D)?i.expression.transform:i,F=T in i.expression.transform,N=J(g,T)?g[T]:void 0,w=function(){var x={};D.dependencies.map(fi).forEach(_=>{if(Qt(_,"."))throw new Error("Factory dependency should not contain a nested path. Name: "+JSON.stringify(_));_==="math"?x.math=i:_==="mathWithTransform"?x.mathWithTransform=i.expression.mathWithTransform:_==="classes"?x.classes=i:x[_]=i[_]});var S=D(x);if(S&&typeof S.transform=="function")throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(N===void 0||E.override)return S;if(e.isTypedFunction(N)&&e.isTypedFunction(S))return e(N,S);if(E.silent)return N;throw new Error('Cannot import "'+T+'": already exists')};!D.meta||D.meta.lazy!==!1?(vt(g,T,w),N&&F?h(T):(m(D)||p(D))&&vt(i.expression.mathWithTransform,T,()=>g[T])):(g[T]=w(),N&&F?h(T):(m(D)||p(D))&&vt(i.expression.mathWithTransform,T,()=>g[T])),a[T]=D,i.emit("import",T,w)}function s(D){return typeof D=="function"||typeof D=="number"||typeof D=="string"||typeof D=="boolean"||D===null||Ve(D)||Qe(D)||De(D)||ut(D)||Ne(D)||Array.isArray(D)}function d(D){return typeof D=="function"&&typeof D.signature=="string"}function v(D){return!J(o,D)}function p(D){return D.fn.indexOf(".")===-1&&!J(o,D.fn)&&(!D.meta||!D.meta.isClass)}function m(D){return D!==void 0&&D.meta!==void 0&&D.meta.isTransformFunction===!0||!1}var o={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return n}function wf(e,r){var i=He({},Bn,r);if(typeof Object.create!="function")throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var a=Ef({isNumber:pe,isComplex:Qe,isBigNumber:De,isFraction:ut,isUnit:Ve,isString:ze,isArray:me,isMatrix:Ne,isCollection:br,isDenseMatrix:_n,isSparseMatrix:Mn,isRange:Rn,isIndex:xr,isBoolean:In,isResultSet:$n,isHelp:Ln,isFunction:Un,isDate:zn,isRegExp:Pn,isObject:Sr,isNull:Hn,isUndefined:kn,isAccessorNode:ir,isArrayNode:Cr,isAssignmentNode:qn,isBlockNode:Gn,isConditionalNode:Vn,isConstantNode:We,isFunctionAssignmentNode:Tt,isFunctionNode:ot,isIndexNode:Or,isNode:Ae,isObjectNode:Bt,isOperatorNode:Tr,isParenthesisNode:vr,isRangeNode:Wn,isRelationalNode:jn,isSymbolNode:Pe,isChain:Jn});a.config=ji(i,a.emit),a.expression={transform:{},mathWithTransform:{config:a.config}};var n=[],t=[];function u(s){if(Ar(s))return s(a);var d=s[Object.keys(s)[0]];if(Ar(d))return d(a);if(!Vi(s))throw console.warn("Factory object with properties `type`, `name`, and `factory` expected",s),new Error("Factory object with properties `type`, `name`, and `factory` expected");var v=n.indexOf(s),p;return v===-1?(s.math===!0?p=s.factory(a.type,i,u,a.typed,a):p=s.factory(a.type,i,u,a.typed),n.push(s),t.push(p)):p=t[v],p}var h={};function c(){for(var s=arguments.length,d=new Array(s),v=0;v<s;v++)d[v]=arguments[v];return a.typed.apply(a.typed,d)}c.isTypedFunction=yt.isTypedFunction;var f=yf(c,u,a,h);return a.import=f,a.on("config",()=>{Object.values(h).forEach(s=>{s&&s.meta&&s.meta.recreateOnConfigChange&&f(s,{override:!0})})}),a.create=wf.bind(null,e),a.factory=G,a.import(Object.values(Gi(e))),a.ArgumentsError=or,a.DimensionError=te,a.IndexError=Xe,a}export{wf as c,Af as e};
